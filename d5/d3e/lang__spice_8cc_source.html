<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gnucap: savant/gnucap/src/lang_spice.cc Source File</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gnucap
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">savant/gnucap/src/lang_spice.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d3e/lang__spice_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*$Id: lang_spice.cc,v 26.134 2009/11/29 03:47:06 al Exp $ -*- C++ -*-</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2006 Albert Davis</span>
<a name="l00003"></a>00003 <span class="comment"> * Author: Albert Davis &lt;aldavis@gnu.org&gt;</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This file is part of &quot;Gnucap&quot;, the Gnu Circuit Analysis Package</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment"> * the Free Software Foundation; either version 3, or (at your option)</span>
<a name="l00010"></a>00010 <span class="comment"> * any later version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00019"></a>00019 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</span>
<a name="l00020"></a>00020 <span class="comment"> * 02110-1301, USA.</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 <span class="comment">//testing=script 2007.07.13</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d3d/u__status_8h.html">u_status.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d4a/c__comand_8h.html">c_comand.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../db/de9/d__dot_8h.html">d_dot.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d8d/d__coment_8h.html">d_coment.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d5c/d__subckt_8h.html">d_subckt.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc4/u__lang_8h.html">u_lang.h</a>&quot;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="comment">// header hack</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/dda/d__logic_8h.html">d_logic.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="../../d0/db2/bm_8h.html">bm.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00034"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html">00034</a> <span class="keyword">namespace </span>{
<a name="l00035"></a>00035 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00036"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html">00036</a> <span class="keyword">class </span><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html">LANG_SPICE_BASE</a> : <span class="keyword">public</span> <a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html">LANGUAGE</a> {
<a name="l00037"></a>00037 <span class="keyword">public</span>:
<a name="l00038"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789ba926c51551878446f2c5c0dc3f6e85bff">00038</a>   <span class="keyword">enum</span> <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789b">EOB</a> {<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789ba926c51551878446f2c5c0dc3f6e85bff">NO_EXIT_ON_BLANK</a>, EXIT_ON_BLANK};
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="keyword">public</span>: <span class="comment">// override virtual, used by callback</span>
<a name="l00041"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a5a808bde339a9abc6335f9adc46a3f0e">00041</a>   std::string <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a5a808bde339a9abc6335f9adc46a3f0e">arg_front</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot; &quot;</span>;}
<a name="l00042"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ada0bcede3671794e4f12ce9ce5a50bab">00042</a>   std::string <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ada0bcede3671794e4f12ce9ce5a50bab">arg_mid</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;=&quot;</span>;}
<a name="l00043"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#add940ae7db9552728096ac281e8b6e3f">00043</a>   std::string <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#add940ae7db9552728096ac281e8b6e3f">arg_back</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;}
<a name="l00044"></a>00044 
<a name="l00045"></a>00045 <span class="keyword">public</span>: <span class="comment">// override virtual, called by commands</span>
<a name="l00046"></a>00046   <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*  parse_comment(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*);
<a name="l00047"></a>00047   <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>*      parse_command(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>*);
<a name="l00048"></a>00048   <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*   parse_paramset(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*);
<a name="l00049"></a>00049   <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* parse_module(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*);
<a name="l00050"></a>00050   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*    parse_instance(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00051"></a>00051   std::string   find_type_in_string(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;);
<a name="l00052"></a>00052 <span class="keyword">public</span>: <span class="comment">// &quot;local?&quot;, called by own commands</span>
<a name="l00053"></a>00053   <span class="keywordtype">void</span> parse_module_body(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>*, <span class="keyword">const</span> std::string&amp;,
<a name="l00054"></a>00054                          EOB, <span class="keyword">const</span> std::string&amp;);
<a name="l00055"></a>00055 <span class="keyword">private</span>: <span class="comment">// local</span>
<a name="l00056"></a>00056   <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*);
<a name="l00057"></a>00057   <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ad268f835937439947ee67581159b5048">parse_args</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*);
<a name="l00058"></a>00058   <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a68b54b0feb0a19b79c607a28e17ba50b">parse_label</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*);
<a name="l00059"></a>00059   <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*, <span class="keywordtype">int</span> minnodes, <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> num_nodes, <span class="keywordtype">bool</span> all_new);
<a name="l00060"></a>00060 <span class="keyword">private</span>: <span class="comment">// compatibility hacks</span>
<a name="l00061"></a>00061   <span class="keywordtype">void</span> parse_element_using_obsolete_callback(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00062"></a>00062   <span class="keywordtype">void</span> parse_logic_using_obsolete_callback(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00063"></a>00063 
<a name="l00064"></a>00064 <span class="keyword">private</span>: <span class="comment">// override virtual, called by print_item</span>
<a name="l00065"></a>00065   <span class="keywordtype">void</span> print_paramset(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*);
<a name="l00066"></a>00066   <span class="keywordtype">void</span> print_module(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*);
<a name="l00067"></a>00067   <span class="keywordtype">void</span> print_instance(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00068"></a>00068   <span class="keywordtype">void</span> print_comment(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*);
<a name="l00069"></a>00069   <span class="keywordtype">void</span> print_command(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>*);
<a name="l00070"></a>00070 <span class="keyword">private</span>: <span class="comment">// local</span>
<a name="l00071"></a>00071   <span class="keywordtype">void</span> print_args(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*);
<a name="l00072"></a>00072   <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a9887be62fced11d1a88b0a6f62fc5e6d">print_type</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00073"></a>00073   <span class="keywordtype">void</span> print_args(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00074"></a>00074   <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a4155adf053c7955b99557bb0ed337482">print_label</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00075"></a>00075   <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ab9f3519168a859ef1020a1dfc9242d49">print_ports</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00076"></a>00076 };
<a name="l00077"></a>00077 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00078"></a><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html">00078</a> <span class="keyword">class </span><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html">LANG_SPICE</a> : <span class="keyword">public</span> <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html">LANG_SPICE_BASE</a> {
<a name="l00079"></a>00079 <span class="keyword">public</span>:
<a name="l00080"></a><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a753c083df97dcabf2a5b88a9a2355ab1">00080</a>   std::string <a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a753c083df97dcabf2a5b88a9a2355ab1">name</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;spice&quot;</span>;}
<a name="l00081"></a><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a172746eed031997407fe9748c46dc719">00081</a>   <span class="keywordtype">bool</span> <a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a172746eed031997407fe9748c46dc719">case_insensitive</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00082"></a><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a686b2539f9bd1b57e963e138989e35c7">00082</a>   <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95">UNITS</a> <a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a686b2539f9bd1b57e963e138989e35c7">units</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95ab0974e5730deff99b684bde4b95a9fda">uSPICE</a>;}
<a name="l00083"></a>00083   <span class="keywordtype">void</span> parse_top_item(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>*);
<a name="l00084"></a>00084 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>;
<a name="l00085"></a>00085 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;LANGUAGE&gt;::INSTALL</a>
<a name="l00086"></a>00086         ds(&amp;<a class="code" href="../../d5/d68/globals_8cc.html#ad60e5f6d21eae20ab215dd193dcd5e1e">language_dispatcher</a>, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#a753c083df97dcabf2a5b88a9a2355ab1">name</a>(), &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>);
<a name="l00087"></a>00087 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00088"></a><a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html">00088</a> <span class="keyword">class </span><a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html">LANG_ACS</a> : <span class="keyword">public</span> <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html">LANG_SPICE_BASE</a> {
<a name="l00089"></a>00089 <span class="keyword">public</span>:
<a name="l00090"></a><a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ad9747ba1202fc739601e13e320d14b8b">00090</a>   std::string <a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ad9747ba1202fc739601e13e320d14b8b">name</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;acs&quot;</span>;}
<a name="l00091"></a><a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ae7d6254064e5aff19e75a4928f518261">00091</a>   <span class="keywordtype">bool</span> <a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ae7d6254064e5aff19e75a4928f518261">case_insensitive</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00092"></a><a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ad806183ee01172bfee9b62d8ae2193ea">00092</a>   <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95">UNITS</a> <a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ad806183ee01172bfee9b62d8ae2193ea">units</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95ab0974e5730deff99b684bde4b95a9fda">uSPICE</a>;}
<a name="l00093"></a>00093 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a106a0e5184a40b87c3ae58a29e980fa7">lang_acs</a>;
<a name="l00094"></a>00094 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;LANGUAGE&gt;::INSTALL</a>
<a name="l00095"></a>00095         da(&amp;<a class="code" href="../../d5/d68/globals_8cc.html#ad60e5f6d21eae20ab215dd193dcd5e1e">language_dispatcher</a>, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a106a0e5184a40b87c3ae58a29e980fa7">lang_acs</a>.<a class="code" href="../../de/d6a/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___a_c_s.html#ad9747ba1202fc739601e13e320d14b8b">name</a>(), &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a106a0e5184a40b87c3ae58a29e980fa7">lang_acs</a>);
<a name="l00096"></a>00096 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00097"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a8f418a2cdce62cdcefdab85f9edbb7ca">00097</a> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a> <a class="code" href="../../d5/da7/spice-wrapper_8cc.html#a0f4b0073973de90813c1017d614a25e3">p0</a>;
<a name="l00098"></a>00098 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CARD&gt;::INSTALL</a>
<a name="l00099"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a08006c7dbd662c3c0a9e6f2c5691f214">00099</a>         d0(&amp;<a class="code" href="../../d7/dcf/namespaceanonymous__namespace_02d__admit_8cc_03.html#ab87dfef4c23d3d083439f14134e09a05">device_dispatcher</a>, <span class="stringliteral">&quot;;|#|*|&#39;|\&quot;|dev_comment&quot;</span>, &amp;p0);
<a name="l00100"></a>00100 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00101"></a>00101 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00102"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a4b13f8a31574f43dcc30e893522051fd">00102</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a4b13f8a31574f43dcc30e893522051fd">skip_pre_stuff</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd)
<a name="l00103"></a>00103 {
<a name="l00104"></a>00104   cmd.<a class="code" href="../../db/d85/class_c_s.html#a19ccbc64484e30fde4c9207323d4cfaf">skipbl</a>();
<a name="l00105"></a>00105   <span class="keywordflow">while</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<a class="code" href="../../d8/dbf/md_8h.html#a7cc4d7d8817cf15e411dea4fdc214c34">CKT_PROMPT</a>)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00106"></a>00106     <span class="comment">/* skip any number of copies of the prompt */</span>
<a name="l00107"></a>00107   }
<a name="l00108"></a>00108   cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<a class="code" href="../../d8/dbf/md_8h.html#ad0d8beee88cc4b08d09a6232c3558831">ANTI_COMMENT</a>); <span class="comment">/* skip mark so spice ignores but gnucap reads */</span>
<a name="l00109"></a>00109 }
<a name="l00110"></a>00110 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00111"></a>00111 <span class="comment">/* count_ports: figure out how many ports</span>
<a name="l00112"></a>00112 <span class="comment"> * returns the number of ports</span>
<a name="l00113"></a>00113 <span class="comment"> * side effect:  &quot;CS&quot; is advanced to past the ports, ready for what follows</span>
<a name="l00114"></a>00114 <span class="comment"> */</span>
<a name="l00115"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">00115</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <span class="keywordtype">int</span> maxnodes, <span class="keywordtype">int</span> minnodes, <span class="keywordtype">int</span> leave_tail, <span class="keywordtype">int</span> start)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   assert(start &lt; maxnodes);
<a name="l00118"></a>00118   assert(minnodes &lt;= maxnodes);
<a name="l00119"></a>00119 
<a name="l00120"></a>00120   <span class="keywordtype">int</span> num_nodes = 0;
<a name="l00121"></a>00121   std::vector&lt;unsigned&gt; spots;
<a name="l00122"></a>00122   <span class="keywordtype">int</span> paren = cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;(&#39;</span>);
<a name="l00123"></a>00123   <span class="keywordtype">int</span> i = start;
<a name="l00124"></a>00124   <span class="comment">// loop over the tokens to try to guess where the nodes end</span>
<a name="l00125"></a>00125   <span class="comment">// and other stuff begins</span>
<a name="l00126"></a>00126   spots.push_back(cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>());
<a name="l00127"></a>00127   <span class="keywordflow">for</span> (;;) {
<a name="l00128"></a>00128     ++i;
<a name="l00129"></a>00129     <span class="comment">//cmd.skiparg();</span>
<a name="l00130"></a>00130     std::string node_name;
<a name="l00131"></a>00131     cmd &gt;&gt; node_name;
<a name="l00132"></a>00132     spots.push_back(cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>());
<a name="l00133"></a>00133 
<a name="l00134"></a>00134     <span class="keywordflow">if</span> (paren &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;)&#39;</span>)) {
<a name="l00135"></a>00135       num_nodes = i;
<a name="l00136"></a>00136       <span class="keywordflow">break</span>;
<a name="l00137"></a>00137     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#aa327c2429bf05a2d3f14949075daab4b">is_end</a>()) {
<a name="l00138"></a>00138       <span class="comment">// found the end, no &#39;=&#39;</span>
<a name="l00139"></a>00139       <span class="keywordflow">if</span> (i &lt;= minnodes) {
<a name="l00140"></a>00140         num_nodes = i;
<a name="l00141"></a>00141       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt;= minnodes + leave_tail) {
<a name="l00142"></a>00142         num_nodes = minnodes;
<a name="l00143"></a>00143       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt;= maxnodes + leave_tail) {
<a name="l00144"></a>00144         num_nodes = i - leave_tail;
<a name="l00145"></a>00145       }<span class="keywordflow">else</span>{
<a name="l00146"></a>00146         num_nodes = maxnodes;
<a name="l00147"></a>00147       }
<a name="l00148"></a>00148       <span class="keywordflow">break</span>;
<a name="l00149"></a>00149     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="stringliteral">&quot;({})&quot;</span>)) {
<a name="l00150"></a>00150       <span class="comment">// found &#39;(&#39;, it&#39;s past the end of nodes</span>
<a name="l00151"></a>00151       <span class="keywordflow">if</span> (i &gt; maxnodes + leave_tail) {
<a name="l00152"></a>00152         num_nodes = maxnodes;
<a name="l00153"></a>00153       }<span class="keywordflow">else</span>{
<a name="l00154"></a>00154         num_nodes = i - leave_tail;
<a name="l00155"></a>00155       }
<a name="l00156"></a>00156       <span class="keywordflow">break</span>;
<a name="l00157"></a>00157     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;=&#39;</span>)) {
<a name="l00158"></a>00158       <span class="comment">// found &#39;=&#39;, it&#39;s past the end of nodes</span>
<a name="l00159"></a>00159       <span class="keywordflow">if</span> (i &gt; maxnodes + leave_tail + 1) {
<a name="l00160"></a>00160         num_nodes = maxnodes;
<a name="l00161"></a>00161       }<span class="keywordflow">else</span>{
<a name="l00162"></a>00162         num_nodes = i - leave_tail - 1;
<a name="l00163"></a>00163       }
<a name="l00164"></a>00164       <span class="keywordflow">break</span>;
<a name="l00165"></a>00165     }<span class="keywordflow">else</span>{
<a name="l00166"></a>00166     }
<a name="l00167"></a>00167   }
<a name="l00168"></a>00168   <span class="keywordflow">if</span> (num_nodes &lt; start) {
<a name="l00169"></a>00169     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(spots.back());
<a name="l00170"></a>00170     <span class="keywordflow">throw</span> <a class="code" href="../../df/d70/class_exception.html">Exception</a>(<span class="stringliteral">&quot;what&#39;s this?&quot;</span>);
<a name="l00171"></a>00171   }<span class="keywordflow">else</span>{
<a name="l00172"></a>00172   }
<a name="l00173"></a>00173 
<a name="l00174"></a>00174   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(spots[static_cast&lt;unsigned&gt;(num_nodes-start)]);
<a name="l00175"></a>00175 
<a name="l00176"></a>00176   <span class="comment">//cmd.warn(bDANGER, &quot;past-nodes?&quot;);</span>
<a name="l00177"></a>00177   <span class="comment">//BUG// assert fails on current controlled sources with (node node dev) syntax</span>
<a name="l00178"></a>00178   <span class="comment">// it&#39;s ok with (node node) dev syntax or node node dev syntax</span>
<a name="l00179"></a>00179   assert(num_nodes &lt;= maxnodes);
<a name="l00180"></a>00180   <span class="keywordflow">return</span> num_nodes;
<a name="l00181"></a>00181 }
<a name="l00182"></a>00182 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00183"></a>00183 <span class="comment">/* parse_ports: parse circuit connections from input string</span>
<a name="l00184"></a>00184 <span class="comment"> * fills in the rest of the array with 0</span>
<a name="l00185"></a>00185 <span class="comment"> * returns the number of nodes actually read</span>
<a name="l00186"></a>00186 <span class="comment"> * The purpose of this complexity is to handle the variants of Spice formats,</span>
<a name="l00187"></a>00187 <span class="comment"> * which might have keys between nodes,</span>
<a name="l00188"></a>00188 <span class="comment"> * an unknown number of nodes with unknown number of args and no delimeters.</span>
<a name="l00189"></a>00189 <span class="comment"> * Consider:  X1 a b c d e f g h i j k</span>
<a name="l00190"></a>00190 <span class="comment"> * Clearly (?) a,b,c,d,e are nodes, f is a subckt name, the rest are args.</span>
<a name="l00191"></a>00191 <span class="comment"> * But how do you know?</span>
<a name="l00192"></a>00192 <span class="comment"> *</span>
<a name="l00193"></a>00193 <span class="comment"> * Args:</span>
<a name="l00194"></a>00194 <span class="comment"> * maxnodes: the maximum number of port nodes to parse.</span>
<a name="l00195"></a>00195 <span class="comment"> *      Stop here, even if it seems there should be more.</span>
<a name="l00196"></a>00196 <span class="comment"> *</span>
<a name="l00197"></a>00197 <span class="comment"> * minnodes: the minimum number of port nodes to parse.</span>
<a name="l00198"></a>00198 <span class="comment"> *      It is an error if there are fewer than this.</span>
<a name="l00199"></a>00199 <span class="comment"> *</span>
<a name="l00200"></a>00200 <span class="comment"> * leave_tail: The number of arguments that are not nodes,</span>
<a name="l00201"></a>00201 <span class="comment"> *      and don&#39;t have equal signs, following.</span>
<a name="l00202"></a>00202 <span class="comment"> *      It is an aid to distinguishing the nodes from things that follow.</span>
<a name="l00203"></a>00203 <span class="comment"> *      minnodes wins over leave_tail, but leave_tail wins over maxnodes.</span>
<a name="l00204"></a>00204 <span class="comment"> *      The above example would need leave_tail=6 to parse correctly.</span>
<a name="l00205"></a>00205 <span class="comment"> *      This one: X1 a b c d e f g=h i=j k</span>
<a name="l00206"></a>00206 <span class="comment"> *      where a,b,c,d,e are nodes, f is a subckt or model identifier</span>
<a name="l00207"></a>00207 <span class="comment"> *      would parse correctly with leave_tail=1.</span>
<a name="l00208"></a>00208 <span class="comment"> *      Usual values for leave_tail are 0 or 1.</span>
<a name="l00209"></a>00209 <span class="comment"> *</span>
<a name="l00210"></a>00210 <span class="comment"> * start: start at this number, used for continuing after HSPICE kluge.</span>
<a name="l00211"></a>00211 <span class="comment"> *      Other than that, the only useful value for start is 0.</span>
<a name="l00212"></a>00212 <span class="comment"> *</span>
<a name="l00213"></a>00213 <span class="comment"> * all_new: All node names must be new (not already defined) and unique.</span>
<a name="l00214"></a>00214 <span class="comment"> *      This is used for the header line in .subckt, which starts clean.</span>
<a name="l00215"></a>00215 <span class="comment"> *      The main benefit is to reject duplicates.</span>
<a name="l00216"></a>00216 <span class="comment"> */</span>
<a name="l00217"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ab93b3773b182242ef5a1dfe001a28afb">00217</a> <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">LANG_SPICE_BASE::parse_ports</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x, <span class="keywordtype">int</span> minnodes,
<a name="l00218"></a>00218                              <span class="keywordtype">int</span> start, <span class="keywordtype">int</span> num_nodes, <span class="keywordtype">bool</span> all_new)
<a name="l00219"></a>00219 {
<a name="l00220"></a>00220   assert(x);
<a name="l00221"></a>00221 
<a name="l00222"></a>00222   <span class="keywordtype">int</span> paren = cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;(&#39;</span>);
<a name="l00223"></a>00223   <span class="keywordtype">int</span> ii = start;
<a name="l00224"></a>00224   <span class="keywordtype">unsigned</span> here1 = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00225"></a>00225   <span class="keywordflow">try</span>{
<a name="l00226"></a>00226     <span class="keywordflow">for</span> (;;) {
<a name="l00227"></a>00227       here1 = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00228"></a>00228       <span class="keywordflow">if</span> (paren &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;)&#39;</span>)) {
<a name="l00229"></a>00229         --paren;
<a name="l00230"></a>00230         <span class="keywordflow">break</span>; <span class="comment">// done.  have closing paren.</span>
<a name="l00231"></a>00231       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (ii &gt;= num_nodes) {
<a name="l00232"></a>00232         <span class="keywordflow">break</span>; <span class="comment">// done.  have maxnodes.</span>
<a name="l00233"></a>00233       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (!cmd.<a class="code" href="../../db/d85/class_c_s.html#a4f9ebb52c1663598fa162b76b6963fd4">more</a>()) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00234"></a>00234         <span class="keywordflow">break</span>; <span class="comment">// done.  premature end of line.</span>
<a name="l00235"></a>00235       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d5e/class_o_p_t.html#a0efe136f7e19272c44ac380605352a80">OPT::keys_between_nodes</a> &amp;&amp;
<a name="l00236"></a>00236                 (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;poly &quot;</span>)
<a name="l00237"></a>00237                  || cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;pwl &quot;</span>)
<a name="l00238"></a>00238                  || cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;vccap &quot;</span>)
<a name="l00239"></a>00239                  || cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;vcg &quot;</span>)
<a name="l00240"></a>00240                  || cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;vcr &quot;</span>))
<a name="l00241"></a>00241                 ) {
<a name="l00242"></a>00242         cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here1);
<a name="l00243"></a>00243         <span class="keywordflow">break</span>; <span class="comment">// done, found reserved word between nodes</span>
<a name="l00244"></a>00244       }<span class="keywordflow">else</span>{
<a name="l00245"></a>00245         <span class="comment">//----------------------</span>
<a name="l00246"></a>00246         <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00247"></a>00247         std::string node_name;
<a name="l00248"></a>00248         cmd &gt;&gt; node_name;
<a name="l00249"></a>00249         <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here)) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00250"></a>00250           <span class="comment">// didn&#39;t move, probably a terminator.</span>
<a name="l00251"></a>00251           <span class="keywordflow">throw</span> <a class="code" href="../../df/d70/class_exception.html">Exception</a>(<span class="stringliteral">&quot;bad node name&quot;</span>);
<a name="l00252"></a>00252         }<span class="keywordflow">else</span>{
<a name="l00253"></a>00253           <span class="comment">// legal node name, store it.</span>
<a name="l00254"></a>00254           x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1ab95c30a66cd7a397b15c5f13861fd0">set_port_by_index</a>(ii, node_name);
<a name="l00255"></a>00255         }
<a name="l00256"></a>00256         <span class="comment">//----------------------</span>
<a name="l00257"></a>00257         <span class="keywordflow">if</span> (!(x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2745ded67054f066a3da59d5316fb929">node_is_connected</a>(ii))) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00258"></a>00258           <span class="keywordflow">break</span>; <span class="comment">// illegal node name, might be proper exit.</span>
<a name="l00259"></a>00259         }<span class="keywordflow">else</span>{
<a name="l00260"></a>00260           <span class="keywordflow">if</span> (all_new) {
<a name="l00261"></a>00261             <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a6ad9427770c7ee1f7c0cd22e8c71233c">node_is_grounded</a>(ii)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00262"></a>00262               cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, here1, <span class="stringliteral">&quot;node 0 not allowed here&quot;</span>);
<a name="l00263"></a>00263             }<span class="keywordflow">else</span>{
<a name="l00264"></a>00264             }
<a name="l00265"></a>00265           }<span class="keywordflow">else</span>{
<a name="l00266"></a>00266           }
<a name="l00267"></a>00267           ++ii;
<a name="l00268"></a>00268         }
<a name="l00269"></a>00269       }
<a name="l00270"></a>00270     }
<a name="l00271"></a>00271   }<span class="keywordflow">catch</span> (<a class="code" href="../../df/d70/class_exception.html">Exception</a>&amp; e) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00272"></a>00272     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, here1, e.message());
<a name="l00273"></a>00273   }
<a name="l00274"></a>00274   <span class="keywordflow">if</span> (ii &lt; minnodes) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00275"></a>00275     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, <span class="stringliteral">&quot;need &quot;</span> + <a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(minnodes-ii) +<span class="stringliteral">&quot; more nodes&quot;</span>);
<a name="l00276"></a>00276   }<span class="keywordflow">else</span>{
<a name="l00277"></a>00277   }
<a name="l00278"></a>00278   <span class="keywordflow">if</span> (paren != 0) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00279"></a>00279     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bWARNING, <span class="stringliteral">&quot;need )&quot;</span>);
<a name="l00280"></a>00280   }<span class="keywordflow">else</span>{
<a name="l00281"></a>00281   }
<a name="l00282"></a>00282   <span class="comment">//assert(x-&gt;_net_nodes == ii);</span>
<a name="l00283"></a>00283   
<a name="l00284"></a>00284   <span class="comment">// ground unused input nodes</span>
<a name="l00285"></a>00285   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> iii = ii;  iii &lt; minnodes;  ++iii) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00286"></a>00286     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9ddb04a1f5b566267007f4facff7c7a3">set_port_to_ground</a>(iii);
<a name="l00287"></a>00287   }
<a name="l00288"></a>00288   <span class="comment">//assert(x-&gt;_net_nodes &gt;= ii);</span>
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00291"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a0dc5699a2ae0ee465301abcfe50cd9d4">00291</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::parse_element_using_obsolete_callback(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293   assert(x);
<a name="l00294"></a>00294   <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>* xx = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>*<span class="keyword">&gt;</span>(x);
<a name="l00295"></a>00295   assert(xx);
<a name="l00296"></a>00296 
<a name="l00297"></a>00297   {
<a name="l00298"></a>00298     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00299"></a>00299     <span class="keywordtype">int</span> stop_nodes = x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a7276b0d0191c93e57c277d3764a9c363">max_nodes</a>() - x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#aefddf5cbfbfc433818fc8538875a3966">num_current_ports</a>();
<a name="l00300"></a>00300     <span class="keywordtype">int</span> num_nodes = <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(cmd, stop_nodes, 0,  0,   0);
<a name="l00301"></a>00301     <span class="comment">//                               max         min tail already_got</span>
<a name="l00302"></a>00302     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00303"></a>00303     <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(cmd, x, 0,  0,          num_nodes, <span class="keyword">false</span>);
<a name="l00304"></a>00304     <span class="comment">//                  min already_got</span>
<a name="l00305"></a>00305   }
<a name="l00306"></a>00306   <span class="keywordtype">int</span> gotnodes = x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a8224c77d22399caa23ce0e8fe67c1027">_net_nodes</a>;
<a name="l00307"></a>00307   <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>* c = NULL;
<a name="l00308"></a>00308 
<a name="l00309"></a>00309   <span class="keywordflow">if</span> (gotnodes &lt; x-&gt;min_nodes()) {
<a name="l00310"></a>00310     <span class="comment">// HSPICE compatibility kluge.</span>
<a name="l00311"></a>00311     <span class="comment">// The device type or function type could be stuck between the nodes.</span>
<a name="l00312"></a>00312     xx-&gt;<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#acb6e55a8db92a52b9c700f8283a5f1a4">skip_dev_type</a>(cmd); <span class="comment">// (redundant)</span>
<a name="l00313"></a>00313     c = <a class="code" href="../../d9/d1d/class_e_v_a_l___b_m___a_c_t_i_o_n___b_a_s_e.html#a30cc7364913afda8ac4b9331bdd3993f">EVAL_BM_ACTION_BASE::parse_func_type</a>(cmd);
<a name="l00314"></a>00314     {
<a name="l00315"></a>00315       <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00316"></a>00316       <span class="keywordtype">int</span> num_nodes = <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(cmd, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a7276b0d0191c93e57c277d3764a9c363">max_nodes</a>(), x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), 0, gotnodes);
<a name="l00317"></a>00317       cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00318"></a>00318       <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(cmd, x, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), gotnodes, num_nodes, <span class="keyword">false</span>);
<a name="l00319"></a>00319     }
<a name="l00320"></a>00320   }<span class="keywordflow">else</span>{
<a name="l00321"></a>00321     <span class="comment">// Normal mode.  nodes first, then data.</span>
<a name="l00322"></a>00322   }
<a name="l00323"></a>00323 
<a name="l00324"></a>00324   <span class="keywordflow">if</span> (!c) {
<a name="l00325"></a>00325     xx-&gt;<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#acb6e55a8db92a52b9c700f8283a5f1a4">skip_dev_type</a>(cmd); <span class="comment">// (redundant)</span>
<a name="l00326"></a>00326     c = <a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#a54c32038f598bcb73a57654e1985ab81">bm_dispatcher</a>.clone(<span class="stringliteral">&quot;eval_bm_cond&quot;</span>);
<a name="l00327"></a>00327   }<span class="keywordflow">else</span>{
<a name="l00328"></a>00328   }
<a name="l00329"></a>00329   <span class="keywordflow">if</span> (!c) {
<a name="l00330"></a>00330     c = <a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#a54c32038f598bcb73a57654e1985ab81">bm_dispatcher</a>.clone(<span class="stringliteral">&quot;eval_bm_value&quot;</span>);
<a name="l00331"></a>00331   }<span class="keywordflow">else</span>{
<a name="l00332"></a>00332   }
<a name="l00333"></a>00333   assert(c);
<a name="l00334"></a>00334   
<a name="l00335"></a>00335   <span class="comment">// we have a blank common of the most general type</span>
<a name="l00336"></a>00336   <span class="comment">// (or HSPICE kluge)</span>
<a name="l00337"></a>00337   <span class="comment">// let it continue parsing</span>
<a name="l00338"></a>00338 
<a name="l00339"></a>00339   <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00340"></a>00340   c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#ab0f8aac03813936ca96b4e65e51978e0">parse_common_obsolete_callback</a>(cmd); <span class="comment">//BUG//callback</span>
<a name="l00341"></a>00341   <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00342"></a>00342     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, <span class="stringliteral">&quot;needs a value&quot;</span>);
<a name="l00343"></a>00343   }<span class="keywordflow">else</span>{
<a name="l00344"></a>00344   }
<a name="l00345"></a>00345 
<a name="l00346"></a>00346   <span class="comment">// At this point, there is ALWAYS a common &quot;c&quot;, which may have more</span>
<a name="l00347"></a>00347   <span class="comment">// commons attached to it.  Try to reduce its complexity.</span>
<a name="l00348"></a>00348   <span class="comment">// &quot;c-&gt;deflate()&quot; may return &quot;c&quot; or some simplification of &quot;c&quot;.</span>
<a name="l00349"></a>00349 
<a name="l00350"></a>00350   <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>* dc = c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#af53c7d8bd30a9e78bee139cddc35875e">deflate</a>();
<a name="l00351"></a>00351   
<a name="l00352"></a>00352   <span class="comment">// dc == deflated_common</span>
<a name="l00353"></a>00353   <span class="comment">// It might be just &quot;c&quot;.</span>
<a name="l00354"></a>00354   <span class="comment">// It might be something else that is simpler but equivalent.</span>
<a name="l00355"></a>00355   <span class="keywordflow">if</span> (dc-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#af99004bf1178d5383a10bba6ff9c31ac">is_trivial</a>()) {
<a name="l00356"></a>00356     assert(dynamic_cast&lt;EVAL_BM_VALUE*&gt;(dc));
<a name="l00357"></a>00357     <span class="comment">// If it is a simple value, don&#39;t use a common.</span>
<a name="l00358"></a>00358     <span class="comment">// Just store the value directly.</span>
<a name="l00359"></a>00359     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a21d2b86992b2254ddf638b32b437926e">obsolete_move_parameters_from_common</a>(dc);
<a name="l00360"></a>00360     <span class="keyword">delete</span> c;
<a name="l00361"></a>00361   }<span class="keywordflow">else</span>{
<a name="l00362"></a>00362     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a5dc0824ae5bcea0628143f59a2c6eeda">attach_common</a>(dc);
<a name="l00363"></a>00363     <span class="keywordflow">if</span> (dc != c) {
<a name="l00364"></a>00364       <span class="keyword">delete</span> c;
<a name="l00365"></a>00365     }<span class="keywordflow">else</span>{
<a name="l00366"></a>00366     }
<a name="l00367"></a>00367   }
<a name="l00368"></a>00368   cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8b7441f7e4149cecb782e949ee8598a">check</a>(bDANGER, <span class="stringliteral">&quot;what&#39;s this?&quot;</span>);
<a name="l00369"></a>00369 }
<a name="l00370"></a>00370 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00371"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a877584d91ed869161ee5243563d344de">00371</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::parse_logic_using_obsolete_callback(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00372"></a>00372 {
<a name="l00373"></a>00373   assert(x);
<a name="l00374"></a>00374   {
<a name="l00375"></a>00375     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00376"></a>00376     <span class="keywordtype">int</span> num_nodes = <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(cmd, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a7276b0d0191c93e57c277d3764a9c363">max_nodes</a>(), x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#abaaa010f2603b1c363eae14f0e683038">tail_size</a>(), 0<span class="comment">/*start*/</span>);
<a name="l00377"></a>00377     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00378"></a>00378     <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(cmd, x, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), 0<span class="comment">/*start*/</span>, num_nodes, <span class="keyword">false</span>);
<a name="l00379"></a>00379   }
<a name="l00380"></a>00380   <span class="keywordtype">int</span> incount = x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a79bcbb4581979400f2d841311ebf2984">net_nodes</a>() - x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>() + 1;
<a name="l00381"></a>00381   assert(incount &gt; 0);
<a name="l00382"></a>00382 
<a name="l00383"></a>00383   std::string modelname = cmd.<a class="code" href="../../db/d85/class_c_s.html#a6647600f58b47a4a13ad4a7ce1f5a40e">ctos</a>(<a class="code" href="../../dd/d17/constant_8h.html#a280dc3f1747e430dc0e3221779fb5dc4">TOKENTERM</a>);
<a name="l00384"></a>00384 
<a name="l00385"></a>00385   <a class="code" href="../../d1/d8a/class_c_o_m_m_o_n___l_o_g_i_c.html">COMMON_LOGIC</a>* common = 0;
<a name="l00386"></a>00386   <span class="keywordflow">if</span>      (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;and &quot;</span> )) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();common = <span class="keyword">new</span> <a class="code" href="../../d7/d36/class_l_o_g_i_c___a_n_d.html">LOGIC_AND</a>;}
<a name="l00387"></a>00387   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;nand &quot;</span>)) {common = <span class="keyword">new</span> <a class="code" href="../../d0/dcd/class_l_o_g_i_c___n_a_n_d.html">LOGIC_NAND</a>;}
<a name="l00388"></a>00388   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;or &quot;</span>  )) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();common = <span class="keyword">new</span> <a class="code" href="../../d9/d9d/class_l_o_g_i_c___o_r.html">LOGIC_OR</a>;}
<a name="l00389"></a>00389   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;nor &quot;</span> )) {common = <span class="keyword">new</span> <a class="code" href="../../d5/d9c/class_l_o_g_i_c___n_o_r.html">LOGIC_NOR</a>;}
<a name="l00390"></a>00390   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;xor &quot;</span> )) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();common = <span class="keyword">new</span> <a class="code" href="../../db/d7c/class_l_o_g_i_c___x_o_r.html">LOGIC_XOR</a>;}
<a name="l00391"></a>00391   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;xnor &quot;</span>)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();common = <span class="keyword">new</span> <a class="code" href="../../de/d3e/class_l_o_g_i_c___x_n_o_r.html">LOGIC_XNOR</a>;}
<a name="l00392"></a>00392   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;inv &quot;</span> )) {common = <span class="keyword">new</span> <a class="code" href="../../d4/d97/class_l_o_g_i_c___i_n_v.html">LOGIC_INV</a>;}
<a name="l00393"></a>00393   <span class="keywordflow">else</span> {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00394"></a>00394     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bWARNING,<span class="stringliteral">&quot;need and,nand,or,nor,xor,xnor,inv&quot;</span>);
<a name="l00395"></a>00395     common=<span class="keyword">new</span> <a class="code" href="../../d1/d2c/class_l_o_g_i_c___n_o_n_e.html">LOGIC_NONE</a>;
<a name="l00396"></a>00396   }
<a name="l00397"></a>00397   
<a name="l00398"></a>00398   assert(common);
<a name="l00399"></a>00399   common-&gt;<a class="code" href="../../d1/d8a/class_c_o_m_m_o_n___l_o_g_i_c.html#a33ce706bb430a98d14a9354bd776a80e">incount</a> = incount;
<a name="l00400"></a>00400   common-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a57f145bf841ff0cd18fc9552a7b798ab">set_modelname</a>(modelname);
<a name="l00401"></a>00401   x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a5dc0824ae5bcea0628143f59a2c6eeda">attach_common</a>(common);
<a name="l00402"></a>00402 }
<a name="l00403"></a>00403 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00404"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a1e95e366eee5986a9f85f679acfb7a1d">00404</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">LANG_SPICE_BASE::parse_type</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>* x)
<a name="l00405"></a>00405 {
<a name="l00406"></a>00406   assert(x);
<a name="l00407"></a>00407   std::string new_type;
<a name="l00408"></a>00408   cmd &gt;&gt; new_type;
<a name="l00409"></a>00409   x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ae68036f27d5e2ce6bbfc0e101e3a3b4c">set_dev_type</a>(new_type);
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00412"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a5f19aea950f0ae3aba1ce32e0431792d">00412</a> <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ad268f835937439947ee67581159b5048">LANG_SPICE_BASE::parse_args</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>* x)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414   assert(x);
<a name="l00415"></a>00415   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* xx = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*<span class="keyword">&gt;</span>(x);
<a name="l00416"></a>00416 
<a name="l00417"></a>00417   cmd &gt;&gt; <span class="stringliteral">&quot;params:&quot;</span>;     <span class="comment">// optional, skip it.</span>
<a name="l00418"></a>00418 
<a name="l00419"></a>00419   <span class="keywordflow">if</span> (!x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a0e1fab2c91cbf5f691c9e365a091070e">use_obsolete_callback_parse</a>()) {
<a name="l00420"></a>00420     <span class="keywordtype">int</span> paren = cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;(&#39;</span>);
<a name="l00421"></a>00421     <span class="keywordflow">if</span> (xx &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a685d13a2fc159bf2d19c78067763567e">is_float</a>()) {         <span class="comment">// simple unnamed value</span>
<a name="l00422"></a>00422       std::string value;
<a name="l00423"></a>00423       cmd &gt;&gt; value;
<a name="l00424"></a>00424       x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a35584d6c562b383e79ee36b3bc818e06">set_param_by_name</a>(xx-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a895b328abb9341c5b45143d586e254c0">value_name</a>(), value);
<a name="l00425"></a>00425     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a0d5870f7e4ec3f213ad71d2c34e238ce">match1</a>(<span class="stringliteral">&quot;&#39;{&quot;</span>)) {       <span class="comment">// quoted unnamed value</span>
<a name="l00426"></a>00426       std::string value;
<a name="l00427"></a>00427       cmd &gt;&gt; value; <span class="comment">// strips off the quotes</span>
<a name="l00428"></a>00428       value = <span class="charliteral">&#39;{&#39;</span> + value + <span class="charliteral">&#39;}&#39;</span>; <span class="comment">// put them back</span>
<a name="l00429"></a>00429       x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a35584d6c562b383e79ee36b3bc818e06">set_param_by_name</a>(xx-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a895b328abb9341c5b45143d586e254c0">value_name</a>(), value);
<a name="l00430"></a>00430     }<span class="keywordflow">else</span>{                              <span class="comment">// only name=value pairs</span>
<a name="l00431"></a>00431     }
<a name="l00432"></a>00432     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00433"></a>00433     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; ; ++i) {
<a name="l00434"></a>00434       <span class="keywordflow">if</span> (paren &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;)&#39;</span>)) {
<a name="l00435"></a>00435         <span class="keywordflow">break</span>;
<a name="l00436"></a>00436       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (!cmd.<a class="code" href="../../db/d85/class_c_s.html#a4f9ebb52c1663598fa162b76b6963fd4">more</a>()) {
<a name="l00437"></a>00437         <span class="keywordflow">break</span>;
<a name="l00438"></a>00438       }<span class="keywordflow">else</span>{
<a name="l00439"></a>00439         std::string Name  = cmd.<a class="code" href="../../db/d85/class_c_s.html#a6647600f58b47a4a13ad4a7ce1f5a40e">ctos</a>(<span class="stringliteral">&quot;=&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l00440"></a>00440         cmd &gt;&gt; <span class="charliteral">&#39;=&#39;</span>;
<a name="l00441"></a>00441         std::string value = cmd.<a class="code" href="../../db/d85/class_c_s.html#a6647600f58b47a4a13ad4a7ce1f5a40e">ctos</a>(<span class="stringliteral">&quot;,=;)&quot;</span>, <span class="stringliteral">&quot;\&quot;&#39;{(&quot;</span>, <span class="stringliteral">&quot;\&quot;&#39;})&quot;</span>);
<a name="l00442"></a>00442         <span class="keywordtype">unsigned</span> there = here;
<a name="l00443"></a>00443         <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00444"></a>00444           <span class="keywordflow">break</span>;
<a name="l00445"></a>00445         }<span class="keywordflow">else</span>{
<a name="l00446"></a>00446           <span class="keywordflow">try</span>{
<a name="l00447"></a>00447             <span class="keywordflow">if</span> (value == <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00448"></a>00448               cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, there, x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a2b81b4c28056adc678b21ff34a756913">long_label</a>() + <span class="stringliteral">&quot;: &quot;</span> + Name + <span class="stringliteral">&quot; has no value?&quot;</span>);
<a name="l00449"></a>00449             }<span class="keywordflow">else</span>{
<a name="l00450"></a>00450             }
<a name="l00451"></a>00451             x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a35584d6c562b383e79ee36b3bc818e06">set_param_by_name</a>(Name, value);
<a name="l00452"></a>00452           }<span class="keywordflow">catch</span> (Exception_No_Match&amp;) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00453"></a>00453             cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, there, x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a2b81b4c28056adc678b21ff34a756913">long_label</a>() + <span class="stringliteral">&quot;: bad parameter &quot;</span> + Name + <span class="stringliteral">&quot; ignored&quot;</span>);
<a name="l00454"></a>00454           }
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456       }
<a name="l00457"></a>00457     }
<a name="l00458"></a>00458   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* pp = dynamic_cast&lt;MODEL_CARD*&gt;(x)) {
<a name="l00459"></a>00459     <span class="comment">// used only for &quot;table&quot;</span>
<a name="l00460"></a>00460     <span class="keywordtype">int</span> paren = cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;(&#39;</span>);
<a name="l00461"></a>00461     <span class="keywordtype">bool</span> in_error = <span class="keyword">false</span>;
<a name="l00462"></a>00462     <span class="keywordflow">for</span> (;;) {
<a name="l00463"></a>00463       <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00464"></a>00464       pp-&gt;parse_params_obsolete_callback(cmd);  <span class="comment">//BUG//callback//</span>
<a name="l00465"></a>00465       <span class="keywordflow">if</span> (!cmd.<a class="code" href="../../db/d85/class_c_s.html#a4f9ebb52c1663598fa162b76b6963fd4">more</a>()) {
<a name="l00466"></a>00466         <span class="keywordflow">break</span>;
<a name="l00467"></a>00467       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (paren &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;)&#39;</span>)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00468"></a>00468         <span class="keywordflow">break</span>;
<a name="l00469"></a>00469       }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00470"></a>00470         <span class="keywordflow">if</span> (in_error) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00471"></a>00471           <span class="comment">// so you don&#39;t get two errors on name = value.</span>
<a name="l00472"></a>00472           cmd.<a class="code" href="../../db/d85/class_c_s.html#a61363ed0eef6cce1d686754355d0e6b3">skiparg</a>();
<a name="l00473"></a>00473           in_error = <span class="keyword">false</span>;
<a name="l00474"></a>00474         }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00475"></a>00475           cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, <span class="stringliteral">&quot;bad paramerter -- ignored&quot;</span>);
<a name="l00476"></a>00476           cmd.<a class="code" href="../../db/d85/class_c_s.html#a61363ed0eef6cce1d686754355d0e6b3">skiparg</a>().<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="stringliteral">&quot;=&quot;</span>);
<a name="l00477"></a>00477           in_error = <span class="keyword">true</span>;
<a name="l00478"></a>00478         }
<a name="l00479"></a>00479       }<span class="keywordflow">else</span>{
<a name="l00480"></a>00480         in_error = <span class="keyword">false</span>;
<a name="l00481"></a>00481       }
<a name="l00482"></a>00482     }
<a name="l00483"></a>00483   }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00484"></a>00484     <span class="comment">// using obsolete_callback</span>
<a name="l00485"></a>00485   }
<a name="l00486"></a>00486 }
<a name="l00487"></a>00487 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00488"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#acbb6abd7fd9239c0020ad7810dfcb6d9">00488</a> <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a68b54b0feb0a19b79c607a28e17ba50b">LANG_SPICE_BASE::parse_label</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>* x)
<a name="l00489"></a>00489 {
<a name="l00490"></a>00490   assert(x);
<a name="l00491"></a>00491   std::string my_name;
<a name="l00492"></a>00492   cmd &gt;&gt; my_name;
<a name="l00493"></a>00493   x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(my_name);
<a name="l00494"></a>00494 }
<a name="l00495"></a>00495 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00496"></a>00496 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00497"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a647ce62d5b00d6e48bd19764fd762f32">00497</a> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* LANG_SPICE_BASE::parse_comment(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* x)
<a name="l00498"></a>00498 {
<a name="l00499"></a>00499   assert(x);
<a name="l00500"></a>00500   x-&gt;<a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html#ab20286be87e4371dee72c586b295cb77">set</a>(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>());
<a name="l00501"></a>00501   <span class="keywordflow">return</span> x;
<a name="l00502"></a>00502 }
<a name="l00503"></a>00503 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00504"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a6bad168261765a85de5760096427f24a">00504</a> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* LANG_SPICE_BASE::parse_command(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* x)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506   assert(x);
<a name="l00507"></a>00507   x-&gt;<a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html#a283dfff6d57d2322fe52fd4ee8f216f3">set</a>(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>());
<a name="l00508"></a>00508   <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* scope = (x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>()) ? x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>()-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>() : &amp;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a0f2dd616de196fb4f933609cc41ce588">CARD_LIST::card_list</a>;
<a name="l00509"></a>00509 
<a name="l00510"></a>00510   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00511"></a>00511   <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a4b13f8a31574f43dcc30e893522051fd">skip_pre_stuff</a>(cmd);
<a name="l00512"></a>00512 
<a name="l00513"></a>00513   <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00514"></a>00514 
<a name="l00515"></a>00515   std::string s;
<a name="l00516"></a>00516   cmd &gt;&gt; s;
<a name="l00517"></a>00517   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00518"></a>00518   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>[s]) {
<a name="l00519"></a>00519     cmd.<a class="code" href="../../db/d85/class_c_s.html#a76fd53c1bfeb429bfae2e9b173e3d28a">skip</a>();
<a name="l00520"></a>00520     ++here;
<a name="l00521"></a>00521   }<span class="keywordflow">else</span>{
<a name="l00522"></a>00522   }
<a name="l00523"></a>00523   <a class="code" href="../../da/d8a/class_c_m_d.html#abcc8db5129f79cf492ae6507bd25b23c">CMD::cmdproc</a>(cmd, scope);
<a name="l00524"></a>00524 
<a name="l00525"></a>00525   <span class="keyword">delete</span> x;
<a name="l00526"></a>00526   <span class="keywordflow">return</span> NULL;
<a name="l00527"></a>00527 }
<a name="l00528"></a>00528 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00529"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a4704f42900f8b8c1fabc6ca92a727d4d">00529</a> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* LANG_SPICE_BASE::parse_paramset(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* x)
<a name="l00530"></a>00530 {
<a name="l00531"></a>00531   assert(x);
<a name="l00532"></a>00532   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00533"></a>00533   cmd &gt;&gt; <span class="stringliteral">&quot;.model &quot;</span>;
<a name="l00534"></a>00534   <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a68b54b0feb0a19b79c607a28e17ba50b">parse_label</a>(cmd, x);
<a name="l00535"></a>00535   <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(cmd, x);
<a name="l00536"></a>00536   <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ad268f835937439947ee67581159b5048">parse_args</a>(cmd, x);
<a name="l00537"></a>00537   cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8b7441f7e4149cecb782e949ee8598a">check</a>(bWARNING, <span class="stringliteral">&quot;what&#39;s this?&quot;</span>);
<a name="l00538"></a>00538   <span class="keywordflow">return</span> x;
<a name="l00539"></a>00539 }
<a name="l00540"></a>00540 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00541"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a845d6a4d390934d489a354c14ee27581">00541</a> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* LANG_SPICE_BASE::parse_module(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x)
<a name="l00542"></a>00542 {
<a name="l00543"></a>00543   assert(x);
<a name="l00544"></a>00544 
<a name="l00545"></a>00545   <span class="comment">// header</span>
<a name="l00546"></a>00546   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00547"></a>00547   (cmd &gt;&gt; <span class="stringliteral">&quot;.subckt |.macro &quot;</span>);
<a name="l00548"></a>00548   <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a68b54b0feb0a19b79c607a28e17ba50b">parse_label</a>(cmd, x);
<a name="l00549"></a>00549   {
<a name="l00550"></a>00550     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00551"></a>00551     <span class="keywordtype">int</span> num_nodes = <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(cmd, x-&gt;<a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html#a83dd559b2d84fc485a3218aa5a8e4a03">max_nodes</a>(), x-&gt;<a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html#a949b26eb2a17e28b42825133cd87d1dc">min_nodes</a>(), 
<a name="l00552"></a>00552                                 0<span class="comment">/*no unnamed par*/</span>, 0<span class="comment">/*start*/</span>);
<a name="l00553"></a>00553     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00554"></a>00554     <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(cmd, x, x-&gt;<a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html#a949b26eb2a17e28b42825133cd87d1dc">min_nodes</a>(), 0<span class="comment">/*start*/</span>, num_nodes, <span class="keyword">true</span><span class="comment">/*all new*/</span>);
<a name="l00555"></a>00555   }
<a name="l00556"></a>00556   x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#ac6d3c549b25271af54854849e199441a">params</a>()-&gt;<a class="code" href="../../d5/d21/class_p_a_r_a_m___l_i_s_t.html#a35a51bd363175f2cf51626b4e4332c3a">parse</a>(cmd);
<a name="l00557"></a>00557 
<a name="l00558"></a>00558   <span class="comment">// body</span>
<a name="l00559"></a>00559   parse_module_body(cmd, x, x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>(), name() + <span class="stringliteral">&quot;-subckt&gt;&quot;</span>, NO_EXIT_ON_BLANK, <span class="stringliteral">&quot;.ends |.eom &quot;</span>);
<a name="l00560"></a>00560   <span class="keywordflow">return</span> x;
<a name="l00561"></a>00561 }
<a name="l00562"></a>00562 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00563"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a2b4efb2309177c70d201a202509c8ac0">00563</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::parse_module_body(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope,
<a name="l00564"></a>00564                 <span class="keyword">const</span> std::string&amp; prompt, <a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789b">EOB</a> exit_on_blank, <span class="keyword">const</span> std::string&amp; exit_key)
<a name="l00565"></a>00565 {
<a name="l00566"></a>00566   <span class="keywordflow">try</span> {
<a name="l00567"></a>00567     <span class="keywordflow">for</span> (;;) {
<a name="l00568"></a>00568       cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(prompt);
<a name="l00569"></a>00569       
<a name="l00570"></a>00570       <span class="keywordflow">if</span> ((exit_on_blank==EXIT_ON_BLANK &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#aa327c2429bf05a2d3f14949075daab4b">is_end</a>()) 
<a name="l00571"></a>00571           || cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(exit_key)) {
<a name="l00572"></a>00572         <span class="keywordflow">break</span>;
<a name="l00573"></a>00573       }<span class="keywordflow">else</span>{
<a name="l00574"></a>00574         <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a4b13f8a31574f43dcc30e893522051fd">skip_pre_stuff</a>(cmd);
<a name="l00575"></a>00575         new__instance(cmd, x, Scope);
<a name="l00576"></a>00576       }
<a name="l00577"></a>00577     }
<a name="l00578"></a>00578   }<span class="keywordflow">catch</span> (Exception_End_Of_Input&amp; e) {
<a name="l00579"></a>00579   }
<a name="l00580"></a>00580 }
<a name="l00581"></a>00581 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00582"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a43ca3caed0b8d1abb0e0b6861a802731">00582</a> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* LANG_SPICE_BASE::parse_instance(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00583"></a>00583 {
<a name="l00584"></a>00584   <span class="keywordflow">try</span> {
<a name="l00585"></a>00585     assert(x);
<a name="l00586"></a>00586     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>().<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<a class="code" href="../../d8/dbf/md_8h.html#ad0d8beee88cc4b08d09a6232c3558831">ANTI_COMMENT</a>);
<a name="l00587"></a>00587     
<a name="l00588"></a>00588     <span class="comment">// ACS dot type specifier</span>
<a name="l00589"></a>00589     <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;.&#39;</span>)) {
<a name="l00590"></a>00590       <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(cmd, x);
<a name="l00591"></a>00591     }<span class="keywordflow">else</span>{
<a name="l00592"></a>00592     }
<a name="l00593"></a>00593     
<a name="l00594"></a>00594     <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a68b54b0feb0a19b79c607a28e17ba50b">parse_label</a>(cmd, x);
<a name="l00595"></a>00595     
<a name="l00596"></a>00596     <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2b1131dc75c5412e653db8e54437341d">use_obsolete_callback_parse</a>()) {
<a name="l00597"></a>00597       parse_element_using_obsolete_callback(cmd, x);
<a name="l00598"></a>00598     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d6c/class_d_e_v___l_o_g_i_c.html">DEV_LOGIC</a>* xx = dynamic_cast&lt;DEV_LOGIC*&gt;(x)) {
<a name="l00599"></a>00599       parse_logic_using_obsolete_callback(cmd, xx);
<a name="l00600"></a>00600     }<span class="keywordflow">else</span>{
<a name="l00601"></a>00601       {
<a name="l00602"></a>00602         <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00603"></a>00603         <span class="keywordtype">int</span> num_nodes = <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ae6c9a1b0b02626aa812602cef2d14964">count_ports</a>(cmd, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a7276b0d0191c93e57c277d3764a9c363">max_nodes</a>(), x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#abaaa010f2603b1c363eae14f0e683038">tail_size</a>(), 0);
<a name="l00604"></a>00604         cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00605"></a>00605         <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#a4d871f090c5c146f742cd14ff65bc959">parse_ports</a>(cmd, x, x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8a32f18ee80582385cf30d457853bc56">min_nodes</a>(), 0<span class="comment">/*start*/</span>, num_nodes, <span class="keyword">false</span>);
<a name="l00606"></a>00606       }
<a name="l00607"></a>00607       <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a4342777b0efae0a8c1b27801b14e8dea">print_type_in_spice</a>()) {
<a name="l00608"></a>00608         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(cmd, x);
<a name="l00609"></a>00609       }<span class="keywordflow">else</span>{
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611       <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ad268f835937439947ee67581159b5048">parse_args</a>(cmd, x);
<a name="l00612"></a>00612     }
<a name="l00613"></a>00613   }<span class="keywordflow">catch</span> (<a class="code" href="../../df/d70/class_exception.html">Exception</a>&amp; e) {
<a name="l00614"></a>00614     cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, e.message());
<a name="l00615"></a>00615   }
<a name="l00616"></a>00616   <span class="keywordflow">return</span> x;
<a name="l00617"></a>00617 }
<a name="l00618"></a>00618 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00619"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ac8edaf517d4bb80d2f38c3077cfaa959">00619</a> std::string LANG_SPICE_BASE::find_type_in_string(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd)
<a name="l00620"></a>00620 {
<a name="l00621"></a>00621   cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<a class="code" href="../../d8/dbf/md_8h.html#ad0d8beee88cc4b08d09a6232c3558831">ANTI_COMMENT</a>); <span class="comment">/* skip mark so spice ignores but gnucap reads */</span>
<a name="l00622"></a>00622 
<a name="l00623"></a>00623   <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00624"></a>00624   std::string s;
<a name="l00625"></a>00625   <span class="keywordtype">char</span> id_letter = cmd.<a class="code" href="../../db/d85/class_c_s.html#a5a3605a7687a51cfa2843a4667d86452">peek</a>();
<a name="l00626"></a>00626   <span class="keywordflow">if</span> (<a class="code" href="../../de/d5e/class_o_p_t.html#a2e24c644ec91e4563867a3f73e420e0b">OPT::case_insensitive</a>) {
<a name="l00627"></a>00627     id_letter = <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>(toupper(id_letter));
<a name="l00628"></a>00628   }<span class="keywordflow">else</span>{
<a name="l00629"></a>00629   }
<a name="l00630"></a>00630   <span class="keywordflow">switch</span> (id_letter) {
<a name="l00631"></a>00631   <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00632"></a>00632     s = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00633"></a>00633     <span class="keywordflow">break</span>;
<a name="l00634"></a>00634   <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:
<a name="l00635"></a>00635     cmd &gt;&gt; s;
<a name="l00636"></a>00636     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00637"></a>00637     <span class="keywordflow">if</span> (!<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>[s]) {
<a name="l00638"></a>00638       cmd.<a class="code" href="../../db/d85/class_c_s.html#a76fd53c1bfeb429bfae2e9b173e3d28a">skip</a>();
<a name="l00639"></a>00639       ++here;
<a name="l00640"></a>00640       s = s.<a class="code" href="../../db/d85/class_c_s.html#ab940d6a9a1d217a0ec4a290686582cb1">substr</a>(1);
<a name="l00641"></a>00641     }<span class="keywordflow">else</span>{
<a name="l00642"></a>00642     }
<a name="l00643"></a>00643     <span class="keywordflow">break</span>;
<a name="l00644"></a>00644   <span class="keywordflow">case</span> <span class="charliteral">&#39;G&#39;</span>:
<a name="l00645"></a>00645     here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00646"></a>00646 
<a name="l00647"></a>00647     <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#ac9008806d5826dc23967416838d8dc2b">scan</a>(<span class="stringliteral">&quot;vccap |vcg |vcr |vccs &quot;</span>)) {
<a name="l00648"></a>00648       s = cmd.<a class="code" href="../../db/d85/class_c_s.html#a74fca10e04b27e18dd62cb97b5c4f58e">trimmed_last_match</a>();
<a name="l00649"></a>00649     }<span class="keywordflow">else</span>{
<a name="l00650"></a>00650       s = <span class="stringliteral">&quot;G&quot;</span>;
<a name="l00651"></a>00651     }
<a name="l00652"></a>00652     <span class="keywordflow">break</span>;
<a name="l00653"></a>00653   <span class="keywordflow">default</span>:
<a name="l00654"></a>00654     s = id_letter;
<a name="l00655"></a>00655     <span class="keywordflow">break</span>;
<a name="l00656"></a>00656   }
<a name="l00657"></a>00657   cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00658"></a>00658   <span class="keywordflow">return</span> s;
<a name="l00659"></a>00659 }
<a name="l00660"></a>00660 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00661"></a><a class="code" href="../../d7/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e.html#acc66ed97411d21aae4382f6bb3d88f84">00661</a> <span class="keywordtype">void</span> LANG_SPICE::parse_top_item(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00662"></a>00662 {
<a name="l00663"></a>00663   <span class="keywordflow">if</span> (0 &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#a9841c2c60eb5cab74d4a3146c0b06246">is_file</a>()
<a name="l00664"></a>00664       &amp;&amp; cmd.<a class="code" href="../../db/d85/class_c_s.html#aae17adb03661848bf70b423849d7e98b">is_first_read</a>()
<a name="l00665"></a>00665       &amp;&amp; (Scope == &amp;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a0f2dd616de196fb4f933609cc41ce588">CARD_LIST::card_list</a>)
<a name="l00666"></a>00666       &amp;&amp; (Scope-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a01ed91f5d95ef493261cea826b4208ab">is_empty</a>())
<a name="l00667"></a>00667       &amp;&amp; (<a class="code" href="../../df/d33/c__comand_8cc.html#a00157e8e0b473582b00dea3e180fbf1b">head</a> == <span class="stringliteral">&quot;&#39;&quot;</span>)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();    <span class="comment">//BUG// ugly hack</span>
<a name="l00668"></a>00668     cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;gnucap-spice-title&gt;&quot;</span>);
<a name="l00669"></a>00669     <a class="code" href="../../df/d33/c__comand_8cc.html#a00157e8e0b473582b00dea3e180fbf1b">head</a> = cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>();
<a name="l00670"></a>00670     <a class="code" href="../../d8/d24/class_i_o.html#a15b2582f76a5424e01322d52de588f25">IO::mstdout</a> &lt;&lt; <a class="code" href="../../df/d33/c__comand_8cc.html#a00157e8e0b473582b00dea3e180fbf1b">head</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00671"></a>00671   }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00672"></a>00672     cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;gnucap-spice&gt;&quot;</span>);
<a name="l00673"></a>00673     new__instance(cmd, NULL, Scope);
<a name="l00674"></a>00674   }
<a name="l00675"></a>00675 }
<a name="l00676"></a>00676 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00677"></a>00677 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00678"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aaa2dbbb044ebfab95c9764bc529d17c3">00678</a> <span class="keyword">static</span> <span class="keywordtype">char</span> <a class="code" href="../../d7/d7b/e__base_8cc.html#af425856b1ce76a808a6e65a07c52ad01">fix_case</a>(<span class="keywordtype">char</span> c)
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680   <span class="keywordflow">return</span> ((<a class="code" href="../../de/d5e/class_o_p_t.html#a2e24c644ec91e4563867a3f73e420e0b">OPT::case_insensitive</a>) ? (static_cast&lt;char&gt;(tolower(c))) : (c));
<a name="l00681"></a>00681 }
<a name="l00682"></a>00682 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00683"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a3317b061010107c04308785193b36d95">00683</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_paramset(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* x)
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685   assert(x);
<a name="l00686"></a>00686   o &lt;&lt; <span class="stringliteral">&quot;.model &quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>() &lt;&lt; <span class="charliteral">&#39; &#39;</span> &lt;&lt; x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>() &lt;&lt; <span class="stringliteral">&quot; (&quot;</span>;
<a name="l00687"></a>00687   print_args(o, x);
<a name="l00688"></a>00688   o &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00691"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a30ce9bf1b6a46e66d9f5ff07fe3f2fcb">00691</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_module(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x)
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693   assert(x);
<a name="l00694"></a>00694   assert(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>());
<a name="l00695"></a>00695 
<a name="l00696"></a>00696   o &lt;&lt; <span class="stringliteral">&quot;.subckt &quot;</span> &lt;&lt;  x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>();
<a name="l00697"></a>00697   <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ab9f3519168a859ef1020a1dfc9242d49">print_ports</a>(o, x);
<a name="l00698"></a>00698   o &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00699"></a>00699   
<a name="l00700"></a>00700   <span class="keywordflow">for</span> (<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a09cb5fe86d7450c3afe61d31558516eb">CARD_LIST::const_iterator</a> 
<a name="l00701"></a>00701          ci = x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a215ac8c5830719ceff1ad3b25ad2864a">begin</a>(); ci != x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a62d2e7c41c19b588ed74b4247600c875">end</a>(); ++ci) {
<a name="l00702"></a>00702     print_item(o, *ci);
<a name="l00703"></a>00703   }
<a name="l00704"></a>00704   
<a name="l00705"></a>00705   o &lt;&lt; <span class="stringliteral">&quot;.ends &quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00706"></a>00706 }
<a name="l00707"></a>00707 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00708"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ace0e14a6a7f60034315c6a9736c951b4">00708</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_instance(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00709"></a>00709 {
<a name="l00710"></a>00710   <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a4155adf053c7955b99557bb0ed337482">print_label</a>(o, x);
<a name="l00711"></a>00711   <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ab9f3519168a859ef1020a1dfc9242d49">print_ports</a>(o, x);
<a name="l00712"></a>00712   <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a9887be62fced11d1a88b0a6f62fc5e6d">print_type</a>(o, x);
<a name="l00713"></a>00713   print_args(o, x);
<a name="l00714"></a>00714   o &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00715"></a>00715 }
<a name="l00716"></a>00716 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00717"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a6b18882469457f0bb101f22183a00fdc">00717</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_comment(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* x)
<a name="l00718"></a>00718 {
<a name="l00719"></a>00719   assert(x);
<a name="l00720"></a>00720   <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html#af540770552c49fa3f2afa30956bc7c5d">comment</a>()[1] != <span class="charliteral">&#39;+&#39;</span>) {
<a name="l00721"></a>00721     o &lt;&lt; x-&gt;<a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html#af540770552c49fa3f2afa30956bc7c5d">comment</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00722"></a>00722   }<span class="keywordflow">else</span>{
<a name="l00723"></a>00723   }
<a name="l00724"></a>00724   <span class="comment">// Suppress printing of comment lines starting with &quot;*+&quot;.</span>
<a name="l00725"></a>00725   <span class="comment">// These are generated as a way to display calculated values.</span>
<a name="l00726"></a>00726 }
<a name="l00727"></a>00727 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00728"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a8aa8b83a2dbe7e7aea2c8f96e520788f">00728</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_command(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* x)
<a name="l00729"></a>00729 {
<a name="l00730"></a>00730   assert(x);
<a name="l00731"></a>00731   o &lt;&lt; x-&gt;<a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html#a48ab313a394658e33f463865dac0fdc6">s</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00732"></a>00732 }
<a name="l00733"></a>00733 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00734"></a>00734 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00735"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a930789c7c7bbc5f39f559a774caece36">00735</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_args(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* x)
<a name="l00736"></a>00736 {
<a name="l00737"></a>00737   assert(x);
<a name="l00738"></a>00738   <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa9f44021a50e51ad6e040a57143b5f68">use_obsolete_callback_print</a>()) {
<a name="l00739"></a>00739     x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a905eb46de44ba560ac2665026a06dd10">print_args_obsolete_callback</a>(o, <span class="keyword">this</span>);  <span class="comment">//BUG//callback//</span>
<a name="l00740"></a>00740   }<span class="keywordflow">else</span>{
<a name="l00741"></a>00741     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = x-&gt;<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#a087dad3e25416510571e4f98bbc1c1bc">param_count</a>() - 1;  ii &gt;= x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a0f91672c92c826e25a5ca0159c8e3d06">param_count_dont_print</a>();  --ii) {
<a name="l00742"></a>00742       <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#a5fd9ed17f958ae3e708f9634d8c2e8f6">param_is_printable</a>(ii)) {
<a name="l00743"></a>00743         std::string arg = <span class="stringliteral">&quot; &quot;</span> + x-&gt;<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#a5612573f122027e09ed72b46a8e28564">param_name</a>(ii) + <span class="stringliteral">&quot;=&quot;</span> + x-&gt;<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#ad36531d8b0807c4cf0e6f9475afa2747">param_value</a>(ii);
<a name="l00744"></a>00744         o &lt;&lt; arg;
<a name="l00745"></a>00745       }<span class="keywordflow">else</span>{
<a name="l00746"></a>00746       }
<a name="l00747"></a>00747     }
<a name="l00748"></a>00748   }
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00751"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a103b6add63c060255ccfb39f5db1c792">00751</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a9887be62fced11d1a88b0a6f62fc5e6d">LANG_SPICE_BASE::print_type</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00752"></a>00752 {
<a name="l00753"></a>00753   assert(x);
<a name="l00754"></a>00754   <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a4342777b0efae0a8c1b27801b14e8dea">print_type_in_spice</a>()) {
<a name="l00755"></a>00755     o &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>();
<a name="l00756"></a>00756   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d7b/e__base_8cc.html#af425856b1ce76a808a6e65a07c52ad01">fix_case</a>(x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>()[0]) != <a class="code" href="../../d7/d7b/e__base_8cc.html#af425856b1ce76a808a6e65a07c52ad01">fix_case</a>(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a198adace899a3c3e29bf256bc238ab72">id_letter</a>())) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00757"></a>00757     o &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>();
<a name="l00758"></a>00758   }<span class="keywordflow">else</span>{
<a name="l00759"></a>00759     <span class="comment">// don&#39;t print type</span>
<a name="l00760"></a>00760   }
<a name="l00761"></a>00761 }
<a name="l00762"></a>00762 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00763"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#ad2afb7136f4b9069773ea9fd199a31fb">00763</a> <span class="keywordtype">void</span> LANG_SPICE_BASE::print_args(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00764"></a>00764 {
<a name="l00765"></a>00765   assert(x);
<a name="l00766"></a>00766   o &lt;&lt; <span class="charliteral">&#39; &#39;</span>;
<a name="l00767"></a>00767   <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#af062a92eb2973f2df732f49a287f5ecc">use_obsolete_callback_print</a>()) {
<a name="l00768"></a>00768     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ad25f91066942a482fd8d2aeca4454eda">print_args_obsolete_callback</a>(o, <span class="keyword">this</span>);  <span class="comment">//BUG//callback//</span>
<a name="l00769"></a>00769   }<span class="keywordflow">else</span>{
<a name="l00770"></a>00770     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a48cb97ddcd015de7eacc9c68e8ad4ec1">param_count</a>() - 1;  ii &gt;= x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a0f91672c92c826e25a5ca0159c8e3d06">param_count_dont_print</a>();  --ii) {
<a name="l00771"></a>00771       <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ae5a9662b84af4f6f90eacb179f7e892a">param_is_printable</a>(ii)) {
<a name="l00772"></a>00772         <span class="keywordflow">if</span> ((ii != x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a48cb97ddcd015de7eacc9c68e8ad4ec1">param_count</a>() - 1) || (x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ae52bdb0b0acaf64682b7c9dd1656aada">param_name</a>(ii) != x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a895b328abb9341c5b45143d586e254c0">value_name</a>())) {
<a name="l00773"></a>00773           <span class="comment">// skip name if plain value</span>
<a name="l00774"></a>00774           o &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ae52bdb0b0acaf64682b7c9dd1656aada">param_name</a>(ii) &lt;&lt; <span class="stringliteral">&quot;=&quot;</span>;
<a name="l00775"></a>00775         }<span class="keywordflow">else</span>{
<a name="l00776"></a>00776         }
<a name="l00777"></a>00777         o &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(ii);
<a name="l00778"></a>00778       }<span class="keywordflow">else</span>{
<a name="l00779"></a>00779       }
<a name="l00780"></a>00780     }
<a name="l00781"></a>00781   }
<a name="l00782"></a>00782 }
<a name="l00783"></a>00783 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00784"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a0c54446069608e7de16244d8d889188a">00784</a> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a4155adf053c7955b99557bb0ed337482">LANG_SPICE_BASE::print_label</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00785"></a>00785 {
<a name="l00786"></a>00786   assert(x);
<a name="l00787"></a>00787   std::string label = x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>();
<a name="l00788"></a>00788   o &lt;&lt; label;
<a name="l00789"></a>00789 }
<a name="l00790"></a>00790 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00791"></a><a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a3e6513b13fe7149fc509460d69fd6de8">00791</a> <span class="keywordtype">void</span> <a class="code" href="../../dc/ded/namespaceanonymous__namespace_02lang__spectre_8cc_03.html#ab9f3519168a859ef1020a1dfc9242d49">LANG_SPICE_BASE::print_ports</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00792"></a>00792 {
<a name="l00793"></a>00793   assert(x);
<a name="l00794"></a>00794 
<a name="l00795"></a>00795   o &lt;&lt;  <span class="stringliteral">&quot; ( &quot;</span>;
<a name="l00796"></a>00796   std::string sep = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00797"></a>00797   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = 0;  x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#acc27655a4c1ccb5b3f87a921652ad02c">port_exists</a>(ii);  ++ii) {
<a name="l00798"></a>00798     o &lt;&lt; sep &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a99ac0da644b8d8b33e31233fb82f12d3">port_value</a>(ii);
<a name="l00799"></a>00799     sep = <span class="stringliteral">&quot; &quot;</span>;
<a name="l00800"></a>00800   }
<a name="l00801"></a>00801   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ii = 0;  x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a11c9c5456d0e8f4dab0554148f0c0433">current_port_exists</a>(ii);  ++ii) {
<a name="l00802"></a>00802     o &lt;&lt; sep &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#acf3c104d04168bf4b6bb4c2bb5425966">current_port_value</a>(ii);
<a name="l00803"></a>00803     sep = <span class="stringliteral">&quot; &quot;</span>;
<a name="l00804"></a>00804   }
<a name="l00805"></a>00805   o &lt;&lt; <span class="stringliteral">&quot; )&quot;</span>;
<a name="l00806"></a>00806 }
<a name="l00807"></a>00807 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00808"></a>00808 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00809"></a><a class="code" href="../../df/d6c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_o_d_e_l.html">00809</a> <span class="keyword">class </span><a class="code" href="../../df/d6c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_o_d_e_l.html">CMD_MODEL</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00810"></a><a class="code" href="../../df/d6c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_o_d_e_l.html#ab9b2fde08a99b9d08d82897c3533356f">00810</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00811"></a>00811   {
<a name="l00812"></a>00812     <span class="comment">// already got &quot;model&quot;</span>
<a name="l00813"></a>00813     std::string my_name, base_name;
<a name="l00814"></a>00814     cmd &gt;&gt; my_name;
<a name="l00815"></a>00815     <span class="keywordtype">unsigned</span> here1 = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();    
<a name="l00816"></a>00816     cmd &gt;&gt; base_name;
<a name="l00817"></a>00817     
<a name="l00818"></a>00818     <span class="comment">// &quot;level&quot; kluge ....</span>
<a name="l00819"></a>00819     <span class="comment">// if there is a &quot;level&quot; keyword, with integer argument,</span>
<a name="l00820"></a>00820     <span class="comment">// tack that onto the given modelname and look for that</span>
<a name="l00821"></a>00821     cmd.<a class="code" href="../../db/d85/class_c_s.html#a46e33df8ea997201ca1afeb1c4c94f38">skip1b</a>(<span class="charliteral">&#39;(&#39;</span>);
<a name="l00822"></a>00822     <span class="keywordtype">int</span> level = 0;
<a name="l00823"></a>00823     {
<a name="l00824"></a>00824       <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00825"></a>00825       <a class="code" href="../../db/dfc/ap_8h.html#ac829e77d96ecf62e7edec9bbde335cf5">scan_get</a>(cmd, <span class="stringliteral">&quot;level &quot;</span>, &amp;level);
<a name="l00826"></a>00826       <span class="keywordflow">if</span> (!cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here)) {
<a name="l00827"></a>00827         <span class="keywordtype">char</span> buf[20];
<a name="l00828"></a>00828         sprintf(buf, <span class="stringliteral">&quot;%u&quot;</span>, level);
<a name="l00829"></a>00829         base_name += buf;
<a name="l00830"></a>00830       }<span class="keywordflow">else</span>{
<a name="l00831"></a>00831       }
<a name="l00832"></a>00832     }
<a name="l00833"></a>00833 
<a name="l00834"></a>00834     <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a> = <a class="code" href="../../d5/d51/bmm__semi_8cc.html#a1533cbb8aab0bd6110792fb9a9df2002">model_dispatcher</a>[base_name];
<a name="l00835"></a>00835 
<a name="l00836"></a>00836     <span class="keywordflow">if</span> (p) {
<a name="l00837"></a>00837       <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* new_card = <span class="keyword">dynamic_cast&lt;</span><a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*<span class="keyword">&gt;</span>(p-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a47ef84dc52feac5155671a1d01c00d75">clone</a>());
<a name="l00838"></a>00838       <span class="keywordflow">if</span> (<a class="code" href="../../dd/d4d/e__base_8h.html#af30a79c822013b664acec608acd687fe">exists</a>(new_card)) {
<a name="l00839"></a>00839         assert(!new_card-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>());
<a name="l00840"></a>00840         <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a4704f42900f8b8c1fabc6ca92a727d4d">parse_paramset</a>(cmd, new_card);
<a name="l00841"></a>00841         Scope-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#add6a3ae42cffeb4bca306777cecc0046">push_back</a>(new_card);
<a name="l00842"></a>00842       }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00843"></a>00843         cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, here1, <span class="stringliteral">&quot;model: base has incorrect type&quot;</span>);
<a name="l00844"></a>00844       }
<a name="l00845"></a>00845     }<span class="keywordflow">else</span>{
<a name="l00846"></a>00846       cmd.<a class="code" href="../../db/d85/class_c_s.html#a8dd1d3baec68dca2a72be0d313268828">warn</a>(bDANGER, here1, <span class="stringliteral">&quot;model: \&quot;&quot;</span> + base_name + <span class="stringliteral">&quot;\&quot; no match&quot;</span>);
<a name="l00847"></a>00847     }
<a name="l00848"></a>00848   }
<a name="l00849"></a>00849 } <a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#aaa89229fd0e89b631fbd5b3f4d8118e6">p1</a>;
<a name="l00850"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a21f9d9399e0f10707bd25522dce7281b">00850</a> <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d1(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.model&quot;</span>, &amp;<a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#aaa89229fd0e89b631fbd5b3f4d8118e6">p1</a>);
<a name="l00851"></a>00851 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00852"></a><a class="code" href="../../de/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_u_b_c_k_t.html">00852</a> <span class="keyword">class </span><a class="code" href="../../de/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_u_b_c_k_t.html">CMD_SUBCKT</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00853"></a><a class="code" href="../../de/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_u_b_c_k_t.html#a448840b0bb08cea6eb806ba995ff8247">00853</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00854"></a>00854   {
<a name="l00855"></a>00855     <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* new_module = <span class="keyword">new</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>;
<a name="l00856"></a>00856     assert(new_module);
<a name="l00857"></a>00857     assert(!new_module-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>());
<a name="l00858"></a>00858     assert(new_module-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>());
<a name="l00859"></a>00859     assert(new_module-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a01ed91f5d95ef493261cea826b4208ab">is_empty</a>());
<a name="l00860"></a>00860     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a845d6a4d390934d489a354c14ee27581">parse_module</a>(cmd, new_module);
<a name="l00861"></a>00861     Scope-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#add6a3ae42cffeb4bca306777cecc0046">push_back</a>(new_module);
<a name="l00862"></a>00862   }
<a name="l00863"></a>00863 } <a class="code" href="../../d5/d51/bmm__semi_8cc.html#ac33228ac9a9afdf3d0e113821e4f96b4">p2</a>;
<a name="l00864"></a>00864 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d2(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.subckt|.macro&quot;</span>, &amp;<a class="code" href="../../d5/d51/bmm__semi_8cc.html#ac33228ac9a9afdf3d0e113821e4f96b4">p2</a>);
<a name="l00865"></a>00865 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00866"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759aec184ac0da72f7df468f4e07c91acf4a">00866</a> <span class="keyword">enum</span> <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759">Skip_Header</a> {<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759a884700670bdbd6aeb63edc9e325ef41f">NO_HEADER</a>, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759aec184ac0da72f7df468f4e07c91acf4a">SKIP_HEADER</a>};
<a name="l00867"></a>00867 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00868"></a>00868 <span class="comment">/* getmerge: actually do the work for &quot;get&quot;, &quot;merge&quot;, etc.</span>
<a name="l00869"></a>00869 <span class="comment"> */</span>
<a name="l00870"></a><a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">00870</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759">Skip_Header</a> skip_header, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00871"></a>00871 {
<a name="l00872"></a>00872   <a class="code" href="../../d5/d68/globals_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">::status</a>.<a class="code" href="../../d3/d83/class_s_t_a_t_u_s.html#acd7f67da621010f60cdb98904c9966e4">get</a>.<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#ac9ca111bee4786e087bb01ae6a631b1a">reset</a>().<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#acdab67f7e7b152988362fef14ef436ba">start</a>();
<a name="l00873"></a>00873   assert(Scope);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875   std::string file_name, section_name;
<a name="l00876"></a>00876   cmd &gt;&gt; file_name;
<a name="l00877"></a>00877   
<a name="l00878"></a>00878   <span class="keywordtype">bool</span>  echoon = <span class="keyword">false</span>;         <span class="comment">/* echo on/off flag (echo as read from file) */</span>
<a name="l00879"></a>00879   <span class="keywordtype">bool</span>  liston = <span class="keyword">false</span>;         <span class="comment">/* list on/off flag (list actual values) */</span>
<a name="l00880"></a>00880   <span class="keywordtype">bool</span>  quiet = <span class="keyword">false</span>;          <span class="comment">/* don&#39;t echo title */</span>
<a name="l00881"></a>00881   <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00882"></a>00882   <span class="keywordflow">do</span>{
<a name="l00883"></a>00883     <a class="code" href="../../db/dfc/ap_8h.html#a9bb6e111888a72d32a092de5dd0a1728">ONE_OF</a>
<a name="l00884"></a>00884       || <a class="code" href="../../db/dfc/ap_8h.html#a3b8a9b7edd07ff07379ac7960d13afa4">Get</a>(cmd, <span class="stringliteral">&quot;echo&quot;</span>,  &amp;echoon)
<a name="l00885"></a>00885       || <a class="code" href="../../db/dfc/ap_8h.html#a3b8a9b7edd07ff07379ac7960d13afa4">Get</a>(cmd, <span class="stringliteral">&quot;list&quot;</span>,  &amp;liston)
<a name="l00886"></a>00886       || <a class="code" href="../../db/dfc/ap_8h.html#a3b8a9b7edd07ff07379ac7960d13afa4">Get</a>(cmd, <span class="stringliteral">&quot;quiet&quot;</span>, &amp;quiet)
<a name="l00887"></a>00887       || <a class="code" href="../../db/dfc/ap_8h.html#a3b8a9b7edd07ff07379ac7960d13afa4">Get</a>(cmd, <span class="stringliteral">&quot;section&quot;</span>, &amp;section_name)
<a name="l00888"></a>00888       ;
<a name="l00889"></a>00889   }<span class="keywordflow">while</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a4f9ebb52c1663598fa162b76b6963fd4">more</a>() &amp;&amp; !cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8d7dace6e3a67618018473815e7ece5">stuck</a>(&amp;here));
<a name="l00890"></a>00890   <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a4f9ebb52c1663598fa162b76b6963fd4">more</a>()) {
<a name="l00891"></a>00891     cmd &gt;&gt; section_name;
<a name="l00892"></a>00892   }<span class="keywordflow">else</span>{
<a name="l00893"></a>00893   }
<a name="l00894"></a>00894   cmd.<a class="code" href="../../db/d85/class_c_s.html#ac8b7441f7e4149cecb782e949ee8598a">check</a>(bWARNING, <span class="stringliteral">&quot;need section, echo, list, or quiet&quot;</span>);
<a name="l00895"></a>00895 
<a name="l00896"></a>00896   <a class="code" href="../../db/d85/class_c_s.html">CS</a> file(<a class="code" href="../../db/d85/class_c_s.html#a6e80b47b08f8b0f2555a687bf6e564b3a2d72af180ec385d57adaadaf0868b7f7">CS::_INC_FILE</a>, file_name);
<a name="l00897"></a>00897 
<a name="l00898"></a>00898   <span class="keywordflow">if</span> (skip_header) { <span class="comment">// get and store the header line</span>
<a name="l00899"></a>00899     file.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;&gt;&gt;&gt;&gt;&quot;</span>);
<a name="l00900"></a>00900     <a class="code" href="../../df/d33/c__comand_8cc.html#a00157e8e0b473582b00dea3e180fbf1b">head</a> = file.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>();
<a name="l00901"></a>00901 
<a name="l00902"></a>00902     <span class="keywordflow">if</span> (!quiet) {
<a name="l00903"></a>00903       <a class="code" href="../../d8/d24/class_i_o.html#a15b2582f76a5424e01322d52de588f25">IO::mstdout</a> &lt;&lt; <a class="code" href="../../df/d33/c__comand_8cc.html#a00157e8e0b473582b00dea3e180fbf1b">head</a> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00904"></a>00904     }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00905"></a>00905     }
<a name="l00906"></a>00906   }<span class="keywordflow">else</span>{
<a name="l00907"></a>00907   }
<a name="l00908"></a>00908   <span class="keywordflow">if</span> (section_name == <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00909"></a>00909     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a2b4efb2309177c70d201a202509c8ac0">parse_module_body</a>(file, NULL, Scope, <span class="stringliteral">&quot;&gt;&gt;&gt;&gt;&quot;</span>, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789ba926c51551878446f2c5c0dc3f6e85bff">NO_EXIT_ON_BLANK</a>, <span class="stringliteral">&quot;.end &quot;</span>);
<a name="l00910"></a>00910   }<span class="keywordflow">else</span>{
<a name="l00911"></a>00911     <span class="keywordflow">try</span> {
<a name="l00912"></a>00912       <span class="keywordflow">for</span> (;;) {
<a name="l00913"></a>00913         file.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;lib &quot;</span> + section_name + <span class="charliteral">&#39;&gt;&#39;</span>);
<a name="l00914"></a>00914         <span class="keywordflow">if</span> (file.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;.lib &quot;</span> + section_name + <span class="charliteral">&#39; &#39;</span>)) {
<a name="l00915"></a>00915           <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a2b4efb2309177c70d201a202509c8ac0">parse_module_body</a>(file, NULL, Scope, section_name,
<a name="l00916"></a>00916                         <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789ba926c51551878446f2c5c0dc3f6e85bff">NO_EXIT_ON_BLANK</a>, <span class="stringliteral">&quot;.endl {&quot;</span> + section_name + <span class="stringliteral">&quot;}&quot;</span>);
<a name="l00917"></a>00917         }<span class="keywordflow">else</span>{
<a name="l00918"></a>00918           <span class="comment">// skip it</span>
<a name="l00919"></a>00919         }
<a name="l00920"></a>00920       }
<a name="l00921"></a>00921     }<span class="keywordflow">catch</span> (Exception_End_Of_Input&amp; e) {
<a name="l00922"></a>00922     }
<a name="l00923"></a>00923   }
<a name="l00924"></a>00924   <a class="code" href="../../d5/d68/globals_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">::status</a>.<a class="code" href="../../d3/d83/class_s_t_a_t_u_s.html#acd7f67da621010f60cdb98904c9966e4">get</a>.<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#a891b483fe0a827b1dc017316955c589e">stop</a>();
<a name="l00925"></a>00925 }
<a name="l00926"></a>00926 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00927"></a>00927 <span class="comment">/* cmd_lib: lib command</span>
<a name="l00928"></a>00928 <span class="comment"> */</span>
<a name="l00929"></a><a class="code" href="../../d6/dec/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___l_i_b.html">00929</a> <span class="keyword">class </span><a class="code" href="../../d6/dec/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___l_i_b.html">CMD_LIB</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00930"></a>00930 <span class="keyword">public</span>:
<a name="l00931"></a><a class="code" href="../../d6/dec/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___l_i_b.html#a887218f22be294b08947de2bee67f8b4">00931</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00932"></a>00932   {
<a name="l00933"></a>00933     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00934"></a>00934     std::string section_name, more_stuff;
<a name="l00935"></a>00935     cmd &gt;&gt; section_name &gt;&gt; more_stuff;
<a name="l00936"></a>00936     <span class="keywordflow">if</span> (more_stuff != <span class="stringliteral">&quot;&quot;</span>) {
<a name="l00937"></a>00937       cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);
<a name="l00938"></a>00938       <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759a884700670bdbd6aeb63edc9e325ef41f">NO_HEADER</a>, Scope);
<a name="l00939"></a>00939     }<span class="keywordflow">else</span>{
<a name="l00940"></a>00940       <span class="keywordflow">for</span> (;;) {
<a name="l00941"></a>00941         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(section_name + <span class="charliteral">&#39;&gt;&#39;</span>);
<a name="l00942"></a>00942         <span class="keywordflow">if</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a9a501a8fa298d71f818f01b22e1e1157">umatch</a>(<span class="stringliteral">&quot;.endl {&quot;</span> + section_name + <span class="stringliteral">&quot;}&quot;</span>)) {
<a name="l00943"></a>00943           <span class="keywordflow">break</span>;
<a name="l00944"></a>00944         }<span class="keywordflow">else</span>{
<a name="l00945"></a>00945           <span class="comment">// skip it</span>
<a name="l00946"></a>00946         }
<a name="l00947"></a>00947       }
<a name="l00948"></a>00948     }
<a name="l00949"></a>00949   }
<a name="l00950"></a>00950 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a81aa0b963ab6d43d68ff887005b1ad43">p33</a>;
<a name="l00951"></a>00951 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d33(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.lib|lib&quot;</span>, &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a81aa0b963ab6d43d68ff887005b1ad43">p33</a>);
<a name="l00952"></a>00952 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00953"></a>00953 <span class="comment">/* cmd_include: include command</span>
<a name="l00954"></a>00954 <span class="comment"> * as get or run, but do not clear first, inherit the run-mode.</span>
<a name="l00955"></a>00955 <span class="comment"> */</span>
<a name="l00956"></a><a class="code" href="../../d2/d5a/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___i_n_c_l_u_d_e.html">00956</a> <span class="keyword">class </span><a class="code" href="../../d2/d5a/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___i_n_c_l_u_d_e.html">CMD_INCLUDE</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00957"></a>00957 <span class="keyword">public</span>:
<a name="l00958"></a><a class="code" href="../../d2/d5a/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___i_n_c_l_u_d_e.html#ace30a5eeaa1fd9e999819bd962ce273e">00958</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00959"></a>00959   {
<a name="l00960"></a>00960     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759a884700670bdbd6aeb63edc9e325ef41f">NO_HEADER</a>, Scope);
<a name="l00961"></a>00961   }
<a name="l00962"></a>00962 } <a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#aa559e490a8bf947a666daee0a5918e36">p3</a>;
<a name="l00963"></a>00963 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d3(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.include&quot;</span>, &amp;<a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#aa559e490a8bf947a666daee0a5918e36">p3</a>);
<a name="l00964"></a>00964 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00965"></a>00965 <span class="comment">/* cmd_merge: merge command</span>
<a name="l00966"></a>00966 <span class="comment"> * as get, but do not clear first</span>
<a name="l00967"></a>00967 <span class="comment"> */</span>
<a name="l00968"></a><a class="code" href="../../d3/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_e_r_g_e.html">00968</a> <span class="keyword">class </span><a class="code" href="../../d3/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_e_r_g_e.html">CMD_MERGE</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00969"></a>00969 <span class="keyword">public</span>:
<a name="l00970"></a><a class="code" href="../../d3/dd3/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___m_e_r_g_e.html#ad13770c872b582840a35bb4f0d42a195">00970</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00971"></a>00971   {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00972"></a>00972     <a class="code" href="../../de/de7/class_s_e_t___r_u_n___m_o_d_e.html">SET_RUN_MODE</a> xx(<a class="code" href="../../d8/dbf/md_8h.html#a8c551c1eb58ae69a51730eb254b93c91a966ea075ba13012f52e850d632eed0d6">rPRESET</a>);
<a name="l00973"></a>00973     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759a884700670bdbd6aeb63edc9e325ef41f">NO_HEADER</a>, Scope);
<a name="l00974"></a>00974   }
<a name="l00975"></a>00975 } <a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#acc6845d0a15690ce6430cf6291129621">p4</a>;
<a name="l00976"></a>00976 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d4(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.merge|merge&quot;</span>, &amp;<a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#acc6845d0a15690ce6430cf6291129621">p4</a>);
<a name="l00977"></a>00977 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00978"></a>00978 <span class="comment">/* cmd_run: &quot;&lt;&quot; and &quot;&lt;&lt;&quot; commands</span>
<a name="l00979"></a>00979 <span class="comment"> * run in batch mode.  Spice format.</span>
<a name="l00980"></a>00980 <span class="comment"> * &quot;&lt;&lt;&quot; clears old circuit first, &quot;&lt;&quot; does not</span>
<a name="l00981"></a>00981 <span class="comment"> * get circuit from file, execute dot cards in sequence</span>
<a name="l00982"></a>00982 <span class="comment"> */</span>
<a name="l00983"></a><a class="code" href="../../da/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___r_u_n.html">00983</a> <span class="keyword">class </span><a class="code" href="../../da/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___r_u_n.html">CMD_RUN</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00984"></a>00984 <span class="keyword">public</span>:
<a name="l00985"></a><a class="code" href="../../da/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___r_u_n.html#a8c20e76be25029f105362be0f5d47adf">00985</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00986"></a>00986   {
<a name="l00987"></a>00987     <span class="keywordflow">while</span> (cmd.<a class="code" href="../../db/d85/class_c_s.html#a0d5870f7e4ec3f213ad71d2c34e238ce">match1</a>(<span class="charliteral">&#39;&lt;&#39;</span>)) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
<a name="l00988"></a>00988       command(<span class="stringliteral">&quot;clear&quot;</span>, Scope);
<a name="l00989"></a>00989       cmd.<a class="code" href="../../db/d85/class_c_s.html#a76fd53c1bfeb429bfae2e9b173e3d28a">skip</a>();
<a name="l00990"></a>00990       cmd.<a class="code" href="../../db/d85/class_c_s.html#a19ccbc64484e30fde4c9207323d4cfaf">skipbl</a>();
<a name="l00991"></a>00991     }
<a name="l00992"></a>00992     <a class="code" href="../../de/de7/class_s_e_t___r_u_n___m_o_d_e.html">SET_RUN_MODE</a> xx(<a class="code" href="../../d8/dbf/md_8h.html#a8c551c1eb58ae69a51730eb254b93c91a7ea385aca605fa42aef260d5904a3ba9">rSCRIPT</a>);
<a name="l00993"></a>00993     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759aec184ac0da72f7df468f4e07c91acf4a">SKIP_HEADER</a>, Scope);
<a name="l00994"></a>00994   }
<a name="l00995"></a>00995 } <a class="code" href="../../dc/d26/s__tr_8cc.html#a2807c7901242ae5362be6ed3e42e6539">p5</a>;
<a name="l00996"></a>00996 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d5(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;&lt;&quot;</span>, &amp;<a class="code" href="../../dc/d26/s__tr_8cc.html#a2807c7901242ae5362be6ed3e42e6539">p5</a>);
<a name="l00997"></a>00997 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00998"></a>00998 <span class="comment">/* cmd_get: get command</span>
<a name="l00999"></a>00999 <span class="comment"> * get circuit from a file, after clearing the old one</span>
<a name="l01000"></a>01000 <span class="comment"> * preset, but do not execute &quot;dot cards&quot;</span>
<a name="l01001"></a>01001 <span class="comment"> */</span>
<a name="l01002"></a><a class="code" href="../../d8/dfd/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___g_e_t.html">01002</a> <span class="keyword">class </span><a class="code" href="../../d8/dfd/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___g_e_t.html">CMD_GET</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01003"></a>01003 <span class="keyword">public</span>:
<a name="l01004"></a><a class="code" href="../../d8/dfd/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___g_e_t.html#a533ca3fe4f21a71f0ead3c127257700d">01004</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01005"></a>01005   {
<a name="l01006"></a>01006     <a class="code" href="../../de/de7/class_s_e_t___r_u_n___m_o_d_e.html">SET_RUN_MODE</a> xx(<a class="code" href="../../d8/dbf/md_8h.html#a8c551c1eb58ae69a51730eb254b93c91a966ea075ba13012f52e850d632eed0d6">rPRESET</a>);
<a name="l01007"></a>01007     command(<span class="stringliteral">&quot;clear&quot;</span>, Scope);
<a name="l01008"></a>01008     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#ad6ca0f9631e8548a5b83a6cfed910486">getmerge</a>(cmd, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#aed36e38d7621d3f69383e7f2e1096759aec184ac0da72f7df468f4e07c91acf4a">SKIP_HEADER</a>, Scope);
<a name="l01009"></a>01009   }
<a name="l01010"></a>01010 } <a class="code" href="../../d3/d8f/namespaceanonymous__namespace_02c__sim_8cc_03.html#a0468fc772e9b90ecabaea60c1229d951">p6</a>;
<a name="l01011"></a>01011 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d6(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.get|get&quot;</span>, &amp;<a class="code" href="../../d3/d8f/namespaceanonymous__namespace_02c__sim_8cc_03.html#a0468fc772e9b90ecabaea60c1229d951">p6</a>);
<a name="l01012"></a>01012 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01013"></a>01013 <span class="comment">/* cmd_build: build command</span>
<a name="l01014"></a>01014 <span class="comment"> * get circuit description direct from keyboard (or stdin if redirected)</span>
<a name="l01015"></a>01015 <span class="comment"> * Command syntax: build &lt;before&gt;</span>
<a name="l01016"></a>01016 <span class="comment"> * Bare command: add to end of list</span>
<a name="l01017"></a>01017 <span class="comment"> * If there is an arg: add before that element</span>
<a name="l01018"></a>01018 <span class="comment"> * null line exits this mode</span>
<a name="l01019"></a>01019 <span class="comment"> * preset, but do not execute &quot;dot cards&quot;</span>
<a name="l01020"></a>01020 <span class="comment"> */</span>
<a name="l01021"></a><a class="code" href="../../d0/d4c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___b_u_i_l_d.html">01021</a> <span class="keyword">class </span><a class="code" href="../../d0/d4c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___b_u_i_l_d.html">CMD_BUILD</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01022"></a>01022 <span class="keyword">public</span>:
<a name="l01023"></a><a class="code" href="../../d0/d4c/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___b_u_i_l_d.html#af53872ef5f955c5588857dc7febfef8d">01023</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01024"></a>01024   {
<a name="l01025"></a>01025     <a class="code" href="../../de/de7/class_s_e_t___r_u_n___m_o_d_e.html">SET_RUN_MODE</a> xx(<a class="code" href="../../d8/dbf/md_8h.html#a8c551c1eb58ae69a51730eb254b93c91a966ea075ba13012f52e850d632eed0d6">rPRESET</a>);
<a name="l01026"></a>01026     <a class="code" href="../../d5/d68/globals_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">::status</a>.<a class="code" href="../../d3/d83/class_s_t_a_t_u_s.html#acd7f67da621010f60cdb98904c9966e4">get</a>.<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#ac9ca111bee4786e087bb01ae6a631b1a">reset</a>().<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#acdab67f7e7b152988362fef14ef436ba">start</a>();
<a name="l01027"></a>01027     <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#a2b4efb2309177c70d201a202509c8ac0">parse_module_body</a>(cmd, NULL, Scope, <span class="stringliteral">&quot;&gt;&quot;</span>, <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>.<a class="code" href="../../d7/d0e/classanonymous__namespace_02lang__spice_8cc_03_1_1_l_a_n_g___s_p_i_c_e___b_a_s_e.html#aa9510cfec5168c2ca896191ede3f789ba8fa4545a3185c32e738334e3be26ee7b">EXIT_ON_BLANK</a>, <span class="stringliteral">&quot;. &quot;</span>);
<a name="l01028"></a>01028     <a class="code" href="../../d5/d68/globals_8cc.html#a1025e6cbbd3179d2d91b9b4afb8f8efc">::status</a>.<a class="code" href="../../d3/d83/class_s_t_a_t_u_s.html#acd7f67da621010f60cdb98904c9966e4">get</a>.<a class="code" href="../../d1/d7c/class_t_i_m_e_r.html#a891b483fe0a827b1dc017316955c589e">stop</a>();
<a name="l01029"></a>01029   }
<a name="l01030"></a>01030 } <a class="code" href="../../d3/d8f/namespaceanonymous__namespace_02c__sim_8cc_03.html#a1dafaa16d5af89d9e37646c3d5d5c375">p7</a>;
<a name="l01031"></a>01031 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d7(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.build|build&quot;</span>, &amp;<a class="code" href="../../d3/d8f/namespaceanonymous__namespace_02c__sim_8cc_03.html#a1dafaa16d5af89d9e37646c3d5d5c375">p7</a>);
<a name="l01032"></a>01032 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01033"></a><a class="code" href="../../d0/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_p_i_c_e.html">01033</a> <span class="keyword">class </span><a class="code" href="../../d0/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_p_i_c_e.html">CMD_SPICE</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01034"></a>01034 <span class="keyword">public</span>:
<a name="l01035"></a><a class="code" href="../../d0/db2/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___s_p_i_c_e.html#ab8d5818d69a378df8a8af1eb0747cc8a">01035</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01036"></a>01036   {
<a name="l01037"></a>01037     command(<span class="stringliteral">&quot;options lang=spice&quot;</span>, Scope);
<a name="l01038"></a>01038   }
<a name="l01039"></a>01039 } <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a8cafa2b1bd6896c0dffe7b8945c817fa">p8</a>;
<a name="l01040"></a>01040 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d8(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;spice&quot;</span>, &amp;<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a8cafa2b1bd6896c0dffe7b8945c817fa">p8</a>);
<a name="l01041"></a>01041 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01042"></a><a class="code" href="../../d9/d63/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___a_c_s.html">01042</a> <span class="keyword">class </span><a class="code" href="../../d9/d63/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___a_c_s.html">CMD_ACS</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01043"></a>01043 <span class="keyword">public</span>:
<a name="l01044"></a><a class="code" href="../../d9/d63/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___a_c_s.html#af14f78c788fba8961394349dd79b5094">01044</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01045"></a>01045   {
<a name="l01046"></a>01046     command(<span class="stringliteral">&quot;options lang=acs&quot;</span>, Scope);
<a name="l01047"></a>01047   }
<a name="l01048"></a>01048 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a430312c60ecfefde6c8aa4de6ab6ef05">p9</a>;
<a name="l01049"></a>01049 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d9(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;acs&quot;</span>, &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a430312c60ecfefde6c8aa4de6ab6ef05">p9</a>);
<a name="l01050"></a>01050 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01051"></a><a class="code" href="../../da/d77/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___e_n_d_c.html">01051</a> <span class="keyword">class </span><a class="code" href="../../da/d77/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___e_n_d_c.html">CMD_ENDC</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01052"></a>01052 <span class="keyword">public</span>:
<a name="l01053"></a><a class="code" href="../../da/d77/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___e_n_d_c.html#a530c4bbff595616486a9d7124a65a217">01053</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01054"></a>01054   {
<a name="l01055"></a>01055     <span class="keywordflow">if</span> (<a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a> == &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a106a0e5184a40b87c3ae58a29e980fa7">lang_acs</a>) {
<a name="l01056"></a>01056       command(<span class="stringliteral">&quot;options lang=spice&quot;</span>, Scope);
<a name="l01057"></a>01057     }<span class="keywordflow">else</span>{
<a name="l01058"></a>01058     }
<a name="l01059"></a>01059   }
<a name="l01060"></a>01060 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a1f4e269867103ae229834fb39667d4b0">p88</a>;
<a name="l01061"></a>01061 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d88(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.endc&quot;</span>, &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a1f4e269867103ae229834fb39667d4b0">p88</a>);
<a name="l01062"></a>01062 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01063"></a><a class="code" href="../../dc/d51/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___c_o_n_t_r_o_l.html">01063</a> <span class="keyword">class </span><a class="code" href="../../dc/d51/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___c_o_n_t_r_o_l.html">CMD_CONTROL</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l01064"></a>01064 <span class="keyword">public</span>:
<a name="l01065"></a><a class="code" href="../../dc/d51/classanonymous__namespace_02lang__spice_8cc_03_1_1_c_m_d___c_o_n_t_r_o_l.html#a44e1e94ad651ffec1433c3cbe1ebf8d6">01065</a>   <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l01066"></a>01066   {
<a name="l01067"></a>01067     <span class="keywordflow">if</span> (<a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a> == &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a6e2bd6412eafbbcf2bb0dfe770e89083">lang_spice</a>) {
<a name="l01068"></a>01068       command(<span class="stringliteral">&quot;options lang=acs&quot;</span>, Scope);
<a name="l01069"></a>01069     }<span class="keywordflow">else</span>{
<a name="l01070"></a>01070     }
<a name="l01071"></a>01071   }
<a name="l01072"></a>01072 } <a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a43209802b8f4d092e78588f81a662128">p99</a>;
<a name="l01073"></a>01073 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a> d99(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;.control&quot;</span>, &amp;<a class="code" href="../../db/d6e/namespaceanonymous__namespace_02lang__spice_8cc_03.html#a43209802b8f4d092e78588f81a662128">p99</a>);
<a name="l01074"></a>01074 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01075"></a>01075 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01076"></a>01076 }
<a name="l01077"></a>01077 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l01078"></a>01078 <span class="comment">/*--------------------------------------------------------------------------*/</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Tue Aug 7 2012 17:59:30 for gnucap by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
