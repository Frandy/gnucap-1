<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gnucap: savant/gnucap/src/lang_geda.cc Source File</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gnucap
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">savant/gnucap/src/lang_geda.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/d72/lang__geda_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/* This file is the plugin for the gEDA-gschem plugin</span>
<a name="l00002"></a>00002 <span class="comment"> * The documentation of how this should work is at bit.ly(slash)gnucapwiki</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * This file is part of &quot;Gnucap&quot;, the Gnu Circuit Analysis Package.</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment"> * the Free Software Foundation; either version 3, or (at your option)</span>
<a name="l00009"></a>00009 <span class="comment"> * any later version.</span>
<a name="l00010"></a>00010 <span class="comment"> *</span>
<a name="l00011"></a>00011 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00018"></a>00018 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</span>
<a name="l00019"></a>00019 <span class="comment"> * 02110-1301, USA.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d4a/c__comand_8h.html">c_comand.h</a>&quot;</span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="../../db/de9/d__dot_8h.html">d_dot.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d8d/d__coment_8h.html">d_coment.h</a>&quot;</span>
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="../../da/d5c/d__subckt_8h.html">d_subckt.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/de9/e__model_8h.html">e_model.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="../../d7/dc4/u__lang_8h.html">u_lang.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;fts.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="../../d6/dda/io__trace_8h.html">io_trace.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#ifdef HAVE_GEDA</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#include &lt;gmpxx.h&gt;</span> <span class="comment">// to workaround bug in gmp header about __cplusplus</span>
<a name="l00032"></a>00032 <span class="preprocessor">#define COMPLEX NOCOMPLEX // COMPLEX already came from md.h</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>{
<a name="l00034"></a>00034 <span class="preprocessor"># include &lt;libgeda/libgeda.h&gt;</span>
<a name="l00035"></a>00035 }
<a name="l00036"></a>00036 <span class="preprocessor">#undef COMPLEX</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00039"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html">00039</a> <span class="keyword">namespace </span>{
<a name="l00040"></a>00040 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00041"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html">00041</a> <span class="keyword">class </span><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html">LANG_GEDA</a> : <span class="keyword">public</span> <a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html">LANGUAGE</a> {
<a name="l00042"></a>00042 
<a name="l00043"></a>00043 <span class="keyword">public</span>:
<a name="l00044"></a>00044     <span class="comment">//</span>
<a name="l00045"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a2f30bfb70f53173dd76270f8ab1009f5">00045</a>     <span class="keyword">enum</span> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a2f30bfb70f53173dd76270f8ab1009f5">MODE</a> {mATTRIBUTE, mCOMMENT} _mode;
<a name="l00046"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad1832751d896782b3eba7a5c5b39dfa7">00046</a>     <span class="keyword">mutable</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad1832751d896782b3eba7a5c5b39dfa7">_no_of_lines</a>;
<a name="l00047"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">00047</a>     <span class="keyword">mutable</span> <span class="keywordtype">bool</span> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">_componentmod</a>;
<a name="l00048"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#acfee5355acc6f1ccaaaa3be78cf67d9f">00048</a>     <span class="keyword">mutable</span> std::string <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#acfee5355acc6f1ccaaaa3be78cf67d9f">_componentname</a>;
<a name="l00049"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad2ed42185d640bdb2417f8026fbf7b75">00049</a>     <span class="keyword">mutable</span> <span class="keywordtype">bool</span> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad2ed42185d640bdb2417f8026fbf7b75">_gotaline</a>;
<a name="l00050"></a>00050     <span class="comment">//</span>
<a name="l00051"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a679d094dd12428ac0eb33aa3274aa46e">00051</a>     std::string <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a679d094dd12428ac0eb33aa3274aa46e">name</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;gschem&quot;</span>;}
<a name="l00052"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#aaddc9904d770fe3072b91aee44ff5bf4">00052</a>     <span class="keywordtype">bool</span> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#aaddc9904d770fe3072b91aee44ff5bf4">case_insensitive</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="keyword">false</span>;}
<a name="l00053"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#aa89d8a2d97f2fdc11bca397c1dd62b0c">00053</a>     <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95">UNITS</a> <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#aa89d8a2d97f2fdc11bca397c1dd62b0c">units</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <a class="code" href="../../d7/d7b/u__opt_8h.html#ae63bf01444fa83e2e4d536e113dddf95aebb177ba2b3acad57e25dd89d11edd25">uSI</a>;}
<a name="l00054"></a>00054 
<a name="l00055"></a>00055 <span class="keyword">public</span>: <span class="comment">//functions to be declared</span>
<a name="l00056"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ab8a12bdbad0bc2e18a2ab344129c82c8">00056</a>     std::string <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ab8a12bdbad0bc2e18a2ab344129c82c8">arg_front</a>()<span class="keyword">const </span>{
<a name="l00057"></a>00057         <span class="keywordflow">return</span> <span class="stringliteral">&quot; &quot;</span>; <span class="comment">//arbitrary</span>
<a name="l00058"></a>00058     }
<a name="l00059"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a6636e763429a6d20d5bd48e6d3bd267a">00059</a>     std::string <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a6636e763429a6d20d5bd48e6d3bd267a">arg_mid</a>()<span class="keyword">const </span>{
<a name="l00060"></a>00060         <span class="keywordflow">return</span> <span class="stringliteral">&quot;=&quot;</span>; <span class="comment">//arbitrary</span>
<a name="l00061"></a>00061     }
<a name="l00062"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af200ebaae6978526f67498ea08289f7e">00062</a>     std::string <a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af200ebaae6978526f67498ea08289f7e">arg_back</a>()<span class="keyword">const </span>{
<a name="l00063"></a>00063         <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;  <span class="comment">//arbitrary</span>
<a name="l00064"></a>00064     }
<a name="l00065"></a>00065 
<a name="l00066"></a>00066 <span class="keyword">public</span>:
<a name="l00067"></a>00067     <span class="keywordtype">void</span>                  parse_top_item(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>*);
<a name="l00068"></a>00068     <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*  parse_comment(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*);
<a name="l00069"></a>00069     <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>*      parse_command(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>*);
<a name="l00070"></a>00070     <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*   parse_paramset(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*);
<a name="l00071"></a>00071     <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* parse_module(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*);
<a name="l00072"></a>00072     <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*    parse_instance(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00073"></a>00073     std::string   find_type_in_string(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;);
<a name="l00074"></a>00074     <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* parse_componmod(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp;, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 <span class="keyword">private</span>:
<a name="l00077"></a>00077     <span class="keywordtype">void</span> print_paramset(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>*);
<a name="l00078"></a>00078     <span class="keywordtype">void</span> print_module(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>*);
<a name="l00079"></a>00079     <span class="keywordtype">void</span> print_instance(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*);
<a name="l00080"></a>00080     <span class="keywordtype">void</span> print_comment(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp;, <span class="keyword">const</span> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>*);
<a name="l00081"></a>00081     <span class="keywordtype">void</span> print_command(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* c);
<a name="l00082"></a>00082 
<a name="l00083"></a>00083 }<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;LANGUAGE&gt;::INSTALL</a>
<a name="l00086"></a>00086     d(&amp;<a class="code" href="../../d5/d68/globals_8cc.html#ad60e5f6d21eae20ab215dd193dcd5e1e">language_dispatcher</a>, <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a679d094dd12428ac0eb33aa3274aa46e">name</a>(), &amp;<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>);
<a name="l00087"></a>00087 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00088"></a>00088 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00089"></a>00089 <span class="comment">//Finds type from find_type_in_string</span>
<a name="l00090"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">00090</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>* x)
<a name="l00091"></a>00091 {
<a name="l00092"></a>00092       assert(x);
<a name="l00093"></a>00093       std::string new_type;
<a name="l00094"></a>00094       new_type=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af6b409e3eb2cf7d30080fbb989e0989d">find_type_in_string</a>(cmd);
<a name="l00095"></a>00095       x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ae68036f27d5e2ce6bbfc0e101e3a3b4c">set_dev_type</a>(new_type);
<a name="l00096"></a>00096 }
<a name="l00097"></a>00097 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00098"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a22bd8f5a6bac3e33fac72b8f9926d8fc">00098</a> <span class="keyword">static</span> std::string* <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a22bd8f5a6bac3e33fac72b8f9926d8fc">parse_pin</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x, <span class="keywordtype">int</span> index, <span class="keywordtype">bool</span> ismodel)
<a name="l00099"></a>00099 {
<a name="l00100"></a>00100     <span class="comment">//assert(x); can parse NULL also</span>
<a name="l00101"></a>00101     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got into parse_pin&quot;</span>);
<a name="l00102"></a>00102     std::string type=<a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a>-&gt;<a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html#a93dbdd07931bf1f7712d6e9aa90ccc40">find_type_in_string</a>(cmd),dump;
<a name="l00103"></a>00103     assert(type==<span class="stringliteral">&quot;pin&quot;</span>);
<a name="l00104"></a>00104     cmd&gt;&gt;<span class="stringliteral">&quot;P&quot;</span>;
<a name="l00105"></a>00105     std::string* coord = <span class="keyword">new</span> std::string[3];
<a name="l00106"></a>00106     <span class="keywordflow">if</span> (!ismodel){
<a name="l00107"></a>00107         std::string pinattributes[7];
<a name="l00108"></a>00108         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;7;i++){
<a name="l00109"></a>00109             cmd&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;pinattributes[i];
<a name="l00110"></a>00110         }
<a name="l00111"></a>00111         <span class="keywordflow">if</span> (pinattributes[6]==<span class="stringliteral">&quot;1&quot;</span>){
<a name="l00112"></a>00112             coord[0]=pinattributes[2];
<a name="l00113"></a>00113             coord[1]=pinattributes[3];
<a name="l00114"></a>00114         }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (pinattributes[6]==<span class="stringliteral">&quot;0&quot;</span>){
<a name="l00115"></a>00115             coord[0]=pinattributes[0];
<a name="l00116"></a>00116             coord[1]=pinattributes[1];
<a name="l00117"></a>00117         }
<a name="l00118"></a>00118     }
<a name="l00119"></a>00119     <span class="keywordflow">else</span>{
<a name="l00120"></a>00120         cmd&gt;&gt;dump;
<a name="l00121"></a>00121     }
<a name="l00122"></a>00122     std::string    _portvalue=<span class="stringliteral">&quot;_&quot;</span>;
<a name="l00123"></a>00123     <span class="keywordflow">try</span>{
<a name="l00124"></a>00124         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00125"></a>00125     }<span class="keywordflow">catch</span>(Exception_End_Of_Input&amp;){
<a name="l00126"></a>00126         <span class="keywordflow">return</span> NULL;
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128     std::string temp=(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>()).substr(0,1);
<a name="l00129"></a>00129     <span class="keywordflow">if</span>(temp!=<span class="stringliteral">&quot;{&quot;</span>){
<a name="l00130"></a>00130         <span class="keywordflow">if</span>(ismodel and x){
<a name="l00131"></a>00131             _portvalue=<span class="stringliteral">&quot;port&quot;</span>+_portvalue+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()%10000);
<a name="l00132"></a>00132             x-&gt;set_port_by_index(index,_portvalue);
<a name="l00133"></a>00133             <span class="keywordflow">return</span> NULL;
<a name="l00134"></a>00134         }<span class="keywordflow">else</span>{
<a name="l00135"></a>00135             <span class="keywordflow">return</span> coord;
<a name="l00136"></a>00136         }
<a name="l00137"></a>00137     }
<a name="l00138"></a>00138     cmd&gt;&gt;<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00139"></a>00139     <span class="keywordflow">for</span>(;;){
<a name="l00140"></a>00140         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00141"></a>00141         <span class="keywordflow">if</span>(cmd&gt;&gt;<span class="stringliteral">&quot;}&quot;</span>){
<a name="l00142"></a>00142             <span class="keywordflow">break</span>;
<a name="l00143"></a>00143         }<span class="keywordflow">else</span>{
<a name="l00144"></a>00144             <span class="keywordflow">if</span> (cmd&gt;&gt;<span class="stringliteral">&quot;T&quot;</span>){
<a name="l00145"></a>00145                 cmd&gt;&gt;dump;
<a name="l00146"></a>00146             }
<a name="l00147"></a>00147             <span class="keywordflow">else</span>{
<a name="l00148"></a>00148                 std::string _pname=cmd.<a class="code" href="../../db/d85/class_c_s.html#a6647600f58b47a4a13ad4a7ce1f5a40e">ctos</a>(<span class="stringliteral">&quot;=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>),_pvalue;
<a name="l00149"></a>00149                 cmd&gt;&gt;<span class="stringliteral">&quot;=&quot;</span>&gt;&gt;_pvalue;
<a name="l00150"></a>00150                 <span class="keywordflow">if</span>(_pname==<span class="stringliteral">&quot;pinlabel&quot;</span>){
<a name="l00151"></a>00151                     _portvalue=_pvalue+_portvalue;
<a name="l00152"></a>00152                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (_pname==<span class="stringliteral">&quot;pintype&quot;</span>){
<a name="l00153"></a>00153                     _portvalue=_portvalue+_pvalue;
<a name="l00154"></a>00154                 }
<a name="l00155"></a>00155             }
<a name="l00156"></a>00156         }
<a name="l00157"></a>00157     }
<a name="l00158"></a>00158     <span class="keywordflow">if</span>(ismodel and x){
<a name="l00159"></a>00159         x-&gt;set_port_by_index(index,_portvalue);
<a name="l00160"></a>00160         <span class="keywordflow">return</span> NULL;
<a name="l00161"></a>00161     }<span class="keywordflow">else</span>{
<a name="l00162"></a>00162         <span class="keywordflow">return</span> coord;
<a name="l00163"></a>00163     }
<a name="l00164"></a>00164 }
<a name="l00165"></a>00165 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00166"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#ad338190b7fcf530bd7effe60fdb80091">00166</a> <span class="keyword">static</span> std::string <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#ad338190b7fcf530bd7effe60fdb80091">find_file_given_name</a>(std::string basename)
<a name="l00167"></a>00167 {
<a name="l00168"></a>00168 <span class="preprocessor">#ifdef HAVE_GEDA</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* geda = s_path_sys_data();
<a name="l00170"></a>00170 <span class="preprocessor">#else</span>
<a name="l00171"></a>00171 <span class="preprocessor"></span>    <span class="keyword">const</span> <span class="keywordtype">char</span>* geda = GEDA_DATA;
<a name="l00172"></a>00172 <span class="preprocessor">#endif</span>
<a name="l00173"></a>00173 <span class="preprocessor"></span>    <span class="keywordtype">char</span> gedasym[5+strlen(geda)];
<a name="l00174"></a>00174     sprintf(gedasym, <span class="stringliteral">&quot;%s/sym&quot;</span>, geda);
<a name="l00175"></a>00175     <span class="keywordtype">char</span> *<a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>[] = {gedasym,NULL};
<a name="l00176"></a>00176     FTS* dir=fts_open(p,FTS_NOCHDIR, NULL);
<a name="l00177"></a>00177     <span class="keywordflow">if</span>(!dir){
<a name="l00178"></a>00178         std::cout&lt;&lt;<span class="stringliteral">&quot;Not opened\n&quot;</span>;
<a name="l00179"></a>00179         <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00180"></a>00180     }
<a name="l00181"></a>00181     assert(dir);
<a name="l00182"></a>00182     FTSENT* node;
<a name="l00183"></a>00183     std::string dirname=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00184"></a>00184     <span class="keywordflow">while</span>(node=fts_read(dir)){
<a name="l00185"></a>00185         <span class="keywordflow">if</span>(node-&gt;fts_info &amp; FTS_F &amp;&amp; basename==node-&gt;fts_name){
<a name="l00186"></a>00186             dirname=node-&gt;fts_path;
<a name="l00187"></a>00187         }
<a name="l00188"></a>00188     }
<a name="l00189"></a>00189     <span class="keywordflow">if</span>(dirname==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00190"></a>00190         std::cout&lt;&lt;<span class="stringliteral">&quot;No symbol file for &quot;</span>+basename&lt;&lt;std::endl;
<a name="l00191"></a>00191     }
<a name="l00192"></a>00192     <span class="keywordflow">return</span> dirname;
<a name="l00193"></a>00193 }
<a name="l00194"></a>00194 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00195"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aba731d3f747484cebb08613fadf9cfaa">00195</a> <span class="keyword">static</span> std::vector&lt;std::string*&gt; <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aba731d3f747484cebb08613fadf9cfaa">parse_symbol_file</a>(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x, std::string basename)
<a name="l00196"></a>00196 {
<a name="l00197"></a>00197     std::string filename=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#ad338190b7fcf530bd7effe60fdb80091">find_file_given_name</a>(basename),dump;
<a name="l00198"></a>00198     <a class="code" href="../../db/d85/class_c_s.html">CS</a> sym_cmd(<a class="code" href="../../db/d85/class_c_s.html#a6e80b47b08f8b0f2555a687bf6e564b3a2d72af180ec385d57adaadaf0868b7f7">CS::_INC_FILE</a>, filename);
<a name="l00199"></a>00199     <span class="comment">//Now parse the sym_cmd which will get lines</span>
<a name="l00200"></a>00200     <span class="keywordtype">int</span> index=0;
<a name="l00201"></a>00201     std::vector&lt;std::string*&gt; coord;
<a name="l00202"></a>00202     <span class="keywordflow">while</span>(<span class="keyword">true</span>){
<a name="l00203"></a>00203         <span class="keywordflow">try</span>{
<a name="l00204"></a>00204             sym_cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00205"></a>00205         }<span class="keywordflow">catch</span> (Exception_End_Of_Input&amp;){
<a name="l00206"></a>00206             <span class="keywordflow">break</span>;
<a name="l00207"></a>00207         }
<a name="l00208"></a>00208         std::string linetype=<a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a>-&gt;<a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html#a93dbdd07931bf1f7712d6e9aa90ccc40">find_type_in_string</a>(sym_cmd);
<a name="l00209"></a>00209         <span class="keywordtype">bool</span> ismodel=<span class="keyword">false</span>;
<a name="l00210"></a>00210         <span class="keywordflow">if</span> (x){
<a name="l00211"></a>00211             <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>()==<span class="stringliteral">&quot;!_&quot;</span>+basename){
<a name="l00212"></a>00212                 ismodel=<span class="keyword">true</span>;
<a name="l00213"></a>00213             }
<a name="l00214"></a>00214         }
<a name="l00215"></a>00215         <span class="keywordflow">if</span> (linetype==<span class="stringliteral">&quot;pin&quot;</span>){
<a name="l00216"></a>00216             coord.push_back(<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a22bd8f5a6bac3e33fac72b8f9926d8fc">parse_pin</a>(sym_cmd,x,index++,ismodel));
<a name="l00217"></a>00217         }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(linetype==<span class="stringliteral">&quot;graphical&quot;</span>){
<a name="l00218"></a>00218             sym_cmd&gt;&gt;<span class="stringliteral">&quot;graphical=&quot;</span>;
<a name="l00219"></a>00219             std::string value;
<a name="l00220"></a>00220             sym_cmd&gt;&gt;value;
<a name="l00221"></a>00221             <span class="keywordflow">if</span>(value==<span class="stringliteral">&quot;1&quot;</span>){
<a name="l00222"></a>00222                 <span class="keywordflow">return</span> coord;
<a name="l00223"></a>00223             }
<a name="l00224"></a>00224         }<span class="keywordflow">else</span>{
<a name="l00225"></a>00225             sym_cmd&gt;&gt;dump;
<a name="l00226"></a>00226         }
<a name="l00227"></a>00227     }
<a name="l00228"></a>00228     <span class="keywordflow">return</span> coord;
<a name="l00229"></a>00229 }
<a name="l00230"></a>00230 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00231"></a>00231 <span class="comment">//place &lt;nodename&gt; x y</span>
<a name="l00232"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5d3cdb43e55f78e3c7245affc9b05786">00232</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5d3cdb43e55f78e3c7245affc9b05786">parse_place</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00233"></a>00233 {
<a name="l00234"></a>00234     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got into parse_place&quot;</span>);
<a name="l00235"></a>00235     assert(x);
<a name="l00236"></a>00236     assert(<a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a>-&gt;find_type_in_string(cmd)==<span class="stringliteral">&quot;place&quot;</span>);
<a name="l00237"></a>00237     cmd&gt;&gt;<span class="stringliteral">&quot;place&quot;</span>;
<a name="l00238"></a>00238     std::string _portname,_x,_y;
<a name="l00239"></a>00239     cmd&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;_portname&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;_x&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;_y;
<a name="l00240"></a>00240     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(<span class="stringliteral">&quot;x&quot;</span>,_x);
<a name="l00241"></a>00241     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(<span class="stringliteral">&quot;y&quot;</span>,_y);
<a name="l00242"></a>00242     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1ab95c30a66cd7a397b15c5f13861fd0">set_port_by_index</a>(0,_portname);
<a name="l00243"></a>00243 }
<a name="l00244"></a>00244 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00245"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a860679d10223143189db9aeaa6c037cc">00245</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a860679d10223143189db9aeaa6c037cc">create_place</a>(std::string cmdstr,<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00246"></a>00246 {
<a name="l00247"></a>00247     <a class="code" href="../../db/d85/class_c_s.html">CS</a> place_cmd(<a class="code" href="../../db/d85/class_c_s.html#a76dbe76fb5837e42a38301a0feeb6d2dadea8dbbb049377b6bf40384c47996738">CS::_STRING</a>,cmdstr);
<a name="l00248"></a>00248     <a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a>-&gt;<a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html#a1ecab49c51a0f6d914170c04edb420a8">new__instance</a>(place_cmd,NULL,x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>());
<a name="l00249"></a>00249 }
<a name="l00250"></a>00250 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00251"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a1175c18697d4c55202d1f74f845bf9e0">00251</a> <span class="keyword">static</span> std::string <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a1175c18697d4c55202d1f74f845bf9e0">findplacewithsameposition</a>(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x,std::string xco,std::string yco)
<a name="l00252"></a>00252 {
<a name="l00253"></a>00253     <span class="keywordflow">for</span> (<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a09cb5fe86d7450c3afe61d31558516eb">CARD_LIST::const_iterator</a> ci = x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a215ac8c5830719ceff1ad3b25ad2864a">begin</a>(); ci != x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a62d2e7c41c19b588ed74b4247600c875">end</a>(); ++ci) {
<a name="l00254"></a>00254         <span class="keywordflow">if</span>((*ci)-&gt;dev_type()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00255"></a>00255             <span class="keywordflow">if</span>(xco==(*ci)-&gt;param_value(1) &amp;&amp; yco==(*ci)-&gt;param_value(0)){
<a name="l00256"></a>00256                 <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>*<span class="keyword">&gt;</span>(*ci)-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a99ac0da644b8d8b33e31233fb82f12d3">port_value</a>(0);
<a name="l00257"></a>00257             }
<a name="l00258"></a>00258         }
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00261"></a>00261 }
<a name="l00262"></a>00262 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00263"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a67207af5226691531e480be2f21dd92e">00263</a> <span class="keyword">static</span> std::string* <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a67207af5226691531e480be2f21dd92e">findnodeonthisnet</a>(<a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a> *x, std::string x0, std::string y0, std::string x1, std::string y1)
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265     <span class="keywordflow">for</span>(<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a09cb5fe86d7450c3afe61d31558516eb">CARD_LIST::const_iterator</a> ci = x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a215ac8c5830719ceff1ad3b25ad2864a">begin</a>(); ci != x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a62d2e7c41c19b588ed74b4247600c875">end</a>(); ++ci) {
<a name="l00266"></a>00266         <span class="keywordflow">if</span>((*ci)-&gt;dev_type()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00267"></a>00267             std::string _x=(*ci)-&gt;param_value(1),_y=(*ci)-&gt;param_value(0);
<a name="l00268"></a>00268             <span class="keywordflow">if</span> (y0==y1){
<a name="l00269"></a>00269                 <span class="keywordflow">if</span>(  ( ( (atoi(x1.c_str()) &lt; atoi(_x.c_str())) and (atoi(_x.c_str())&lt;atoi(x0.c_str())) ) || ( (atoi(x0.c_str()) &lt; atoi(_x.c_str())) and (atoi(_x.c_str())&lt;atoi(x1.c_str())) ) ) and _y==y0 and _x!=x0 and _x!=x1){
<a name="l00270"></a>00270                     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;true0&quot;</span>);
<a name="l00271"></a>00271                     std::string* coord=<span class="keyword">new</span> std::string[2];
<a name="l00272"></a>00272                     coord[0]=_x;
<a name="l00273"></a>00273                     coord[1]=_y;
<a name="l00274"></a>00274                     <span class="keywordflow">return</span> coord;
<a name="l00275"></a>00275                 }
<a name="l00276"></a>00276                 <span class="keywordflow">else</span>{
<a name="l00277"></a>00277                     <span class="keywordflow">return</span> NULL;
<a name="l00278"></a>00278                 }
<a name="l00279"></a>00279             }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (x0==x1){
<a name="l00280"></a>00280                 <span class="keywordflow">if</span>(  ( ( (atoi(y1.c_str()) &lt; atoi(_y.c_str())) and (atoi(_y.c_str())&lt;atoi(y0.c_str())) ) || ( (atoi(y0.c_str()) &lt; atoi(_y.c_str())) and (atoi(_y.c_str())&lt;atoi(y1.c_str())) ) ) and _x==x0 and _y!=y0 and _y!=y1){
<a name="l00281"></a>00281                     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;true1&quot;</span>);
<a name="l00282"></a>00282                     std::string* coord=<span class="keyword">new</span> std::string[2];
<a name="l00283"></a>00283                     coord[0]=_x;
<a name="l00284"></a>00284                     coord[1]=_y;
<a name="l00285"></a>00285                     <span class="keywordflow">return</span> coord;
<a name="l00286"></a>00286                 }<span class="keywordflow">else</span>{
<a name="l00287"></a>00287                     <span class="keywordflow">return</span> NULL;
<a name="l00288"></a>00288                 }
<a name="l00289"></a>00289             }
<a name="l00290"></a>00290             <span class="keywordflow">else</span>{
<a name="l00291"></a>00291                 <span class="keywordflow">return</span> NULL;
<a name="l00292"></a>00292             }
<a name="l00293"></a>00293         }
<a name="l00294"></a>00294     }
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00297"></a>00297 <span class="comment">// A net is in form N x0 y0 x1 y1 c</span>
<a name="l00298"></a>00298 <span class="comment">// Need to get x0 y0 ; x1 y1 ;</span>
<a name="l00299"></a>00299 <span class="comment">// Need to go through all the nets. Anyway?</span>
<a name="l00300"></a>00300 <span class="comment">// Need to save them in other forms? How to go through all cards?</span>
<a name="l00301"></a>00301 <span class="comment">// Need to specify a name for a card?</span>
<a name="l00302"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a26319fb1231594ccbea1b3ddaa89eb06">00302</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a26319fb1231594ccbea1b3ddaa89eb06">parse_net</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00303"></a>00303 {
<a name="l00304"></a>00304     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_net&quot;</span>);
<a name="l00305"></a>00305     assert(x);
<a name="l00306"></a>00306     assert(<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af6b409e3eb2cf7d30080fbb989e0989d">find_type_in_string</a>(cmd)==<span class="stringliteral">&quot;net&quot;</span>);
<a name="l00307"></a>00307     cmd&gt;&gt;<span class="stringliteral">&quot;N&quot;</span>;     <span class="comment">//Got N</span>
<a name="l00308"></a>00308     <span class="keywordtype">unsigned</span> here=cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>();
<a name="l00309"></a>00309     <span class="comment">// x0 y0 x1 y1 color</span>
<a name="l00310"></a>00310     std::string parsedvalue[5];
<a name="l00311"></a>00311     <span class="keywordtype">int</span> i=0;
<a name="l00312"></a>00312     <span class="keywordtype">bool</span> gotthenet=<span class="keyword">true</span>;
<a name="l00313"></a>00313     <span class="keywordflow">while</span> (i&lt;5) {
<a name="l00314"></a>00314         <span class="keywordflow">if</span> (cmd.is_alnum()){
<a name="l00315"></a>00315             cmd&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;parsedvalue[i];
<a name="l00316"></a>00316         }<span class="keywordflow">else</span>{
<a name="l00317"></a>00317             gotthenet=<span class="keyword">false</span>;
<a name="l00318"></a>00318             cmd.warn(bDANGER, here, x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a2b81b4c28056adc678b21ff34a756913">long_label</a>() +<span class="stringliteral">&quot;: Not correct format for net&quot;</span>);
<a name="l00319"></a>00319             <span class="keywordflow">break</span>;
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321         ++i;
<a name="l00322"></a>00322     }
<a name="l00323"></a>00323     <span class="keywordflow">if</span> (gotthenet){
<a name="l00324"></a>00324         <span class="comment">//lang_geda.nets.push_back(x);</span>
<a name="l00325"></a>00325         <span class="comment">//To check if any of the previous nodes have same placement.</span>
<a name="l00326"></a>00326         x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(<span class="stringliteral">&quot;color&quot;</span>,parsedvalue[4]);
<a name="l00327"></a>00327         x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(<span class="stringliteral">&quot;net&quot;</span>+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()%10000)); <span class="comment">//BUG : names may coincide!. Doesn&#39;t matter? Or try some initialisation method. (latch like digital)</span>
<a name="l00328"></a>00328 
<a name="l00329"></a>00329         std::string _portvalue=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a1175c18697d4c55202d1f74f845bf9e0">findplacewithsameposition</a>(x,parsedvalue[0],parsedvalue[1]);
<a name="l00330"></a>00330         <span class="keywordflow">if</span>(_portvalue==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00331"></a>00331             _portvalue=<span class="stringliteral">&quot;node&quot;</span>+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()%10000);
<a name="l00332"></a>00332             <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a860679d10223143189db9aeaa6c037cc">create_place</a>(<span class="stringliteral">&quot;place &quot;</span>+_portvalue+<span class="stringliteral">&quot; &quot;</span>+parsedvalue[0]+<span class="stringliteral">&quot; &quot;</span>+parsedvalue[1],x);
<a name="l00333"></a>00333         }
<a name="l00334"></a>00334         x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1ab95c30a66cd7a397b15c5f13861fd0">set_port_by_index</a>(0,_portvalue);
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         _portvalue=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a1175c18697d4c55202d1f74f845bf9e0">findplacewithsameposition</a>(x,parsedvalue[2],parsedvalue[3]);
<a name="l00337"></a>00337         <span class="keywordflow">if</span>(_portvalue==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00338"></a>00338             _portvalue=<span class="stringliteral">&quot;node&quot;</span>+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()%10000);
<a name="l00339"></a>00339             <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a860679d10223143189db9aeaa6c037cc">create_place</a>(<span class="stringliteral">&quot;place &quot;</span>+_portvalue+<span class="stringliteral">&quot; &quot;</span>+parsedvalue[2]+<span class="stringliteral">&quot; &quot;</span>+parsedvalue[3],x);
<a name="l00340"></a>00340         }
<a name="l00341"></a>00341         x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1ab95c30a66cd7a397b15c5f13861fd0">set_port_by_index</a>(1,_portvalue);
<a name="l00342"></a>00342 
<a name="l00343"></a>00343         std::string* nodeonthisnet=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a67207af5226691531e480be2f21dd92e">findnodeonthisnet</a>(x,parsedvalue[0],parsedvalue[1],parsedvalue[2],parsedvalue[3]);
<a name="l00344"></a>00344         <span class="keywordflow">if</span> (!nodeonthisnet)
<a name="l00345"></a>00345         {
<a name="l00346"></a>00346         }<span class="keywordflow">else</span>{
<a name="l00347"></a>00347             <span class="comment">//create new net from nodeonthisnet to one of edges of net.</span>
<a name="l00348"></a>00348             std::string netcmdstr=<span class="stringliteral">&quot;N &quot;</span>+parsedvalue[0]+<span class="stringliteral">&quot; &quot;</span>+parsedvalue[1]+<span class="stringliteral">&quot; &quot;</span>+nodeonthisnet[0]+<span class="stringliteral">&quot; &quot;</span>+nodeonthisnet[1]+<span class="stringliteral">&quot; 5&quot;</span>;
<a name="l00349"></a>00349             <a class="code" href="../../db/d85/class_c_s.html">CS</a> net_cmd(<a class="code" href="../../db/d85/class_c_s.html#a76dbe76fb5837e42a38301a0feeb6d2dadea8dbbb049377b6bf40384c47996738">CS::_STRING</a>,netcmdstr);
<a name="l00350"></a>00350             <a class="code" href="../../de/d5e/class_o_p_t.html#a71a05c5434e347581e7ba1a20a3b748a">OPT::language</a>-&gt;<a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html#a1ecab49c51a0f6d914170c04edb420a8">new__instance</a>(net_cmd,NULL,x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>());
<a name="l00351"></a>00351         }
<a name="l00352"></a>00352         <span class="comment">//To check if there are any attributes</span>
<a name="l00353"></a>00353         <span class="keywordflow">try</span> {
<a name="l00354"></a>00354             cmd.get_line(<span class="stringliteral">&quot;gnucap-geda&gt;&quot;</span>);
<a name="l00355"></a>00355         }<span class="keywordflow">catch</span>(Exception_End_Of_Input&amp;){
<a name="l00356"></a>00356             <span class="keywordflow">return</span>;
<a name="l00357"></a>00357         }
<a name="l00358"></a>00358         std::string temp=(cmd.fullstring()).substr(0,1);
<a name="l00359"></a>00359         std::string _paramvalue,_paramname,dump;
<a name="l00360"></a>00360         <span class="keywordflow">if</span>(temp!=<span class="stringliteral">&quot;{&quot;</span>){
<a name="l00361"></a>00361             cmd.reset();
<a name="l00362"></a>00362             <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad2ed42185d640bdb2417f8026fbf7b75">_gotaline</a>=<span class="keyword">true</span>;
<a name="l00363"></a>00363             <span class="comment">//OPT::language-&gt;new__instance(cmd,NULL,x-&gt;scope());</span>
<a name="l00364"></a>00364             <span class="keywordflow">return</span>;
<a name="l00365"></a>00365         }
<a name="l00366"></a>00366         cmd&gt;&gt;<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00367"></a>00367         <span class="keywordflow">for</span> (;;) {
<a name="l00368"></a>00368             cmd.get_line(<span class="stringliteral">&quot;gnucap-geda-net&gt;&quot;</span>);
<a name="l00369"></a>00369             <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;}&quot;</span>) {
<a name="l00370"></a>00370                 <span class="keywordflow">break</span>;
<a name="l00371"></a>00371             }<span class="keywordflow">else</span>{
<a name="l00372"></a>00372                 <span class="keywordflow">if</span>(cmd&gt;&gt;<span class="stringliteral">&quot;T&quot;</span>){
<a name="l00373"></a>00373                     cmd&gt;&gt;dump;
<a name="l00374"></a>00374                 }
<a name="l00375"></a>00375                 <span class="keywordflow">else</span> {
<a name="l00376"></a>00376                     std::string _paramname=cmd.ctos(<span class="stringliteral">&quot;=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>),_paramvalue;
<a name="l00377"></a>00377                     cmd&gt;&gt;<span class="stringliteral">&quot;=&quot;</span>&gt;&gt;_paramvalue;
<a name="l00378"></a>00378                     <span class="keywordflow">if</span> (_paramname==<span class="stringliteral">&quot;netname&quot;</span> &amp;&amp; _paramvalue!=<span class="stringliteral">&quot;?&quot;</span>){
<a name="l00379"></a>00379                         x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(_paramvalue);
<a name="l00380"></a>00380                     }<span class="keywordflow">else</span>{
<a name="l00381"></a>00381                         x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(_paramname,_paramvalue);
<a name="l00382"></a>00382                     }
<a name="l00383"></a>00383                 }
<a name="l00384"></a>00384             }
<a name="l00385"></a>00385         } 
<a name="l00386"></a>00386     }
<a name="l00387"></a>00387 }
<a name="l00388"></a>00388 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00389"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5e603f26a6cd69ced4a25ab9f65e64cf">00389</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5e603f26a6cd69ced4a25ab9f65e64cf">parse_component</a>(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd,<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x){
<a name="l00390"></a>00390     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_component&quot;</span>);
<a name="l00391"></a>00391     assert(x);
<a name="l00392"></a>00392     std::string component_x, component_y, mirror, angle, dump,basename;
<a name="l00393"></a>00393     std::string type=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af6b409e3eb2cf7d30080fbb989e0989d">find_type_in_string</a>(cmd);
<a name="l00394"></a>00394     cmd &gt;&gt; type;
<a name="l00395"></a>00395     cmd&gt;&gt;component_x&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;component_y&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;dump&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;angle&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;mirror&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;basename;
<a name="l00396"></a>00396     <span class="comment">//To get port names and values from symbol?</span>
<a name="l00397"></a>00397     <span class="comment">//Then set params below</span>
<a name="l00398"></a>00398     <span class="comment">//Search for the file name</span>
<a name="l00399"></a>00399     std::vector&lt;std::string*&gt; coordinates=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aba731d3f747484cebb08613fadf9cfaa">parse_symbol_file</a>(x,basename);
<a name="l00400"></a>00400     <span class="keywordtype">char</span>    newx[10],newy[10];
<a name="l00401"></a>00401     <span class="keywordtype">int</span> index=0;
<a name="l00402"></a>00402     <span class="keywordflow">for</span> (std::vector&lt;std::string*&gt;::const_iterator i=coordinates.begin();i&lt;coordinates.end();++i){
<a name="l00403"></a>00403         <span class="comment">//to do integer casting, addition and then reconverting to string</span>
<a name="l00404"></a>00404         <span class="keywordflow">if</span>(mirror==<span class="stringliteral">&quot;0&quot;</span>){
<a name="l00405"></a>00405             <span class="keywordflow">switch</span>(atoi(angle.c_str())){
<a name="l00406"></a>00406             <span class="keywordflow">case</span> 0:
<a name="l00407"></a>00407                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())+atoi((*i)[0].c_str()));
<a name="l00408"></a>00408                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())+atoi((*i)[1].c_str()));
<a name="l00409"></a>00409                 <span class="keywordflow">break</span>;
<a name="l00410"></a>00410             <span class="keywordflow">case</span> 90:
<a name="l00411"></a>00411                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())-atoi((*i)[1].c_str()));
<a name="l00412"></a>00412                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())+atoi((*i)[0].c_str()));
<a name="l00413"></a>00413                 <span class="keywordflow">break</span>;
<a name="l00414"></a>00414             <span class="keywordflow">case</span> 180:
<a name="l00415"></a>00415                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())-atoi((*i)[0].c_str()));
<a name="l00416"></a>00416                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())-atoi((*i)[1].c_str()));
<a name="l00417"></a>00417                 <span class="keywordflow">break</span>;
<a name="l00418"></a>00418             <span class="keywordflow">case</span> 270:
<a name="l00419"></a>00419                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())+atoi((*i)[1].c_str()));
<a name="l00420"></a>00420                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())-atoi((*i)[0].c_str()));
<a name="l00421"></a>00421                 <span class="keywordflow">break</span>;
<a name="l00422"></a>00422             }
<a name="l00423"></a>00423         }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(mirror==<span class="stringliteral">&quot;1&quot;</span>){
<a name="l00424"></a>00424             <span class="keywordflow">switch</span>(atoi(angle.c_str())){
<a name="l00425"></a>00425             <span class="keywordflow">case</span> 0:
<a name="l00426"></a>00426                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())-atoi((*i)[0].c_str()));
<a name="l00427"></a>00427                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())+atoi((*i)[1].c_str()));
<a name="l00428"></a>00428                 <span class="keywordflow">break</span>;
<a name="l00429"></a>00429             <span class="keywordflow">case</span> 90:
<a name="l00430"></a>00430                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())-atoi((*i)[1].c_str()));
<a name="l00431"></a>00431                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())-atoi((*i)[0].c_str()));
<a name="l00432"></a>00432                 <span class="keywordflow">break</span>;
<a name="l00433"></a>00433             <span class="keywordflow">case</span> 180:
<a name="l00434"></a>00434                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())+atoi((*i)[0].c_str()));
<a name="l00435"></a>00435                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())-atoi((*i)[1].c_str()));
<a name="l00436"></a>00436                 <span class="keywordflow">break</span>;
<a name="l00437"></a>00437             <span class="keywordflow">case</span> 270:
<a name="l00438"></a>00438                 sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_x.c_str())+atoi((*i)[1].c_str()));
<a name="l00439"></a>00439                 sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(component_y.c_str())+atoi((*i)[0].c_str()));
<a name="l00440"></a>00440                 <span class="keywordflow">break</span>;
<a name="l00441"></a>00441             }
<a name="l00442"></a>00442         }<span class="keywordflow">else</span>{
<a name="l00443"></a>00443         <span class="comment">//not correct mirror!</span>
<a name="l00444"></a>00444         }
<a name="l00445"></a>00445         <span class="comment">//delete (*i);</span>
<a name="l00446"></a>00446         <span class="comment">//setting new place devices for each node searching for .</span>
<a name="l00447"></a>00447         <span class="comment">//new__instance(cmd,NULL,Scope); //cmd : can create. Scope? how to get Scope? Yes!</span>
<a name="l00448"></a>00448         std::string _portvalue=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a1175c18697d4c55202d1f74f845bf9e0">findplacewithsameposition</a>(x,newx,newy);
<a name="l00449"></a>00449         <span class="keywordflow">if</span> (_portvalue==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00450"></a>00450             _portvalue=<span class="stringliteral">&quot;node_&quot;</span>+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()%10000);
<a name="l00451"></a>00451             <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a860679d10223143189db9aeaa6c037cc">create_place</a>(<span class="stringliteral">&quot;place &quot;</span>+_portvalue+<span class="stringliteral">&quot; &quot;</span>+newx+<span class="stringliteral">&quot; &quot;</span>+newy,x);
<a name="l00452"></a>00452         }
<a name="l00453"></a>00453         x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1ab95c30a66cd7a397b15c5f13861fd0">set_port_by_index</a>(index,_portvalue);
<a name="l00454"></a>00454         ++index;
<a name="l00455"></a>00455     }
<a name="l00456"></a>00456     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(<span class="stringliteral">&quot;basename&quot;</span>,basename);
<a name="l00457"></a>00457     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;getting line&quot;</span>);
<a name="l00458"></a>00458     <span class="keywordflow">try</span>{
<a name="l00459"></a>00459         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;gnucap-geda&gt;&quot;</span>);
<a name="l00460"></a>00460     }<span class="keywordflow">catch</span>(Exception_End_Of_Input&amp;){
<a name="l00461"></a>00461         <span class="keywordflow">return</span>;
<a name="l00462"></a>00462     }
<a name="l00463"></a>00463     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got line&quot;</span>);
<a name="l00464"></a>00464     std::string temp=(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>()).substr(0,1);
<a name="l00465"></a>00465     <span class="keywordflow">if</span>(temp!=<span class="stringliteral">&quot;{&quot;</span>){
<a name="l00466"></a>00466         <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;no {&quot;</span>);
<a name="l00467"></a>00467         cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00468"></a>00468         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">_componentmod</a>=<span class="keyword">true</span>;
<a name="l00469"></a>00469         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad2ed42185d640bdb2417f8026fbf7b75">_gotaline</a>=<span class="keyword">true</span>;
<a name="l00470"></a>00470         <span class="comment">//OPT::language-&gt;new__instance(cmd,NULL,x-&gt;scope());</span>
<a name="l00471"></a>00471         <span class="keywordflow">return</span>;
<a name="l00472"></a>00472     }
<a name="l00473"></a>00473     cmd&gt;&gt;<span class="stringliteral">&quot;{&quot;</span>;
<a name="l00474"></a>00474     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got {&quot;</span>);
<a name="l00475"></a>00475     <span class="keywordflow">for</span> (;;) {
<a name="l00476"></a>00476         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;gnucap-geda-&quot;</span>+basename+<span class="stringliteral">&quot;&gt;&quot;</span>);
<a name="l00477"></a>00477         <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;}&quot;</span>) {
<a name="l00478"></a>00478             <span class="keywordflow">break</span>;
<a name="l00479"></a>00479         }<span class="keywordflow">else</span>{
<a name="l00480"></a>00480             <span class="keywordflow">if</span>(cmd&gt;&gt;<span class="stringliteral">&quot;T&quot;</span>){
<a name="l00481"></a>00481                 cmd&gt;&gt;dump;
<a name="l00482"></a>00482             }
<a name="l00483"></a>00483             <span class="keywordflow">else</span> {
<a name="l00484"></a>00484                 std::string _paramname=cmd.<a class="code" href="../../db/d85/class_c_s.html#a6647600f58b47a4a13ad4a7ce1f5a40e">ctos</a>(<span class="stringliteral">&quot;=&quot;</span>,<span class="stringliteral">&quot;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>),_paramvalue;
<a name="l00485"></a>00485                 cmd&gt;&gt;<span class="stringliteral">&quot;=&quot;</span>&gt;&gt;_paramvalue;
<a name="l00486"></a>00486                 <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got the parameter&quot;</span>);
<a name="l00487"></a>00487                 <span class="keywordflow">if</span>(_paramname==<span class="stringliteral">&quot;device&quot;</span>){
<a name="l00488"></a>00488                     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a195b069e0458b534f4a7e1258e752332">set_dev_type</a>(_paramvalue);
<a name="l00489"></a>00489                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (_paramname==<span class="stringliteral">&quot;refdes&quot;</span> &amp;&amp; _paramvalue!=<span class="stringliteral">&quot;?&quot;</span>){
<a name="l00490"></a>00490                     x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(_paramvalue);
<a name="l00491"></a>00491                 }<span class="keywordflow">else</span>{
<a name="l00492"></a>00492                     x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a2fa5aafbce9679dd659e2eae0d40cf42">set_param_by_name</a>(_paramname,_paramvalue);
<a name="l00493"></a>00493                 }
<a name="l00494"></a>00494             }
<a name="l00495"></a>00495         }
<a name="l00496"></a>00496     }
<a name="l00497"></a>00497     <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>()==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00498"></a>00498         x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(basename+<a class="code" href="../../d5/d7d/l__ftos_8cc.html#a370b5800dda92dffe5ce4b4af84fdd27">to_string</a>(rand()));
<a name="l00499"></a>00499     }
<a name="l00500"></a>00500     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">_componentmod</a>=<span class="keyword">true</span>;
<a name="l00501"></a>00501     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got out of parse_component&quot;</span>);
<a name="l00502"></a>00502 }
<a name="l00503"></a>00503 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00504"></a>00504 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00505"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a23093bf34decc6675ef6b917829c491c">00505</a> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* LANG_GEDA::parse_comment(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* x)
<a name="l00506"></a>00506 {
<a name="l00507"></a>00507     assert(x);
<a name="l00508"></a>00508     x-&gt;<a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html#ab20286be87e4371dee72c586b295cb77">set</a>(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>());
<a name="l00509"></a>00509     std::string dump,no_of_lines=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00510"></a>00510     <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;T &quot;</span>){
<a name="l00511"></a>00511         _mode=mCOMMENT;
<a name="l00512"></a>00512         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;8; ++i){
<a name="l00513"></a>00513             cmd &gt;&gt; dump &gt;&gt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00514"></a>00514         }
<a name="l00515"></a>00515         cmd&gt;&gt;no_of_lines;
<a name="l00516"></a>00516         <span class="keywordflow">if</span>(no_of_lines==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00517"></a>00517             _no_of_lines=1;
<a name="l00518"></a>00518         }<span class="keywordflow">else</span>{
<a name="l00519"></a>00519             _no_of_lines=atoi(no_of_lines.c_str());
<a name="l00520"></a>00520         }   
<a name="l00521"></a>00521     }<span class="keywordflow">else</span>{
<a name="l00522"></a>00522         <span class="keywordflow">if</span>(_no_of_lines!=0){
<a name="l00523"></a>00523             --_no_of_lines;
<a name="l00524"></a>00524             <span class="keywordflow">if</span>(_no_of_lines==0){
<a name="l00525"></a>00525                 _mode=mATTRIBUTE;
<a name="l00526"></a>00526             }
<a name="l00527"></a>00527         }
<a name="l00528"></a>00528     }
<a name="l00529"></a>00529     <span class="keywordflow">return</span> x;
<a name="l00530"></a>00530 }
<a name="l00531"></a>00531 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00532"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a6c16c20ae8bb07669183e0a3a6c87da8">00532</a> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* LANG_GEDA::parse_command(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* x)
<a name="l00533"></a>00533 {
<a name="l00534"></a>00534     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_command&quot;</span>);
<a name="l00535"></a>00535     assert(x);
<a name="l00536"></a>00536     x-&gt;<a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html#a283dfff6d57d2322fe52fd4ee8f216f3">set</a>(cmd.<a class="code" href="../../db/d85/class_c_s.html#a189029b3d74f0ace272d353317f14c1b">fullstring</a>());
<a name="l00537"></a>00537     <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* scope = (x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>()) ? x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>()-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>() : &amp;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a0f2dd616de196fb4f933609cc41ce588">CARD_LIST::card_list</a>;
<a name="l00538"></a>00538 
<a name="l00539"></a>00539     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00540"></a>00540     <a class="code" href="../../da/d8a/class_c_m_d.html#abcc8db5129f79cf492ae6507bd25b23c">CMD::cmdproc</a>(cmd, scope);
<a name="l00541"></a>00541     <span class="keyword">delete</span> x;
<a name="l00542"></a>00542     <span class="keywordflow">return</span> NULL;
<a name="l00543"></a>00543 }
<a name="l00544"></a>00544 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00545"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ab3f25c95d1f22ace901d04a6904a8c0d">00545</a> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* LANG_GEDA::parse_paramset(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* x)
<a name="l00546"></a>00546 {
<a name="l00547"></a>00547     assert(x);
<a name="l00548"></a>00548     <span class="keywordflow">return</span> NULL;
<a name="l00549"></a>00549 }
<a name="l00550"></a>00550 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00551"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#acd0ba269ae92d52297fd36a189889514">00551</a> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* LANG_GEDA::parse_module(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x)
<a name="l00552"></a>00552 {
<a name="l00553"></a>00553   <span class="comment">//To parse heirarchical schematics</span>
<a name="l00554"></a>00554   <span class="keywordflow">return</span> NULL;
<a name="l00555"></a>00555 }
<a name="l00556"></a>00556 
<a name="l00557"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#abb190d7c72473be3e72c16323673e73e">00557</a> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* LANG_GEDA::parse_componmod(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x)
<a name="l00558"></a>00558 {
<a name="l00559"></a>00559     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_componmod&quot;</span>);
<a name="l00560"></a>00560     assert(x);
<a name="l00561"></a>00561     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00562"></a>00562     std::string type = find_type_in_string(cmd);
<a name="l00563"></a>00563     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;found string type&quot;</span>);
<a name="l00564"></a>00564     assert(type==<span class="stringliteral">&quot;C&quot;</span>);
<a name="l00565"></a>00565     std::string component_x, component_y, mirror, angle, dump,basename;
<a name="l00566"></a>00566     <span class="keywordtype">bool</span> isgraphical=<span class="keyword">false</span>;
<a name="l00567"></a>00567     cmd&gt;&gt;<span class="stringliteral">&quot;C&quot;</span>;
<a name="l00568"></a>00568     cmd&gt;&gt;component_x&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;component_y&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;dump&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;angle&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;mirror&gt;&gt;<span class="stringliteral">&quot; &quot;</span>&gt;&gt;basename;
<a name="l00569"></a>00569     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got params&quot;</span>);
<a name="l00570"></a>00570     <span class="comment">//open the basename to get the ports and their placements</span>
<a name="l00571"></a>00571     <span class="comment">//parse_ports(newcmd,x);</span>
<a name="l00572"></a>00572     x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a790ef85fcd3deab6706f18636353a2c3">set_label</a>(<span class="stringliteral">&quot;!_&quot;</span>+basename);
<a name="l00573"></a>00573     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;set labels&quot;</span>);
<a name="l00574"></a>00574     std::vector&lt;std::string*&gt; coord=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aba731d3f747484cebb08613fadf9cfaa">parse_symbol_file</a>(x,basename);
<a name="l00575"></a>00575     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;parsed symbol file&quot;</span>);
<a name="l00576"></a>00576     <span class="keywordflow">if</span>(coord.size()==0){
<a name="l00577"></a>00577         isgraphical=<span class="keyword">true</span>;
<a name="l00578"></a>00578     }
<a name="l00579"></a>00579     <span class="keywordflow">if</span> (isgraphical==<span class="keyword">true</span>) {
<a name="l00580"></a>00580         <span class="keywordflow">return</span> NULL;
<a name="l00581"></a>00581     }
<a name="l00582"></a>00582     <span class="keywordflow">else</span>{
<a name="l00583"></a>00583         cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00584"></a>00584     }
<a name="l00585"></a>00585     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got out&quot;</span>);
<a name="l00586"></a>00586     <span class="comment">/*type = &quot;graphical&quot;;</span>
<a name="l00587"></a>00587 <span class="comment">    x-&gt;set_dev_type(type);</span>
<a name="l00588"></a>00588 <span class="comment">    std::cout&lt;&lt;x-&gt;dev_type()&lt;&lt;&quot; is the dev type\n&quot;;</span>
<a name="l00589"></a>00589 <span class="comment">    */</span>
<a name="l00590"></a>00590     <span class="keywordflow">return</span> x;
<a name="l00591"></a>00591 }
<a name="l00592"></a>00592 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00593"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#aed6f07d31d86bf045bf03c4f5c6d9f38">00593</a> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* LANG_GEDA::parse_instance(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00594"></a>00594 {
<a name="l00595"></a>00595     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_instance&quot;</span>);
<a name="l00596"></a>00596     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>();
<a name="l00597"></a>00597     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a97455c2347820f2b807c803d50c1dea2">parse_type</a>(cmd, x); <span class="comment">//parse type will parse the component type and set_dev_type</span>
<a name="l00598"></a>00598     <span class="keywordflow">if</span> (x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()==<span class="stringliteral">&quot;net&quot;</span>) {
<a name="l00599"></a>00599     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a26319fb1231594ccbea1b3ddaa89eb06">parse_net</a>(cmd,x);
<a name="l00600"></a>00600     }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00601"></a>00601     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5d3cdb43e55f78e3c7245affc9b05786">parse_place</a>(cmd,x);
<a name="l00602"></a>00602     }<span class="keywordflow">else</span> {
<a name="l00603"></a>00603     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5e603f26a6cd69ced4a25ab9f65e64cf">parse_component</a>(cmd,x);
<a name="l00604"></a>00604     }
<a name="l00605"></a>00605     <span class="comment">//No warnings needed.</span>
<a name="l00606"></a>00606     <span class="comment">//cmd.check(bWARNING, &quot;what&#39;s ins this?&quot;);</span>
<a name="l00607"></a>00607     <span class="keywordflow">return</span> x;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609 }
<a name="l00610"></a>00610 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00611"></a>00611 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00612"></a>00612 <span class="comment">/* find_type_in_string : specific to each language which gives the type of the</span>
<a name="l00613"></a>00613 <span class="comment"> * cmd Eg: verilog : comment ,resistor etc</span>
<a name="l00614"></a>00614 <span class="comment"> * In Gschem the broad high level types are</span>
<a name="l00615"></a>00615 <span class="comment"> * The following don&#39;t mean anything to the electrical part of the circuit and</span>
<a name="l00616"></a>00616 <span class="comment"> * they are of type graphical</span>
<a name="l00617"></a>00617 <span class="comment"> *  version  v    * circle   V</span>
<a name="l00618"></a>00618 <span class="comment"> *  line     L    * arc      A</span>
<a name="l00619"></a>00619 <span class="comment"> *  picture  G    * path     H</span>
<a name="l00620"></a>00620 <span class="comment"> *  box      B    * text     T (not attributes)</span>
<a name="l00621"></a>00621 <span class="comment"> * The following have electrical meaning and are of type</span>
<a name="l00622"></a>00622 <span class="comment"> *  net          N</span>
<a name="l00623"></a>00623 <span class="comment"> *  bus          U</span>
<a name="l00624"></a>00624 <span class="comment"> *  pin          P</span>
<a name="l00625"></a>00625 <span class="comment"> *  component    C</span>
<a name="l00626"></a>00626 <span class="comment"> *  attributes   T (enclosed in {})  // don&#39;t include in find_type_in_string</span>
<a name="l00627"></a>00627 <span class="comment"> * Will check for type graphical (type=dev_comment) else type will be</span>
<a name="l00628"></a>00628 <span class="comment"> * net or bus or pin or component\</span>
<a name="l00629"></a>00629 <span class="comment"> */</span>
<a name="l00630"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#af6b409e3eb2cf7d30080fbb989e0989d">00630</a> std::string LANG_GEDA::find_type_in_string(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd)
<a name="l00631"></a>00631 {
<a name="l00632"></a>00632     <span class="keywordtype">unsigned</span> here = cmd.<a class="code" href="../../db/d85/class_c_s.html#af9492594a774fd94b30323dab5c98716">cursor</a>(); <span class="comment">//store cursor position to reset back later</span>
<a name="l00633"></a>00633     std::string type;   <span class="comment">//stores type : should check device attribute..</span>
<a name="l00634"></a>00634     <span class="comment">//graphical=[&quot;v&quot;,&quot;L&quot;,&quot;G&quot;,&quot;B&quot;,&quot;V&quot;,&quot;A&quot;,&quot;H&quot;,&quot;T&quot;]</span>
<a name="l00635"></a>00635     <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;v &quot;</span> || cmd &gt;&gt; <span class="stringliteral">&quot;L &quot;</span> || cmd &gt;&gt; <span class="stringliteral">&quot;G &quot;</span> || cmd &gt;&gt; <span class="stringliteral">&quot;B &quot;</span> || cmd &gt;&gt;<span class="stringliteral">&quot;V &quot;</span>
<a name="l00636"></a>00636         || cmd &gt;&gt; <span class="stringliteral">&quot;A &quot;</span> || cmd &gt;&gt; <span class="stringliteral">&quot;H &quot;</span> || cmd &gt;&gt; <span class="stringliteral">&quot;T &quot;</span> ){ type=<span class="stringliteral">&quot;dev_comment&quot;</span>;}
<a name="l00637"></a>00637     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;N &quot;</span>){ type=<span class="stringliteral">&quot;net&quot;</span>;}
<a name="l00638"></a>00638     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;U &quot;</span>){ type=<span class="stringliteral">&quot;bus&quot;</span>;}
<a name="l00639"></a>00639     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;P &quot;</span>){ type=<span class="stringliteral">&quot;pin&quot;</span>;}
<a name="l00640"></a>00640     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;C &quot;</span>){ 
<a name="l00641"></a>00641         <span class="keywordflow">if</span>(_componentmod){
<a name="l00642"></a>00642             type=<span class="stringliteral">&quot;C&quot;</span>;
<a name="l00643"></a>00643         }<span class="keywordflow">else</span>{
<a name="l00644"></a>00644             type=_componentname;
<a name="l00645"></a>00645         }
<a name="l00646"></a>00646     }
<a name="l00647"></a>00647     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd &gt;&gt; <span class="stringliteral">&quot;place &quot;</span>){ type=<span class="stringliteral">&quot;place&quot;</span>;}
<a name="l00648"></a>00648     <span class="keywordflow">else</span> {  
<a name="l00649"></a>00649         <span class="keywordflow">switch</span>(_mode){
<a name="l00650"></a>00650             <span class="keywordflow">case</span> mCOMMENT: <span class="keywordflow">return</span> <span class="stringliteral">&quot;dev_comment&quot;</span>;
<a name="l00651"></a>00651             <span class="keywordflow">default</span> : cmd &gt;&gt; type;
<a name="l00652"></a>00652         } 
<a name="l00653"></a>00653     } <span class="comment">//Not matched with the type. What now?</span>
<a name="l00654"></a>00654     cmd.<a class="code" href="../../db/d85/class_c_s.html#aaea6a1e13e3ab2f756db42ca8dd121cb">reset</a>(here);<span class="comment">//Reset cursor back to the position that</span>
<a name="l00655"></a>00655                     <span class="comment">//has been started with at beginning</span>
<a name="l00656"></a>00656     <span class="keywordflow">return</span> type;    <span class="comment">// returns the type of the string</span>
<a name="l00657"></a>00657 }
<a name="l00658"></a>00658 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00659"></a>00659 <span class="comment">/* parse_top_item :</span>
<a name="l00660"></a>00660 <span class="comment"> * The top default thing that is parsed. Here new__instances are</span>
<a name="l00661"></a>00661 <span class="comment"> * created and (TODO)post processing of nets is done</span>
<a name="l00662"></a>00662 <span class="comment"> */</span>
<a name="l00663"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a164f7c8baeadf6b7acfca754153a45b5">00663</a> <span class="keywordtype">void</span> LANG_GEDA::parse_top_item(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00664"></a>00664 {
<a name="l00665"></a>00665     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;got into parse_top_item&quot;</span>);
<a name="l00666"></a>00666     <span class="keywordflow">if</span>(!_gotaline){
<a name="l00667"></a>00667         cmd.<a class="code" href="../../db/d85/class_c_s.html#adee2e1d2207260af7f8ed55df7367d41">get_line</a>(<span class="stringliteral">&quot;gnucap-geda&gt;&quot;</span>);
<a name="l00668"></a>00668         <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;false _gotaline&quot;</span>);
<a name="l00669"></a>00669     }<span class="keywordflow">else</span>{
<a name="l00670"></a>00670         _gotaline=<span class="keyword">false</span>;
<a name="l00671"></a>00671         <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;true _gotaline&quot;</span>);
<a name="l00672"></a>00672     }
<a name="l00673"></a>00673     new__instance(cmd, NULL, Scope);
<a name="l00674"></a>00674 }
<a name="l00675"></a>00675 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00676"></a>00676 <span class="comment">// Code for Printing schematic follows</span>
<a name="l00677"></a>00677 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00678"></a>00678 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00679"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a9887be62fced11d1a88b0a6f62fc5e6d">00679</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a9887be62fced11d1a88b0a6f62fc5e6d">print_type</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00680"></a>00680 {
<a name="l00681"></a>00681   assert(x);
<a name="l00682"></a>00682   o &lt;&lt; x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>();
<a name="l00683"></a>00683 }
<a name="l00684"></a>00684 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00685"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a4155adf053c7955b99557bb0ed337482">00685</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a4155adf053c7955b99557bb0ed337482">print_label</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00686"></a>00686 {
<a name="l00687"></a>00687   assert(x);
<a name="l00688"></a>00688   o &lt;&lt; x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>();
<a name="l00689"></a>00689 }
<a name="l00690"></a>00690 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00691"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5949f32b154cf834007929d32b86d19c">00691</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5949f32b154cf834007929d32b86d19c">print_node_xy</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o,<span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x,<span class="keywordtype">int</span> _portindex)
<a name="l00692"></a>00692 {
<a name="l00693"></a>00693     std::string _nodename=x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a99ac0da644b8d8b33e31233fb82f12d3">port_value</a>(_portindex);
<a name="l00694"></a>00694     <span class="keywordflow">for</span>(<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a09cb5fe86d7450c3afe61d31558516eb">CARD_LIST::const_iterator</a> ci=x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a215ac8c5830719ceff1ad3b25ad2864a">begin</a>(); ci!=x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a62d2e7c41c19b588ed74b4247600c875">end</a>(); ++ci) {
<a name="l00695"></a>00695         <span class="keywordflow">if</span>((*ci)-&gt;dev_type()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00696"></a>00696             <span class="keywordflow">if</span>(static_cast&lt;COMPONENT*&gt;(*ci)-&gt;port_value(0)==_nodename){
<a name="l00697"></a>00697                 <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got some place!&quot;</span>);
<a name="l00698"></a>00698                 o &lt;&lt; (*ci)-&gt;param_value(1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (*ci)-&gt;param_value(0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;
<a name="l00699"></a>00699             }
<a name="l00700"></a>00700         }
<a name="l00701"></a>00701     }
<a name="l00702"></a>00702 }
<a name="l00703"></a>00703 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00704"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">00704</a> <span class="keyword">static</span> std::string <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">findcomponentposition</a>(std::string* absxy, std::string* pinxy, std::string angle, std::string mirror)
<a name="l00705"></a>00705 {
<a name="l00706"></a>00706     <span class="keywordtype">char</span> newx[10];
<a name="l00707"></a>00707     <span class="keywordtype">char</span> newy[10];
<a name="l00708"></a>00708     <span class="keywordflow">if</span>(mirror==<span class="stringliteral">&quot;0&quot;</span>){
<a name="l00709"></a>00709         <span class="keywordflow">switch</span>(atoi(angle.c_str())){
<a name="l00710"></a>00710         <span class="keywordflow">case</span> 0:
<a name="l00711"></a>00711             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())-atoi(pinxy[0].c_str()));
<a name="l00712"></a>00712             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())-atoi(pinxy[1].c_str()));
<a name="l00713"></a>00713             <span class="keywordflow">break</span>;
<a name="l00714"></a>00714         <span class="keywordflow">case</span> 90:
<a name="l00715"></a>00715             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())+atoi(pinxy[1].c_str()));
<a name="l00716"></a>00716             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())-atoi(pinxy[0].c_str()));
<a name="l00717"></a>00717             <span class="keywordflow">break</span>;
<a name="l00718"></a>00718         <span class="keywordflow">case</span> 180:
<a name="l00719"></a>00719             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())+atoi(pinxy[0].c_str()));
<a name="l00720"></a>00720             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())+atoi(pinxy[1].c_str()));
<a name="l00721"></a>00721             <span class="keywordflow">break</span>;
<a name="l00722"></a>00722         <span class="keywordflow">case</span> 270:
<a name="l00723"></a>00723             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())-atoi(pinxy[1].c_str()));
<a name="l00724"></a>00724             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())+atoi(pinxy[0].c_str()));
<a name="l00725"></a>00725             <span class="keywordflow">break</span>;
<a name="l00726"></a>00726         }
<a name="l00727"></a>00727     }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(mirror==<span class="stringliteral">&quot;1&quot;</span>){
<a name="l00728"></a>00728         <span class="keywordflow">switch</span>(atoi(angle.c_str())){
<a name="l00729"></a>00729         <span class="keywordflow">case</span> 0:
<a name="l00730"></a>00730             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())+atoi(pinxy[0].c_str()));
<a name="l00731"></a>00731             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())-atoi(pinxy[1].c_str()));
<a name="l00732"></a>00732             <span class="keywordflow">break</span>;
<a name="l00733"></a>00733         <span class="keywordflow">case</span> 90:
<a name="l00734"></a>00734             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())+atoi(pinxy[1].c_str()));
<a name="l00735"></a>00735             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())+atoi(pinxy[0].c_str()));
<a name="l00736"></a>00736             <span class="keywordflow">break</span>;
<a name="l00737"></a>00737         <span class="keywordflow">case</span> 180:
<a name="l00738"></a>00738             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())-atoi(pinxy[0].c_str()));
<a name="l00739"></a>00739             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())+atoi(pinxy[1].c_str()));
<a name="l00740"></a>00740             <span class="keywordflow">break</span>;
<a name="l00741"></a>00741         <span class="keywordflow">case</span> 270:
<a name="l00742"></a>00742             sprintf(newx,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[0].c_str())-atoi(pinxy[1].c_str()));
<a name="l00743"></a>00743             sprintf(newy,<span class="stringliteral">&quot;%d&quot;</span>,atoi(absxy[1].c_str())-atoi(pinxy[0].c_str()));
<a name="l00744"></a>00744             <span class="keywordflow">break</span>;
<a name="l00745"></a>00745         }
<a name="l00746"></a>00746     }<span class="keywordflow">else</span>{
<a name="l00747"></a>00747     <span class="comment">//not correct mirror!</span>
<a name="l00748"></a>00748     }
<a name="l00749"></a>00749     std::string sx=newx;
<a name="l00750"></a>00750     std::string sy=newy;
<a name="l00751"></a>00751     <span class="keywordflow">return</span> sx+<span class="stringliteral">&quot; &quot;</span>+sy;
<a name="l00752"></a>00752 }
<a name="l00753"></a>00753 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00754"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aaea23da8c932e4dc8c05862c61894061">00754</a> <span class="keyword">static</span> std::string* <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aaea23da8c932e4dc8c05862c61894061">find_place</a>(<span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x, std::string _portvalue)
<a name="l00755"></a>00755 {
<a name="l00756"></a>00756     <span class="keywordflow">for</span>(<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a09cb5fe86d7450c3afe61d31558516eb">CARD_LIST::const_iterator</a> ci=x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a215ac8c5830719ceff1ad3b25ad2864a">begin</a>(); ci!=x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a62d2e7c41c19b588ed74b4247600c875">end</a>(); ++ci) {
<a name="l00757"></a>00757         <span class="keywordflow">if</span>((*ci)-&gt;dev_type()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00758"></a>00758             <span class="keywordflow">if</span>(static_cast&lt;COMPONENT*&gt;(*ci)-&gt;port_value(0)==_portvalue){
<a name="l00759"></a>00759                 <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got the coord&quot;</span>);
<a name="l00760"></a>00760                 std::string*  a= <span class="keyword">new</span> std::string[2];
<a name="l00761"></a>00761                 a[0]=(*ci)-&gt;param_value(1);     
<a name="l00762"></a>00762                 a[1]=(*ci)-&gt;param_value(0);
<a name="l00763"></a>00763                 <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got out of find_place&quot;</span>);
<a name="l00764"></a>00764                 <span class="keywordflow">return</span> a;
<a name="l00765"></a>00765             }
<a name="l00766"></a>00766         }
<a name="l00767"></a>00767     }
<a name="l00768"></a>00768     <span class="keywordflow">return</span> NULL;
<a name="l00769"></a>00769     <span class="comment">//To return place coordinates after searching for it.</span>
<a name="l00770"></a>00770 }
<a name="l00771"></a>00771 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00772"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a41f3e039de6147bc28c0ef4a7021f232">00772</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a41f3e039de6147bc28c0ef4a7021f232">print_net</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00773"></a>00773 {
<a name="l00774"></a>00774     assert(x);
<a name="l00775"></a>00775     assert(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()==<span class="stringliteral">&quot;net&quot;</span>);
<a name="l00776"></a>00776     o &lt;&lt; <span class="stringliteral">&quot;N &quot;</span>;
<a name="l00777"></a>00777     <span class="comment">//print_coordinates(node); //Will search through the CARD_LIST to find the node</span>
<a name="l00778"></a>00778     <span class="comment">//o&lt;&lt; node0x &lt;&lt; node1x</span>
<a name="l00779"></a>00779     <span class="comment">//o&lt;&lt; node1x &lt;&lt; node2x</span>
<a name="l00780"></a>00780     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5949f32b154cf834007929d32b86d19c">print_node_xy</a>(o,x,0);
<a name="l00781"></a>00781     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a5949f32b154cf834007929d32b86d19c">print_node_xy</a>(o,x,1);
<a name="l00782"></a>00782     <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a47920ef7bbfaa40456af85808eb760b7">value</a>().<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>()!=<span class="stringliteral">&quot;&quot;</span>){
<a name="l00783"></a>00783         o  &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a47920ef7bbfaa40456af85808eb760b7">value</a>().<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>()&lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>; <span class="comment">//The color</span>
<a name="l00784"></a>00784     }<span class="keywordflow">else</span>{
<a name="l00785"></a>00785         o &lt;&lt; <span class="stringliteral">&quot;4\n&quot;</span>;
<a name="l00786"></a>00786     }
<a name="l00787"></a>00787 }
<a name="l00788"></a>00788 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00789"></a>00789 <span class="comment">/* C x y selectable angle mirror basename</span>
<a name="l00790"></a>00790 <span class="comment"> * {</span>
<a name="l00791"></a>00791 <span class="comment"> *  &lt;params&gt;</span>
<a name="l00792"></a>00792 <span class="comment"> * }</span>
<a name="l00793"></a>00793 <span class="comment"> */</span>
<a name="l00794"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a6fffdfdb084e086e090d34553dc3bef7">00794</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a6fffdfdb084e086e090d34553dc3bef7">print_component</a>(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00795"></a>00795 {
<a name="l00796"></a>00796     assert(x);
<a name="l00797"></a>00797     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got into print_component&quot;</span>);
<a name="l00798"></a>00798     std::string _x,_y,_angle,_mirror;
<a name="l00799"></a>00799     o &lt;&lt;  <span class="stringliteral">&quot;C &quot;</span>;
<a name="l00800"></a>00800     std::string _basename=x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a48cb97ddcd015de7eacc9c68e8ad4ec1">param_count</a>()-1);
<a name="l00801"></a>00801     <span class="comment">//go through the symbol file and get the relative pin positions</span>
<a name="l00802"></a>00802     std::vector&lt;std::string*&gt; coordinates=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aba731d3f747484cebb08613fadf9cfaa">parse_symbol_file</a>(NULL, _basename);
<a name="l00803"></a>00803     std::vector&lt;std::string*&gt; abscoord;
<a name="l00804"></a>00804     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0; ii&lt;coordinates.size(); ++ii){
<a name="l00805"></a>00805         abscoord.push_back(<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#aaea23da8c932e4dc8c05862c61894061">find_place</a>(x,x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a99ac0da644b8d8b33e31233fb82f12d3">port_value</a>(ii)));
<a name="l00806"></a>00806     }
<a name="l00807"></a>00807     std::string angle[4]={<span class="stringliteral">&quot;0&quot;</span>,<span class="stringliteral">&quot;90&quot;</span>,<span class="stringliteral">&quot;180&quot;</span>,<span class="stringliteral">&quot;270&quot;</span>};
<a name="l00808"></a>00808     <span class="keywordtype">int</span> index=0; 
<a name="l00809"></a>00809     std::string xy=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00810"></a>00810     <span class="keywordtype">bool</span> gottheanglemirror=<span class="keyword">false</span>;
<a name="l00811"></a>00811     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ii=0; ii&lt;4 ; ++ii){
<a name="l00812"></a>00812         <span class="keywordflow">if</span>(not gottheanglemirror){
<a name="l00813"></a>00813             _mirror=<span class="stringliteral">&quot;0&quot;</span>;
<a name="l00814"></a>00814             _angle=angle[ii];
<a name="l00815"></a>00815             xy=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00816"></a>00816             gottheanglemirror=<span class="keyword">true</span>;
<a name="l00817"></a>00817             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> pinind=0; pinind&lt;coordinates.size(); ++pinind){
<a name="l00818"></a>00818                 <span class="keywordflow">if</span> (xy==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00819"></a>00819                     xy=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">findcomponentposition</a>(abscoord[pinind],coordinates[pinind],_angle,_mirror);
<a name="l00820"></a>00820                 }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(xy!=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">findcomponentposition</a>(abscoord[pinind],coordinates[pinind],_angle,_mirror)){
<a name="l00821"></a>00821                         gottheanglemirror=<span class="keyword">false</span>;
<a name="l00822"></a>00822                         <span class="keywordflow">break</span>;
<a name="l00823"></a>00823                 }
<a name="l00824"></a>00824             }
<a name="l00825"></a>00825             <span class="keywordflow">if</span> (gottheanglemirror) {
<a name="l00826"></a>00826                 o &lt;&lt; xy &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <span class="stringliteral">&quot;1&quot;</span> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _angle &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _mirror &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _basename&lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00827"></a>00827             }
<a name="l00828"></a>00828             <span class="keywordflow">else</span>{
<a name="l00829"></a>00829                 _mirror=<span class="stringliteral">&quot;1&quot;</span>;
<a name="l00830"></a>00830                 xy=<span class="stringliteral">&quot;&quot;</span>;
<a name="l00831"></a>00831                 gottheanglemirror=<span class="keyword">true</span>;
<a name="l00832"></a>00832                 <span class="keywordflow">for</span>(<span class="keywordtype">int</span> pinind=0; pinind&lt;coordinates.size(); ++pinind){
<a name="l00833"></a>00833                     <span class="keywordflow">if</span> (xy==<span class="stringliteral">&quot;&quot;</span>){
<a name="l00834"></a>00834                         xy=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">findcomponentposition</a>(abscoord[pinind],coordinates[pinind],_angle,_mirror);
<a name="l00835"></a>00835                     }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(xy!=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#afe9fd5b3c99535bd04bf7aafcc22b15f">findcomponentposition</a>(abscoord[pinind],coordinates[pinind],_angle,_mirror)){
<a name="l00836"></a>00836                             gottheanglemirror=<span class="keyword">false</span>;
<a name="l00837"></a>00837                             <span class="keywordflow">break</span>;
<a name="l00838"></a>00838                     }
<a name="l00839"></a>00839                 }
<a name="l00840"></a>00840                 <span class="keywordflow">if</span> (gottheanglemirror) {
<a name="l00841"></a>00841                     o &lt;&lt; xy &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <span class="stringliteral">&quot;1&quot;</span> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _angle &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _mirror &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; _basename&lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00842"></a>00842                 }
<a name="l00843"></a>00843             }
<a name="l00844"></a>00844         }
<a name="l00845"></a>00845     }
<a name="l00846"></a>00846     <span class="comment">//map those with the absolute positions of nodes and place the device</span>
<a name="l00847"></a>00847     <span class="comment">//such that it is in between the nodes.</span>
<a name="l00848"></a>00848     <span class="comment">//std::vector&lt;std::string*&gt; coord = parse_symbol_file(static_cast&lt;COMPONENT*&gt;(x) , _basename);</span>
<a name="l00849"></a>00849 
<a name="l00850"></a>00850     <span class="comment">//Got the x and y</span>
<a name="l00851"></a>00851     <span class="comment">//To print angle mirror etc, to get from the intelligent positioning</span>
<a name="l00852"></a>00852 
<a name="l00853"></a>00853     <span class="comment">//*To check if there are any attributes at all first</span>
<a name="l00854"></a>00854     <span class="comment">//    If not return;</span>
<a name="l00855"></a>00855     <span class="keywordtype">bool</span> _parameters=<span class="keyword">false</span>;
<a name="l00856"></a>00856     <span class="keywordtype">bool</span> _label=<span class="keyword">false</span>;
<a name="l00857"></a>00857     <span class="keywordtype">bool</span> _devtype=<span class="keyword">false</span>;
<a name="l00858"></a>00858     <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>()!=<span class="stringliteral">&quot;&quot;</span>){
<a name="l00859"></a>00859         _label=<span class="keyword">true</span>;
<a name="l00860"></a>00860     }
<a name="l00861"></a>00861     <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a48cb97ddcd015de7eacc9c68e8ad4ec1">param_count</a>()&gt;6){
<a name="l00862"></a>00862             _parameters=<span class="keyword">true</span>;
<a name="l00863"></a>00863     }
<a name="l00864"></a>00864     <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()!=<span class="stringliteral">&quot;&quot;</span> and (x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()).substr(0,2)!=<span class="stringliteral">&quot;!_&quot;</span>){
<a name="l00865"></a>00865         _devtype=<span class="keyword">true</span>;
<a name="l00866"></a>00866     }
<a name="l00867"></a>00867     <span class="keywordflow">if</span> (_label or _parameters or _devtype){
<a name="l00868"></a>00868         o &lt;&lt; <span class="stringliteral">&quot;{\n&quot;</span>;
<a name="l00869"></a>00869         <span class="keywordflow">if</span>(_devtype){
<a name="l00870"></a>00870             o &lt;&lt; <span class="stringliteral">&quot;T &quot;</span>&lt;&lt; xy &lt;&lt; <span class="stringliteral">&quot; 5 10 0 1 0 0 1\n&quot;</span>;
<a name="l00871"></a>00871             o &lt;&lt; <span class="stringliteral">&quot;device=&quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00872"></a>00872         }
<a name="l00873"></a>00873         <span class="keywordflow">if</span>(_label){
<a name="l00874"></a>00874             o &lt;&lt; <span class="stringliteral">&quot;T &quot;</span>&lt;&lt; xy &lt;&lt; <span class="stringliteral">&quot; 5 10 0 1 0 0 1\n&quot;</span>;
<a name="l00875"></a>00875             o &lt;&lt; <span class="stringliteral">&quot;refdes=&quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00876"></a>00876         }
<a name="l00877"></a>00877         <span class="keywordflow">if</span>(_parameters){
<a name="l00878"></a>00878             <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a48cb97ddcd015de7eacc9c68e8ad4ec1">param_count</a>()-1; i&gt;=0 ; --i){
<a name="l00879"></a>00879                 <span class="keywordflow">if</span> (!(x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(i)==<span class="stringliteral">&quot;NA( 0.)&quot;</span> or x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(i)==<span class="stringliteral">&quot;NA( NA)&quot;</span> or x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(i)==<span class="stringliteral">&quot;NA( 27.)&quot;</span> or x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ae52bdb0b0acaf64682b7c9dd1656aada">param_name</a>(i)==<span class="stringliteral">&quot;basename&quot;</span>)){
<a name="l00880"></a>00880                     o &lt;&lt; <span class="stringliteral">&quot;T &quot;</span>&lt;&lt; xy &lt;&lt; <span class="stringliteral">&quot; 5 10 0 1 0 0 1\n&quot;</span>;
<a name="l00881"></a>00881                     o &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ae52bdb0b0acaf64682b7c9dd1656aada">param_name</a>(i) &lt;&lt; <span class="stringliteral">&quot;=&quot;</span> &lt;&lt; x-&gt;<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a1948b2816aae0bd182df10a627e7bdf3">param_value</a>(i) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;
<a name="l00882"></a>00882                 }
<a name="l00883"></a>00883             }
<a name="l00884"></a>00884         }
<a name="l00885"></a>00885     o &lt;&lt; <span class="stringliteral">&quot;}\n&quot;</span>;
<a name="l00886"></a>00886     }
<a name="l00887"></a>00887 }
<a name="l00888"></a>00888 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00889"></a>00889 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00890"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a69dca0829a9dfab4aff65abc3d922d59">00890</a> <span class="keywordtype">void</span> LANG_GEDA::print_paramset(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>* x)
<a name="l00891"></a>00891 {
<a name="l00892"></a>00892     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got into print paramset&quot;</span>);
<a name="l00893"></a>00893     <span class="keywordflow">return</span>;
<a name="l00894"></a>00894 }
<a name="l00895"></a>00895 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00896"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a8286fe70bbc979329f85b8b5ded113af">00896</a> <span class="keywordtype">void</span> LANG_GEDA::print_module(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* x)
<a name="l00897"></a>00897 {
<a name="l00898"></a>00898   assert(x);
<a name="l00899"></a>00899   <span class="comment">//o&lt;&lt;x-&gt;short_label();</span>
<a name="l00900"></a>00900   <span class="comment">//o&lt;&lt;&quot;\n&quot;;</span>
<a name="l00901"></a>00901   assert(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>());
<a name="l00902"></a>00902   <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>().find(<span class="stringliteral">&quot;!_&quot;</span>)!=std::string::npos){
<a name="l00903"></a>00903     <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got a placeholding model&quot;</span>);
<a name="l00904"></a>00904     <span class="keywordflow">return</span>;
<a name="l00905"></a>00905   }
<a name="l00906"></a>00906 }
<a name="l00907"></a>00907 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00908"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ab190e11444bb83879c218a7b58f1e1b7">00908</a> <span class="keywordtype">void</span> LANG_GEDA::print_instance(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html">COMPONENT</a>* x)
<a name="l00909"></a>00909 {
<a name="l00910"></a>00910   <a class="code" href="../../d6/dda/io__trace_8h.html#abc64ef0d63ccea49713a9038dd7d7b78">trace0</a>(<span class="stringliteral">&quot;Got into print_instance in geda!&quot;</span>);
<a name="l00911"></a>00911  <span class="comment">// print_type(o, x);</span>
<a name="l00912"></a>00912  <span class="comment">// print_label(o, x);</span>
<a name="l00913"></a>00913   <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()==<span class="stringliteral">&quot;net&quot;</span>){
<a name="l00914"></a>00914     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a41f3e039de6147bc28c0ef4a7021f232">print_net</a>(o, x);
<a name="l00915"></a>00915   }
<a name="l00916"></a>00916   <span class="keywordflow">else</span> <span class="keywordflow">if</span>(x-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a5604e0c14c4bcc8ff9fbf418b4c8d40d">dev_type</a>()==<span class="stringliteral">&quot;place&quot;</span>){
<a name="l00917"></a>00917  }<span class="keywordflow">else</span>{
<a name="l00918"></a>00918     <span class="comment">//Component</span>
<a name="l00919"></a>00919     <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a6fffdfdb084e086e090d34553dc3bef7">print_component</a>(o ,x);
<a name="l00920"></a>00920   }
<a name="l00921"></a>00921   }
<a name="l00922"></a>00922 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00923"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a254cad3d9e11c87bdadf368725931932">00923</a> <span class="keywordtype">void</span> LANG_GEDA::print_comment(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html">DEV_COMMENT</a>* x)
<a name="l00924"></a>00924 {
<a name="l00925"></a>00925   assert(x);
<a name="l00926"></a>00926   o &lt;&lt; x-&gt;<a class="code" href="../../d1/db9/class_d_e_v___c_o_m_m_e_n_t.html#af540770552c49fa3f2afa30956bc7c5d">comment</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00927"></a>00927 }
<a name="l00928"></a>00928 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00929"></a><a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a8c28309c8dd436b8c84fbc2230485894">00929</a> <span class="keywordtype">void</span> LANG_GEDA::print_command(<a class="code" href="../../dc/d18/class_o_m_s_t_r_e_a_m.html">OMSTREAM</a>&amp; o, <span class="keyword">const</span> <a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html">DEV_DOT</a>* x)
<a name="l00930"></a>00930 {
<a name="l00931"></a>00931   assert(x);
<a name="l00932"></a>00932   o &lt;&lt; x-&gt;<a class="code" href="../../d7/d7d/class_d_e_v___d_o_t.html#a48ab313a394658e33f463865dac0fdc6">s</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;
<a name="l00933"></a>00933 }
<a name="l00934"></a>00934 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00935"></a>00935 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00936"></a><a class="code" href="../../d0/d46/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___g_s_c_h_e_m.html">00936</a> <span class="keyword">class </span><a class="code" href="../../d0/d46/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___g_s_c_h_e_m.html">CMD_GSCHEM</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00937"></a>00937 <span class="keyword">public</span>:
<a name="l00938"></a><a class="code" href="../../d0/d46/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___g_s_c_h_e_m.html#a3a2cad7bedd3a820604937467e020369">00938</a>     <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00939"></a>00939     {
<a name="l00940"></a>00940       <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a456997b61f98ee9d12a4e3f9c02e3a43">_mode</a>=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a2f30bfb70f53173dd76270f8ab1009f5ae02eee589592639ddf1c205475d6acc3">mATTRIBUTE</a>;
<a name="l00941"></a>00941       <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad1832751d896782b3eba7a5c5b39dfa7">_no_of_lines</a>=0;
<a name="l00942"></a>00942       <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">_componentmod</a>=<span class="keyword">true</span>;
<a name="l00943"></a>00943       <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#ad2ed42185d640bdb2417f8026fbf7b75">_gotaline</a>=<span class="keyword">false</span>;
<a name="l00944"></a>00944       srand(time(NULL));
<a name="l00945"></a>00945       command(<span class="stringliteral">&quot;options lang=gschem&quot;</span>, Scope);
<a name="l00946"></a>00946     }
<a name="l00947"></a>00947 } <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a8cafa2b1bd6896c0dffe7b8945c817fa">p8</a>;
<a name="l00948"></a>00948 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a>
<a name="l00949"></a><a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a75400c461208c27f2dfc335299720d69">00949</a>     d8(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;gschem&quot;</span>, &amp;<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a8cafa2b1bd6896c0dffe7b8945c817fa">p8</a>);
<a name="l00950"></a>00950 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00951"></a>00951 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00952"></a><a class="code" href="../../d2/d22/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___c.html">00952</a> <span class="keyword">class </span><a class="code" href="../../d2/d22/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___c.html">CMD_C</a> : <span class="keyword">public</span> <a class="code" href="../../da/d8a/class_c_m_d.html">CMD</a> {
<a name="l00953"></a><a class="code" href="../../d2/d22/classanonymous__namespace_02lang__geda_8cc_03_1_1_c_m_d___c.html#a7c6d49a0e81fde05d6f402ac895596f5">00953</a>     <span class="keywordtype">void</span> do_it(<a class="code" href="../../db/d85/class_c_s.html">CS</a>&amp; cmd, <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* Scope)
<a name="l00954"></a>00954     {
<a name="l00955"></a>00955       <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* new_compon = <span class="keyword">new</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>;
<a name="l00956"></a>00956       <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>* temp= <span class="keyword">new</span> <a class="code" href="../../de/d4c/class_m_o_d_e_l___s_u_b_c_k_t.html">MODEL_SUBCKT</a>;
<a name="l00957"></a>00957       assert(new_compon);
<a name="l00958"></a>00958       assert(!new_compon-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#a90030b0a7d13b3625ffeceb50ea016ee">owner</a>());
<a name="l00959"></a>00959       assert(new_compon-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>());
<a name="l00960"></a>00960       assert(new_compon-&gt;<a class="code" href="../../dc/df7/class_c_a_r_d.html#ab97144cf661970fe592fb73c0b104967">subckt</a>()-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#a01ed91f5d95ef493261cea826b4208ab">is_empty</a>());
<a name="l00961"></a>00961       temp=<a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#abb190d7c72473be3e72c16323673e73e">parse_componmod</a>(cmd, new_compon);
<a name="l00962"></a>00962       <span class="keywordflow">if</span>(temp){
<a name="l00963"></a>00963         Scope-&gt;<a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html#add6a3ae42cffeb4bca306777cecc0046">push_back</a>(new_compon);
<a name="l00964"></a>00964         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#acfee5355acc6f1ccaaaa3be78cf67d9f">_componentname</a>=new_compon-&gt;<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#a11b80145b3c19cfeb79f21dc35f90450">short_label</a>();
<a name="l00965"></a>00965         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/df9/classanonymous__namespace_02lang__geda_8cc_03_1_1_l_a_n_g___g_e_d_a.html#a9e4c79dc0c75881f74484811289537f2">_componentmod</a>=<span class="keyword">false</span>;
<a name="l00966"></a>00966         <a class="code" href="../../da/d20/namespaceanonymous__namespace_02lang__geda_8cc_03.html#a279807787aea2c1c3c2c35acf7ce093c">lang_geda</a>.<a class="code" href="../../d8/d92/class_l_a_n_g_u_a_g_e.html#a1ecab49c51a0f6d914170c04edb420a8">new__instance</a>(cmd,NULL,Scope);
<a name="l00967"></a>00967       }
<a name="l00968"></a>00968     }
<a name="l00969"></a>00969 } <a class="code" href="../../d5/d51/bmm__semi_8cc.html#ac33228ac9a9afdf3d0e113821e4f96b4">p2</a>;
<a name="l00970"></a>00970 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CMD&gt;::INSTALL</a>
<a name="l00971"></a>00971     d2(&amp;<a class="code" href="../../d1/d6e/namespaceanonymous__namespace_02c__attach_8cc_03.html#a2a87baa1b67f589819d37db5faca6f1b">command_dispatcher</a>, <span class="stringliteral">&quot;C&quot;</span>, &amp;<a class="code" href="../../d5/d51/bmm__semi_8cc.html#ac33228ac9a9afdf3d0e113821e4f96b4">p2</a>);
<a name="l00972"></a>00972 
<a name="l00973"></a>00973 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00974"></a>00974 }
<a name="l00975"></a>00975 <span class="comment">/*----------------------------------------------------------------------*/</span>
<a name="l00976"></a>00976 <span class="comment">/*----------------------------------------------------------------------*/</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Wed Aug 22 2012 16:53:17 for gnucap by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
