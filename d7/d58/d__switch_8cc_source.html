<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gnucap: savant/gnucap/src/d_switch.cc Source File</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />

<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gnucap
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">savant/gnucap/src/d_switch.cc</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d7/d58/d__switch_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*$Id: d_switch.cc,v 26.134 2009/11/29 03:47:06 al Exp $ -*- C++ -*-</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (C) 2001 Albert Davis</span>
<a name="l00003"></a>00003 <span class="comment"> * Author: Albert Davis &lt;aldavis@gnu.org&gt;</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> * This file is part of &quot;Gnucap&quot;, the Gnu Circuit Analysis Package</span>
<a name="l00006"></a>00006 <span class="comment"> *</span>
<a name="l00007"></a>00007 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment"> * it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment"> * the Free Software Foundation; either version 3, or (at your option)</span>
<a name="l00010"></a>00010 <span class="comment"> * any later version.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment"> * GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"> *</span>
<a name="l00017"></a>00017 <span class="comment"> * You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment"> * along with this program; if not, write to the Free Software</span>
<a name="l00019"></a>00019 <span class="comment"> * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA</span>
<a name="l00020"></a>00020 <span class="comment"> * 02110-1301, USA.</span>
<a name="l00021"></a>00021 <span class="comment"> *------------------------------------------------------------------</span>
<a name="l00022"></a>00022 <span class="comment"> * voltage (and current) controlled switch.</span>
<a name="l00023"></a>00023 <span class="comment"> * netlist syntax:</span>
<a name="l00024"></a>00024 <span class="comment"> * device:  Sxxxx n+ n- vc+ vc- mname &lt;on&gt;|&lt;off&gt; &lt;model-card-args&gt;</span>
<a name="l00025"></a>00025 <span class="comment"> * model:   .model mname SW &lt;args&gt;</span>
<a name="l00026"></a>00026 <span class="comment"> * current controlled switch</span>
<a name="l00027"></a>00027 <span class="comment"> * device:  Wxxxx n+ n- controlelement mname &lt;on&gt;|&lt;off&gt; &lt;model-card-args&gt;</span>
<a name="l00028"></a>00028 <span class="comment"> * model:   .model mname CSW &lt;args&gt;</span>
<a name="l00029"></a>00029 <span class="comment"> */</span>
<a name="l00030"></a>00030 <span class="comment">//testing=script 2006.06.14</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="../../d2/de9/e__model_8h.html">e_model.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="../../d8/def/e__elemnt_8h.html">e_elemnt.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00034"></a><a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html">00034</a> <span class="keyword">namespace </span>{
<a name="l00035"></a>00035 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00036"></a><a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176">00036</a>   <span class="keyword">enum</span> <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176">state_t</a> {<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a976a9f0d42160500370fc62fa0ecd585">_UNKNOWN</a>, <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>, <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176aa5ae03be61e64704672353d0d0e4de8a">_OFF</a>};
<a name="l00037"></a>00037 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00038"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">00038</a> <span class="keyword">class </span><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a> : <span class="keyword">public</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a> {
<a name="l00039"></a>00039 <span class="keyword">private</span>:
<a name="l00040"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#ae9dcda745c03269dec0fe60833ec5959">00040</a>   <span class="keyword">explicit</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>)
<a name="l00041"></a>00041     :<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>(p), _ic(p._ic) {}
<a name="l00042"></a>00042 <span class="keyword">public</span>:
<a name="l00043"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#adef1e1fe1080b6d19a9179ac34678c0b">00043</a>   <span class="keyword">explicit</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>(<span class="keywordtype">int</span> c=0) 
<a name="l00044"></a>00044     :<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>(c), _ic(<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a976a9f0d42160500370fc62fa0ecd585">_UNKNOWN</a>) {}
<a name="l00045"></a>00045   <span class="keywordtype">bool</span> <a class="code" href="../../d5/dc9/u__prblst_8cc.html#a32678dcbb7645112b7fb445299d7c353">operator==</a>(<span class="keyword">const</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>&amp;)<span class="keyword">const</span>;
<a name="l00046"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a9ee4d5f1aa7c8d3a1122b25471a499e6">00046</a>   <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>* <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a9ee4d5f1aa7c8d3a1122b25471a499e6">clone</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>(*<span class="keyword">this</span>);}
<a name="l00047"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#ada42f905abeea0257dae81d4815effc3">00047</a>   std::string <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#ada42f905abeea0257dae81d4815effc3">name</a>()<span class="keyword">const        </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>(); <span class="keywordflow">return</span> <span class="stringliteral">&quot;switch&quot;</span>;}
<a name="l00048"></a>00048 
<a name="l00049"></a>00049   <span class="keywordtype">bool</span>          param_is_printable(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00050"></a>00050   std::string   param_name(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00051"></a>00051   std::string   param_name(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00052"></a>00052   std::string   param_value(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00053"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a5f7b398b77125269e47dba323f513dd3">00053</a>   <span class="keywordtype">int</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a5f7b398b77125269e47dba323f513dd3">param_count</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> (1 + <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#ace9dea066f927cfdef3984571e80661a">COMMON_COMPONENT::param_count</a>());}
<a name="l00054"></a>00054 <span class="keyword">public</span>:
<a name="l00055"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">00055</a>   <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176">state_t</a>       <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">_ic</a>;            <span class="comment">/* initial state, belongs in common */</span>
<a name="l00056"></a>00056   <span class="comment">//BUG// no way to set _ic</span>
<a name="l00057"></a>00057 };
<a name="l00058"></a>00058 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00059"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">00059</a> <span class="keyword">class </span><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a> : <span class="keyword">public</span> <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a> {
<a name="l00060"></a>00060 <span class="keyword">protected</span>:
<a name="l00061"></a>00061   <span class="keyword">explicit</span>      <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>();
<a name="l00062"></a>00062   <span class="keyword">explicit</span>      <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>(<span class="keyword">const</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>);
<a name="l00063"></a>00063 <span class="keyword">protected</span>: <span class="comment">// override virtual</span>
<a name="l00064"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a2a8db1f19849a63643a49b641242b986">00064</a>   std::string <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a2a8db1f19849a63643a49b641242b986">value_name</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;}
<a name="l00065"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#abed6284a04966a7a7f1a1bb734d42735">00065</a>   std::string <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#abed6284a04966a7a7f1a1bb734d42735">dev_type</a>()<span class="keyword">const </span>{assert(common()); <span class="keywordflow">return</span> common()-&gt;modelname().c_str();}
<a name="l00066"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a7b423567a52921a190f959e755264522">00066</a>   <span class="keywordtype">bool</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a7b423567a52921a190f959e755264522">print_type_in_spice</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> <span class="keyword">true</span>;}
<a name="l00067"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aca934edcb3241f980c5a9dc72f2f1906">00067</a>   <span class="keywordtype">int</span>      <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aca934edcb3241f980c5a9dc72f2f1906">tail_size</a>()<span class="keyword">const     </span>{<span class="keywordflow">return</span> 1;}
<a name="l00068"></a>00068   <span class="keywordtype">int</span>      max_nodes()<span class="keyword">const</span>     = 0;
<a name="l00069"></a>00069   <span class="keywordtype">int</span>      min_nodes()<span class="keyword">const</span>     = 0;
<a name="l00070"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aa428c2640570b25ccc308962c160bd74">00070</a>   <span class="keywordtype">int</span>      <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aa428c2640570b25ccc308962c160bd74">matrix_nodes</a>()<span class="keyword">const  </span>{<span class="keywordflow">return</span> 2;}
<a name="l00071"></a>00071   <span class="keywordtype">int</span>      net_nodes()<span class="keyword">const</span>     = 0;
<a name="l00072"></a>00072   <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*    clone()<span class="keyword">const</span>         = 0;
<a name="l00073"></a>00073   <span class="keywordtype">void</span>     expand();
<a name="l00074"></a>00074   <span class="keywordtype">void</span>     precalc_last();
<a name="l00075"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ab57d6ac078f26233052ef8cd297299fd">00075</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ab57d6ac078f26233052ef8cd297299fd">tr_iwant_matrix</a>()    {tr_iwant_matrix_passive();}
<a name="l00076"></a>00076   <span class="keywordtype">void</span>     tr_begin();
<a name="l00077"></a>00077   <span class="keywordtype">void</span>     dc_advance();
<a name="l00078"></a>00078   <span class="keywordtype">void</span>     tr_advance();
<a name="l00079"></a>00079   <span class="keywordtype">void</span>     tr_regress();
<a name="l00080"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af4fe2abc156d261e4faf55811322b44f">00080</a>   <span class="keywordtype">bool</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af4fe2abc156d261e4faf55811322b44f">tr_needs_eval</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> _sim-&gt;analysis_is_static();} <span class="comment">// also q by tr_advance</span>
<a name="l00081"></a>00081   <span class="keywordtype">bool</span>     do_tr();
<a name="l00082"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a9a0b591f19772cce405ea3b35cec02cd">00082</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a9a0b591f19772cce405ea3b35cec02cd">tr_load</a>()            {tr_load_passive();}
<a name="l00083"></a>00083   <a class="code" href="../../d4/d78/struct_t_i_m_e___p_a_i_r.html">TIME_PAIR</a> tr_review();
<a name="l00084"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af3fc45c81f019d83da7abd235a22a45e">00084</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af3fc45c81f019d83da7abd235a22a45e">tr_unload</a>()          {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>(); tr_unload_passive();}
<a name="l00085"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a163883451eaa6058009af27c13877d99">00085</a>   <span class="keywordtype">double</span>   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a163883451eaa6058009af27c13877d99">tr_involts</a>()<span class="keyword">const    </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>(); <span class="keywordflow">return</span> tr_outvolts();}
<a name="l00086"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aad0972d26c46a94fe4becdab5bb5c6e5">00086</a>   <span class="keywordtype">double</span>   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#aad0972d26c46a94fe4becdab5bb5c6e5">tr_involts_limited</a>()<span class="keyword">const </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#a86d08c1b23d67eca942da0ac012d89f3">unreachable</a>(); <span class="keywordflow">return</span> tr_outvolts_limited();}
<a name="l00087"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6fe7fc075ce365d9ab2cf28b222234ae">00087</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6fe7fc075ce365d9ab2cf28b222234ae">ac_iwant_matrix</a>()    {ac_iwant_matrix_passive();}
<a name="l00088"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a5ffa9a4d376acb9225164351d0c32ebc">00088</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a5ffa9a4d376acb9225164351d0c32ebc">ac_begin</a>()           {_ev = _y[0].f1; _acg = _m0.c1;}
<a name="l00089"></a>00089   <span class="keywordtype">void</span>     do_ac();
<a name="l00090"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ae5b588090cceb72a86b59339aed9e0a4">00090</a>   <span class="keywordtype">void</span>     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ae5b588090cceb72a86b59339aed9e0a4">ac_load</a>()            {ac_load_passive();}
<a name="l00091"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#add81ce5e4bb0e53210163546477cd779">00091</a>   <a class="code" href="../../d8/dbf/md_8h.html#aeb7a51d53eae6b506572efff8dc8204d">COMPLEX</a>  <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#add81ce5e4bb0e53210163546477cd779">ac_involts</a>()<span class="keyword">const    </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>(); <span class="keywordflow">return</span> ac_outvolts();}
<a name="l00092"></a>00092 <span class="keyword">protected</span>:
<a name="l00093"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">00093</a>   <span class="keyword">const</span> <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>* <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>;
<a name="l00094"></a>00094 <span class="keyword">private</span>:
<a name="l00095"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">00095</a>   <span class="keywordtype">double</span>        _in[<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>];
<a name="l00096"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">00096</a>   <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176">state_t</a>       _state[<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>];
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00099"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html">00099</a> <span class="keyword">class </span><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html">DEV_VSWITCH</a> : <span class="keyword">public</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a> {
<a name="l00100"></a>00100 <span class="keyword">private</span>:
<a name="l00101"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#aaca9c49b1690b04784fdb54fff98e919">00101</a>   <span class="keyword">explicit</span>  <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#aaca9c49b1690b04784fdb54fff98e919">DEV_VSWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html">DEV_VSWITCH</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>) :<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>(p) {}
<a name="l00102"></a>00102 <span class="keyword">public</span>:
<a name="l00103"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a761dfca868c5597e0de4b3a2864a17a9">00103</a>   <span class="keyword">explicit</span>  <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a761dfca868c5597e0de4b3a2864a17a9">DEV_VSWITCH</a>()       :<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>() {}
<a name="l00104"></a>00104 <span class="keyword">private</span>: <span class="comment">// override virtual</span>
<a name="l00105"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a68cc05c8837feeb2e5d5e2737ae1a486">00105</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a68cc05c8837feeb2e5d5e2737ae1a486">max_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 4;}
<a name="l00106"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#af5b13a5425a177a7abd6bc4e6344bc6f">00106</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#af5b13a5425a177a7abd6bc4e6344bc6f">min_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 4;}
<a name="l00107"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a57e05fa61502eb282e2437ed5856d8e5">00107</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a57e05fa61502eb282e2437ed5856d8e5">net_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 4;}
<a name="l00108"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a4a12c09a363383d2c4831e464d1e5cf3">00108</a>   <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*     <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a4a12c09a363383d2c4831e464d1e5cf3">clone</a>()<span class="keyword">const        </span>{<span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html">DEV_VSWITCH</a>(*<span class="keyword">this</span>);}
<a name="l00109"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#ac7ea44a969905facd1dc4ba6e58ec8c2">00109</a>   <span class="keywordtype">char</span>      <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#ac7ea44a969905facd1dc4ba6e58ec8c2">id_letter</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> <span class="charliteral">&#39;S&#39;</span>;}
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a27068eab554f2bcdc96a15b3fd37ece6">00111</a>   std::string <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html#a27068eab554f2bcdc96a15b3fd37ece6">port_name</a>(<span class="keywordtype">int</span> i)<span class="keyword">const </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00112"></a>00112     assert(i &gt;= 0);
<a name="l00113"></a>00113     assert(i &lt; 4);
<a name="l00114"></a>00114     <span class="keyword">static</span> std::string names[] = {<span class="stringliteral">&quot;p&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>, <span class="stringliteral">&quot;ps&quot;</span>, <span class="stringliteral">&quot;ns&quot;</span>};
<a name="l00115"></a>00115     <span class="keywordflow">return</span> names[i];
<a name="l00116"></a>00116   }
<a name="l00117"></a>00117 };
<a name="l00118"></a>00118 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00119"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">00119</a> <span class="keyword">class </span><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">DEV_CSWITCH</a> : <span class="keyword">public</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a> {
<a name="l00120"></a>00120 <span class="keyword">private</span>:
<a name="l00121"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a5e97b3dd82dfd1c4373a46ee7ffc72c6">00121</a>   <span class="keyword">explicit</span>  <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">DEV_CSWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">DEV_CSWITCH</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>) 
<a name="l00122"></a>00122     :<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>(p), _input_label(p._input_label) {}
<a name="l00123"></a>00123 <span class="keyword">public</span>:
<a name="l00124"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a9baa1bf333f2b6de98113c2412d0245e">00124</a>   <span class="keyword">explicit</span>  <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a9baa1bf333f2b6de98113c2412d0245e">DEV_CSWITCH</a>()       :<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>(), _input_label() {}
<a name="l00125"></a>00125 <span class="keyword">private</span>: <span class="comment">// override virtual</span>
<a name="l00126"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7c6f74bff7d6c9af622ba905e55be04f">00126</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7c6f74bff7d6c9af622ba905e55be04f">max_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 3;}
<a name="l00127"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7756ebec40b27883cf6f9ca35ea4fb7c">00127</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7756ebec40b27883cf6f9ca35ea4fb7c">ext_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 2;}
<a name="l00128"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7e4301394a29f8c2b466ee2f194a8e78">00128</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a7e4301394a29f8c2b466ee2f194a8e78">min_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 3;}
<a name="l00129"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a911fd71e4fcdbaff090354c772e67968">00129</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a911fd71e4fcdbaff090354c772e67968">net_nodes</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> 2;}
<a name="l00130"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a77a057be894b27e5be5a454d5a661d28">00130</a>   <span class="keywordtype">int</span>       <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a77a057be894b27e5be5a454d5a661d28">num_current_ports</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> 1;}
<a name="l00131"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a9d52b6e65e43b434042e99fa3d8aab7f">00131</a>   <span class="keyword">const</span> std::string <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a9d52b6e65e43b434042e99fa3d8aab7f">current_port_value</a>(<span class="keywordtype">int</span>)<span class="keyword">const </span>{<span class="keywordflow">return</span> _input_label;};
<a name="l00132"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#ac70673e70f024e4cedd70a4939a3047c">00132</a>   <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*     <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#ac70673e70f024e4cedd70a4939a3047c">clone</a>()<span class="keyword">const        </span>{<span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">DEV_CSWITCH</a>(*<span class="keyword">this</span>);}
<a name="l00133"></a>00133   <span class="keywordtype">void</span>      expand();
<a name="l00134"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#ac98c5404f655d73b01b452c97f9fbedc">00134</a>   <span class="keywordtype">char</span>      <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#ac98c5404f655d73b01b452c97f9fbedc">id_letter</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> <span class="charliteral">&#39;W&#39;</span>;}
<a name="l00135"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#ab317d00fff1c4e4904e1c2e815ca2185">00135</a>   <span class="keywordtype">void</span>     set_port_by_name(std::string&amp; Name, std::string&amp; Value)
<a name="l00136"></a>00136                 {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>(); SWITCH_BASE::set_port_by_name(Name,Value);}
<a name="l00137"></a>00137   <span class="keywordtype">void</span>     set_port_by_index(<span class="keywordtype">int</span>, std::string&amp;);
<a name="l00138"></a>00138   <span class="keywordtype">bool</span>     node_is_connected(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00139"></a>00139 
<a name="l00140"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a3da95226339862c6deb86eae4b26aab2">00140</a>   std::string <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a3da95226339862c6deb86eae4b26aab2">port_name</a>(<span class="keywordtype">int</span> i)<span class="keyword">const </span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00141"></a>00141     assert(i &gt;= 0);
<a name="l00142"></a>00142     assert(i &lt; 2);
<a name="l00143"></a>00143     <span class="keyword">static</span> std::string names[] = {<span class="stringliteral">&quot;p&quot;</span>, <span class="stringliteral">&quot;n&quot;</span>};
<a name="l00144"></a>00144     <span class="keywordflow">return</span> names[i];
<a name="l00145"></a>00145   }
<a name="l00146"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a5e51ec88381afee7c2913316f6567b31">00146</a>   std::string <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a5e51ec88381afee7c2913316f6567b31">current_port_name</a>(<span class="keywordtype">int</span> i)<span class="keyword">const </span>{
<a name="l00147"></a>00147     assert(i &gt;= 0);
<a name="l00148"></a>00148     assert(i &lt; 1);
<a name="l00149"></a>00149     <span class="keyword">static</span> std::string names[] = {<span class="stringliteral">&quot;in&quot;</span>};
<a name="l00150"></a>00150     <span class="keywordflow">return</span> names[i];
<a name="l00151"></a>00151   }
<a name="l00152"></a>00152 <span class="keyword">private</span>:
<a name="l00153"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">00153</a>   std::string    <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">_input_label</a>;
<a name="l00154"></a>00154 };
<a name="l00155"></a>00155 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00156"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">00156</a> <span class="keyword">class </span><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a> : <span class="keyword">public</span> <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a> {
<a name="l00157"></a>00157 <span class="keyword">private</span>:
<a name="l00158"></a>00158   <span class="keyword">explicit</span>      <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>);
<a name="l00159"></a>00159 <span class="keyword">public</span>:
<a name="l00160"></a>00160   <span class="keyword">explicit</span>      <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>*);
<a name="l00161"></a>00161 <span class="keyword">private</span>: <span class="comment">// override virtual</span>
<a name="l00162"></a>00162   <span class="keywordtype">void</span>          set_dev_type(<span class="keyword">const</span> std::string&amp; nt);
<a name="l00163"></a>00163   std::string   dev_type()<span class="keyword">const</span>;
<a name="l00164"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a7cf84b920a33fb18eb2a9a9bf808d749">00164</a>   <a class="code" href="../../dc/df7/class_c_a_r_d.html">CARD</a>*         <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a7cf84b920a33fb18eb2a9a9bf808d749">clone</a>()<span class="keyword">const    </span>{<span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>(*<span class="keyword">this</span>);}
<a name="l00165"></a>00165   <span class="keywordtype">void</span>          precalc_first();
<a name="l00166"></a>00166   <span class="keywordtype">void</span>          set_param_by_index(<span class="keywordtype">int</span>, std::string&amp;, <span class="keywordtype">int</span>);
<a name="l00167"></a>00167   <span class="keywordtype">bool</span>          param_is_printable(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00168"></a>00168   std::string   param_name(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00169"></a>00169   std::string   param_name(<span class="keywordtype">int</span>,<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00170"></a>00170   std::string   param_value(<span class="keywordtype">int</span>)<span class="keyword">const</span>;
<a name="l00171"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">00171</a>   <span class="keywordtype">int</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">param_count</a>()<span class="keyword">const </span>{<span class="keywordflow">return</span> (6 + <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#a087dad3e25416510571e4f98bbc1c1bc">MODEL_CARD::param_count</a>());}
<a name="l00172"></a>00172 <span class="keyword">public</span>:
<a name="l00173"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">00173</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a>;         <span class="comment">/* threshold voltage */</span>
<a name="l00174"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">00174</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a>;         <span class="comment">/* hysteresis voltage */</span>
<a name="l00175"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">00175</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a>;        <span class="comment">/* on resistance */</span>
<a name="l00176"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">00176</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>;       <span class="comment">/* off resistance */</span>
<a name="l00177"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">00177</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a>;
<a name="l00178"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">00178</a>   <a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html">PARAMETER&lt;double&gt;</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">voff</a>;
<a name="l00179"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa2c591e5a9d606e3379edaf3232738d4e">00179</a>   <span class="keyword">enum</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0da">control_t</a> {<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa2c591e5a9d606e3379edaf3232738d4e">VOLTAGE</a>, CURRENT};
<a name="l00180"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">00180</a>   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0da">control_t</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">type</a>;       <span class="comment">/* current or voltage controlled */</span>
<a name="l00181"></a>00181 <span class="keyword">private</span>:
<a name="l00182"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a4ceaaf902f71a34bc9f36baf77d0d0b6">00182</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a4ceaaf902f71a34bc9f36baf77d0d0b6">_default_vt</a>;
<a name="l00183"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ab297582bc6d11d24768bfa46cc4d861e">00183</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ab297582bc6d11d24768bfa46cc4d861e">_default_vh</a>;
<a name="l00184"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2ec2a1cf5f480d5fb5bf65f02316053e">00184</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2ec2a1cf5f480d5fb5bf65f02316053e">_default_ron</a>;
<a name="l00185"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a58ce972c063cce5689badd2a93e1802e">00185</a>   <span class="keyword">static</span> <span class="keywordtype">double</span> <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a58ce972c063cce5689badd2a93e1802e">_default_roff</a>;
<a name="l00186"></a>00186 };
<a name="l00187"></a>00187 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00188"></a>00188 <span class="keyword">static</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a> <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a87cdec5b655764cba78e299b792ceeae">Default_SWITCH</a>(<a class="code" href="../../d0/db8/e__compon_8h.html#adc29c2ff13d900c2f185ee95427fb06ca3d88420d67f7a262141f4c07996d0400">CC_STATIC</a>);
<a name="l00189"></a>00189 <span class="keywordtype">double</span> <span class="keyword">const</span> MODEL_SWITCH::_default_vt = 0.;
<a name="l00190"></a>00190 <span class="keywordtype">double</span> <span class="keyword">const</span> MODEL_SWITCH::_default_vh = 0.;
<a name="l00191"></a>00191 <span class="keywordtype">double</span> <span class="keyword">const</span> MODEL_SWITCH::_default_ron = 1.;
<a name="l00192"></a>00192 <span class="keywordtype">double</span> <span class="keyword">const</span> MODEL_SWITCH::_default_roff = 1e12;
<a name="l00193"></a>00193 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00194"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#abb1a446e20bce0d0c1ec438c3f9e0bb9">00194</a> <span class="keywordtype">bool</span> <a class="code" href="../../d5/dc9/u__prblst_8cc.html#a32678dcbb7645112b7fb445299d7c353">COMMON_SWITCH::operator==</a>(<span class="keyword">const</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html">COMMON_COMPONENT</a>&amp; x)<span class="keyword">const</span>
<a name="l00195"></a>00195 <span class="keyword"></span>{
<a name="l00196"></a>00196   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*<span class="keyword">&gt;</span>(&amp;x);
<a name="l00197"></a>00197   <span class="keywordflow">return</span> p &amp;&amp; <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a38f6fe222be7175f6a6e10005d1d3cc8">COMMON_COMPONENT::operator==</a>(x);
<a name="l00198"></a>00198 }
<a name="l00199"></a>00199 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00200"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#aa227751fbd2ce4c7317373f50ac6979d">00200</a> <span class="keywordtype">bool</span> COMMON_SWITCH::param_is_printable(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00201"></a>00201 <span class="keyword"></span>{
<a name="l00202"></a>00202   <span class="keywordflow">switch</span> (COMMON_SWITCH::param_count() - 1 - i) {
<a name="l00203"></a>00203   <span class="keywordflow">case</span> 0:  <span class="keywordflow">return</span> (_ic == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a> || _ic == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176aa5ae03be61e64704672353d0d0e4de8a">_OFF</a>);
<a name="l00204"></a>00204   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#aeb7b0de77ee9f3f8814741b77ebfc9c8">COMMON_COMPONENT::param_is_printable</a>(i);
<a name="l00205"></a>00205   }
<a name="l00206"></a>00206 }
<a name="l00207"></a>00207 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00208"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#acca345a409f343d0fbbcf257f1ea8ef5">00208</a> std::string COMMON_SWITCH::param_name(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00209"></a>00209 <span class="keyword"></span>{
<a name="l00210"></a>00210   <span class="keywordflow">switch</span> (COMMON_SWITCH::param_count() - 1 - i) {
<a name="l00211"></a>00211   <span class="keywordflow">case</span> 0:  <span class="keywordflow">return</span> <span class="stringliteral">&quot;ic&quot;</span>;
<a name="l00212"></a>00212   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a307d0150f4c7d050bfd499e72d5b817a">COMMON_COMPONENT::param_name</a>(i);
<a name="l00213"></a>00213   }
<a name="l00214"></a>00214 }
<a name="l00215"></a>00215 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00216"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a553411a139dbddbae2bdf44669de5de0">00216</a> std::string COMMON_SWITCH::param_name(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword">const</span>
<a name="l00217"></a>00217 <span class="keyword"></span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00218"></a>00218   <span class="keywordflow">if</span> (j == 0) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00219"></a>00219     <span class="keywordflow">return</span> param_name(i);
<a name="l00220"></a>00220   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#ace9dea066f927cfdef3984571e80661a">COMMON_COMPONENT::param_count</a>()) {<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00221"></a>00221     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00222"></a>00222   }<span class="keywordflow">else</span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00223"></a>00223     <span class="keywordflow">return</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a307d0150f4c7d050bfd499e72d5b817a">COMMON_COMPONENT::param_name</a>(i, j);
<a name="l00224"></a>00224   }
<a name="l00225"></a>00225 }
<a name="l00226"></a>00226 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00227"></a><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#aa8ea952a048f57d0252a3b511cd46349">00227</a> std::string COMMON_SWITCH::param_value(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00228"></a>00228 <span class="keyword"></span>{<a class="code" href="../../d6/dda/io__trace_8h.html#ace44a3497980f17b256317ed0d54708f">itested</a>();
<a name="l00229"></a>00229   <span class="keywordflow">switch</span> (COMMON_SWITCH::param_count() - 1 - i) {
<a name="l00230"></a>00230   <span class="keywordflow">case</span> 0:  <span class="keywordflow">return</span> (_ic == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;0&quot;</span>;
<a name="l00231"></a>00231   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a6b7f6f74d7c5ecfd919d3cfec415b7da">COMMON_COMPONENT::param_value</a>(i);
<a name="l00232"></a>00232   }
<a name="l00233"></a>00233 }
<a name="l00234"></a>00234 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00235"></a>00235 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00236"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2b37a6eb37882f0ed82703af6391f260">00236</a> MODEL_SWITCH::MODEL_SWITCH(<span class="keyword">const</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>* <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>)
<a name="l00237"></a>00237   :<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>(p),
<a name="l00238"></a>00238    vt(_default_vt),
<a name="l00239"></a>00239    vh(_default_vh),
<a name="l00240"></a>00240    ron(_default_ron),
<a name="l00241"></a>00241    roff(_default_roff),
<a name="l00242"></a>00242    von(_default_vt + _default_vh),
<a name="l00243"></a>00243    voff(_default_vt - _default_vh),
<a name="l00244"></a>00244    type(VOLTAGE)
<a name="l00245"></a>00245 {
<a name="l00246"></a>00246 }
<a name="l00247"></a>00247 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00248"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a95f856769d0909a578f01eef8b0262dd">00248</a> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a95f856769d0909a578f01eef8b0262dd">MODEL_SWITCH::MODEL_SWITCH</a>(<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>)
<a name="l00249"></a>00249   :<a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html">MODEL_CARD</a>(p),
<a name="l00250"></a>00250    vt(p.vt),
<a name="l00251"></a>00251    vh(p.vh),
<a name="l00252"></a>00252    ron(p.ron),
<a name="l00253"></a>00253    roff(p.roff),
<a name="l00254"></a>00254    von(p.von),
<a name="l00255"></a>00255    voff(p.voff),
<a name="l00256"></a>00256    type(p.type)
<a name="l00257"></a>00257 {
<a name="l00258"></a>00258 }
<a name="l00259"></a>00259 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00260"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#af74635293d7f255ae2237ef8dd550197">00260</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#af74635293d7f255ae2237ef8dd550197">MODEL_SWITCH::set_dev_type</a>(<span class="keyword">const</span> std::string&amp; new_type)
<a name="l00261"></a>00261 {
<a name="l00262"></a>00262   <span class="keywordflow">if</span> (new_type == <span class="stringliteral">&quot;sw&quot;</span>) {
<a name="l00263"></a>00263     <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">type</a> = <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa2c591e5a9d606e3379edaf3232738d4e">VOLTAGE</a>;
<a name="l00264"></a>00264   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_type == <span class="stringliteral">&quot;csw&quot;</span>) {
<a name="l00265"></a>00265     <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">type</a> = <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa41f41f43474544c8b24b54644d1fe9bd">CURRENT</a>;
<a name="l00266"></a>00266   }<span class="keywordflow">else</span>{
<a name="l00267"></a>00267     <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#af74635293d7f255ae2237ef8dd550197">MODEL_CARD::set_dev_type</a>(new_type);
<a name="l00268"></a>00268   }
<a name="l00269"></a>00269 }
<a name="l00270"></a>00270 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00271"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad2fc3fbd3088babc025066f3c8e4b86f">00271</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad2fc3fbd3088babc025066f3c8e4b86f">MODEL_SWITCH::precalc_first</a>()
<a name="l00272"></a>00272 {
<a name="l00273"></a>00273   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad2fc3fbd3088babc025066f3c8e4b86f">MODEL_CARD::precalc_first</a>();
<a name="l00274"></a>00274 
<a name="l00275"></a>00275   <span class="keyword">const</span> <a class="code" href="../../d4/df4/class_c_a_r_d___l_i_s_t.html">CARD_LIST</a>* par_scope = <a class="code" href="../../dc/df7/class_c_a_r_d.html#aa42395d871220881dee53dcc022b8417">scope</a>();
<a name="l00276"></a>00276   assert(par_scope);
<a name="l00277"></a>00277 
<a name="l00278"></a>00278   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a4ceaaf902f71a34bc9f36baf77d0d0b6">_default_vt</a>, par_scope);
<a name="l00279"></a>00279   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ab297582bc6d11d24768bfa46cc4d861e">_default_vh</a>, par_scope);
<a name="l00280"></a>00280   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2ec2a1cf5f480d5fb5bf65f02316053e">_default_ron</a>, par_scope);
<a name="l00281"></a>00281   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a58ce972c063cce5689badd2a93e1802e">_default_roff</a>, par_scope);
<a name="l00282"></a>00282   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a> + <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a>, par_scope);
<a name="l00283"></a>00283   <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">voff</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#a3b0c248134850574e1b9544e02510f8b">e_val</a>(<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a> - <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a>, par_scope);
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00286"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a5105c737c08d93c32ca4847fba945167">00286</a> std::string <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a5105c737c08d93c32ca4847fba945167">MODEL_SWITCH::dev_type</a>()<span class="keyword">const</span>
<a name="l00287"></a>00287 <span class="keyword"></span>{
<a name="l00288"></a>00288   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">type</a>) {
<a name="l00289"></a>00289   <span class="keywordflow">case</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa2c591e5a9d606e3379edaf3232738d4e">VOLTAGE</a>:
<a name="l00290"></a>00290     <span class="keywordflow">return</span> <span class="stringliteral">&quot;sw&quot;</span>;
<a name="l00291"></a>00291     <span class="keywordflow">break</span>;
<a name="l00292"></a>00292   <span class="keywordflow">case</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa41f41f43474544c8b24b54644d1fe9bd">CURRENT</a>:
<a name="l00293"></a>00293     <span class="keywordflow">return</span> <span class="stringliteral">&quot;csw&quot;</span>;
<a name="l00294"></a>00294     <span class="keywordflow">break</span>;
<a name="l00295"></a>00295   }
<a name="l00296"></a>00296   <a class="code" href="../../d6/dda/io__trace_8h.html#a86d08c1b23d67eca942da0ac012d89f3">unreachable</a>();
<a name="l00297"></a>00297   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00298"></a>00298 }
<a name="l00299"></a>00299 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00300"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a713aa2476b4993104442844f16e4ac10">00300</a> <span class="keywordtype">void</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a713aa2476b4993104442844f16e4ac10">MODEL_SWITCH::set_param_by_index</a>(<span class="keywordtype">int</span> i, std::string&amp; value, <span class="keywordtype">int</span> <a class="code" href="../../dd/d35/c__genrat_8cc.html#a129303e4bd38a8cdba722b6238ed56e9">offset</a>)
<a name="l00301"></a>00301 {
<a name="l00302"></a>00302   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">MODEL_SWITCH::param_count</a>() - 1 - i) {
<a name="l00303"></a>00303   <span class="keywordflow">case</span> 0: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a> = value; <span class="keywordflow">break</span>;
<a name="l00304"></a>00304   <span class="keywordflow">case</span> 1: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a> = value; <span class="keywordflow">break</span>;
<a name="l00305"></a>00305   <span class="keywordflow">case</span> 2: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a> = value; <span class="keywordflow">break</span>;
<a name="l00306"></a>00306   <span class="keywordflow">case</span> 3: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">voff</a> = value; <span class="keywordflow">break</span>;
<a name="l00307"></a>00307   <span class="keywordflow">case</span> 4: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> = value; <span class="keywordflow">break</span>;
<a name="l00308"></a>00308   <span class="keywordflow">case</span> 5: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a> = value; <span class="keywordflow">break</span>;
<a name="l00309"></a>00309   <span class="keywordflow">default</span>: <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a713aa2476b4993104442844f16e4ac10">MODEL_CARD::set_param_by_index</a>(i, value, offset); <span class="keywordflow">break</span>;
<a name="l00310"></a>00310   }
<a name="l00311"></a>00311 }
<a name="l00312"></a>00312 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00313"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a9faf2866e808a2612ba8d23ea85b4f72">00313</a> <span class="keywordtype">bool</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a9faf2866e808a2612ba8d23ea85b4f72">MODEL_SWITCH::param_is_printable</a>(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00314"></a>00314 <span class="keyword"></span>{
<a name="l00315"></a>00315   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">MODEL_SWITCH::param_count</a>() - 1 - i) {
<a name="l00316"></a>00316   <span class="keywordflow">case</span> 0: 
<a name="l00317"></a>00317   <span class="keywordflow">case</span> 1: 
<a name="l00318"></a>00318   <span class="keywordflow">case</span> 2: 
<a name="l00319"></a>00319   <span class="keywordflow">case</span> 3: 
<a name="l00320"></a>00320   <span class="keywordflow">case</span> 4: 
<a name="l00321"></a>00321   <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00322"></a>00322   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a9faf2866e808a2612ba8d23ea85b4f72">MODEL_CARD::param_is_printable</a>(i);
<a name="l00323"></a>00323   }
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00326"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">00326</a> std::string <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">MODEL_SWITCH::param_name</a>(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00327"></a>00327 <span class="keyword"></span>{
<a name="l00328"></a>00328   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a3df93455eb999b66addc90ac983819ef">type</a>) {
<a name="l00329"></a>00329   <span class="keywordflow">case</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa2c591e5a9d606e3379edaf3232738d4e">VOLTAGE</a>:
<a name="l00330"></a>00330     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">MODEL_SWITCH::param_count</a>() - 1 - i) {
<a name="l00331"></a>00331     <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> <span class="stringliteral">&quot;vt&quot;</span>;
<a name="l00332"></a>00332     <span class="keywordflow">case</span> 1: <span class="keywordflow">return</span> <span class="stringliteral">&quot;vh&quot;</span>;
<a name="l00333"></a>00333     <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> <span class="stringliteral">&quot;von&quot;</span>;
<a name="l00334"></a>00334     <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> <span class="stringliteral">&quot;voff&quot;</span>;
<a name="l00335"></a>00335     <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ron&quot;</span>;
<a name="l00336"></a>00336     <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> <span class="stringliteral">&quot;roff&quot;</span>;
<a name="l00337"></a>00337     <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">MODEL_CARD::param_name</a>(i);
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339   <span class="keywordflow">case</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2c9acd85142691aa02c956b2266fe0daa41f41f43474544c8b24b54644d1fe9bd">CURRENT</a>:
<a name="l00340"></a>00340     <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">MODEL_SWITCH::param_count</a>() - 1 - i) {
<a name="l00341"></a>00341     <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> <span class="stringliteral">&quot;it&quot;</span>;
<a name="l00342"></a>00342     <span class="keywordflow">case</span> 1: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ih&quot;</span>;
<a name="l00343"></a>00343     <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ion&quot;</span>;
<a name="l00344"></a>00344     <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ioff&quot;</span>;
<a name="l00345"></a>00345     <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ron&quot;</span>;
<a name="l00346"></a>00346     <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> <span class="stringliteral">&quot;roff&quot;</span>;
<a name="l00347"></a>00347     <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">MODEL_CARD::param_name</a>(i);
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349   }
<a name="l00350"></a>00350   <a class="code" href="../../d6/dda/io__trace_8h.html#a86d08c1b23d67eca942da0ac012d89f3">unreachable</a>();
<a name="l00351"></a>00351   <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00354"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#aa17f9e9719ff426f1d436584ee6f6711">00354</a> std::string <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">MODEL_SWITCH::param_name</a>(<span class="keywordtype">int</span> i, <span class="keywordtype">int</span> j)<span class="keyword">const</span>
<a name="l00355"></a>00355 <span class="keyword"></span>{
<a name="l00356"></a>00356   <span class="keywordflow">if</span> (j == 0) {
<a name="l00357"></a>00357     <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">param_name</a>(i);
<a name="l00358"></a>00358   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &gt;= <a class="code" href="../../d2/d9e/class_m_o_d_e_l___c_a_r_d.html#a087dad3e25416510571e4f98bbc1c1bc">MODEL_CARD::param_count</a>()) {
<a name="l00359"></a>00359     <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00360"></a>00360   }<span class="keywordflow">else</span>{
<a name="l00361"></a>00361     <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a284da7fde47823ed24eb4ba0db2baf79">MODEL_CARD::param_name</a>(i, j);
<a name="l00362"></a>00362   }
<a name="l00363"></a>00363 }
<a name="l00364"></a>00364 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00365"></a><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2cdcd89f0e94119344d9dcde40f78f52">00365</a> std::string <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2cdcd89f0e94119344d9dcde40f78f52">MODEL_SWITCH::param_value</a>(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00366"></a>00366 <span class="keyword"></span>{
<a name="l00367"></a>00367   <span class="keywordflow">switch</span> (<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ae4fa23d21eef0eb4540a0fadf306e57f">MODEL_SWITCH::param_count</a>() - 1 - i) {
<a name="l00368"></a>00368   <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a524605389c1e94b408fc78d6f4625579">vt</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00369"></a>00369   <span class="keywordflow">case</span> 1: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a6f7929512dec1aa5043626b8379d4a81">vh</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00370"></a>00370   <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00371"></a>00371   <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">voff</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00372"></a>00372   <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00373"></a>00373   <span class="keywordflow">case</span> 5: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>.<a class="code" href="../../d4/dd4/class_p_a_r_a_m_e_t_e_r.html#afd2e3be644d941d7c2c98d8e7fdf9a23">string</a>();
<a name="l00374"></a>00374   <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a2cdcd89f0e94119344d9dcde40f78f52">MODEL_CARD::param_value</a>(i);
<a name="l00375"></a>00375   }
<a name="l00376"></a>00376 }
<a name="l00377"></a>00377 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00378"></a>00378 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00379"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a697b8b1b0d1061903dab4a1eec6019f7">00379</a> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a697b8b1b0d1061903dab4a1eec6019f7">SWITCH_BASE::SWITCH_BASE</a>()
<a name="l00380"></a>00380   :<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>(),
<a name="l00381"></a>00381    _input(NULL)
<a name="l00382"></a>00382 {
<a name="l00383"></a>00383   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a5dc0824ae5bcea0628143f59a2c6eeda">attach_common</a>(&amp;<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a87cdec5b655764cba78e299b792ceeae">Default_SWITCH</a>);
<a name="l00384"></a>00384   std::fill_n(<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>, <span class="keywordtype">int</span>(<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>), 0.);
<a name="l00385"></a>00385   std::fill_n(<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>, <span class="keywordtype">int</span>(<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>), <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a976a9f0d42160500370fc62fa0ecd585">_UNKNOWN</a>);
<a name="l00386"></a>00386 }
<a name="l00387"></a>00387 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00388"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6a2456d5ebb1dae4bb5eb7e339db4ee7">00388</a> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a697b8b1b0d1061903dab4a1eec6019f7">SWITCH_BASE::SWITCH_BASE</a>(<span class="keyword">const</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html">SWITCH_BASE</a>&amp; <a class="code" href="../../d5/d1c/namespaceanonymous__namespace_02c__genrat_8cc_03.html#a4efa6c9b62361333533768663f0ae0a1">p</a>)
<a name="l00389"></a>00389   :<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>(p),
<a name="l00390"></a>00390    _input(NULL)
<a name="l00391"></a>00391 {
<a name="l00392"></a>00392   <a class="code" href="../../df/d5a/namespacenotstd.html#ac5801402dbd75088d6952da76eab340f">notstd::copy_n</a>(p.<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>, <span class="keywordtype">int</span>(<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>), <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>);
<a name="l00393"></a>00393   <a class="code" href="../../df/d5a/namespacenotstd.html#ac5801402dbd75088d6952da76eab340f">notstd::copy_n</a>(p.<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>, <span class="keywordtype">int</span>(<a class="code" href="../../de/d5e/class_o_p_t.html#a82b127c34339cc2dd6791e70110bbcc5aa35927b332a024d8e0667592044528d3">OPT::_keep_time_steps</a>), <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>);  
<a name="l00394"></a>00394 }
<a name="l00395"></a>00395 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00396"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6940ca503aff3db4f241aa6a7202c732">00396</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6940ca503aff3db4f241aa6a7202c732">SWITCH_BASE::expand</a>()
<a name="l00397"></a>00397 {
<a name="l00398"></a>00398   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6940ca503aff3db4f241aa6a7202c732">ELEMENT::expand</a>();
<a name="l00399"></a>00399   
<a name="l00400"></a>00400   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a4d34880edc528a6549a96f3df6a5dd66">attach_model</a>();
<a name="l00401"></a>00401   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00402"></a>00402   assert(c);
<a name="l00403"></a>00403   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*<span class="keyword">&gt;</span>(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00404"></a>00404   <span class="keywordflow">if</span> (!m) {
<a name="l00405"></a>00405     assert(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a60bc591bebd3b2b51f81aaa2f7249f2b">has_common</a>());
<a name="l00406"></a>00406     <span class="keywordflow">throw</span> Exception_Model_Type_Mismatch(<a class="code" href="../../dc/df7/class_c_a_r_d.html#a2b81b4c28056adc678b21ff34a756913">long_label</a>(), <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>()-&gt;modelname(),
<a name="l00407"></a>00407                                         <span class="stringliteral">&quot;switch (SW or CSW)&quot;</span>);
<a name="l00408"></a>00408   }<span class="keywordflow">else</span>{
<a name="l00409"></a>00409   }
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00412"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a179dbfb4f4d4fb376da409fdcdc341a0">00412</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a179dbfb4f4d4fb376da409fdcdc341a0">SWITCH_BASE::precalc_last</a>()
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a179dbfb4f4d4fb376da409fdcdc341a0">ELEMENT::precalc_last</a>();
<a name="l00415"></a>00415     
<a name="l00416"></a>00416   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#aee1030ed5a99aecd285c8af3aa2b37ef">_sim</a>-&gt;<a class="code" href="../../d7/db5/struct_s_i_m___d_a_t_a.html#ac003d9d38204e021acf219751163675a">is_first_expand</a>()) {
<a name="l00417"></a>00417     <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00418"></a>00418     assert(c);
<a name="l00419"></a>00419     <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00420"></a>00420     assert(m);
<a name="l00421"></a>00421     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a1a4dc104692f5d925c8b5dc4d453e8c5">_y1</a>.<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = (c-&gt;<a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">_ic</a> == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>;     <span class="comment">// override, unknown is off</span>
<a name="l00422"></a>00422     
<a name="l00423"></a>00423     assert(!<a class="code" href="../../dc/df7/class_c_a_r_d.html#aba979ed33987509948b53405ccd86a93">is_constant</a>()); <span class="comment">// depends on input</span>
<a name="l00424"></a>00424     <span class="comment">// converged?????</span>
<a name="l00425"></a>00425     
<a name="l00426"></a>00426     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a> = 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>;
<a name="l00427"></a>00427     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a98d21a8be3372b27eb5f4b67718971c7">c0</a> = 0.;
<a name="l00428"></a>00428     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a8d4e9d758cd2fbe12228caba628ab9e8">_m1</a> = <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>;
<a name="l00429"></a>00429     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = c-&gt;<a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">_ic</a>;
<a name="l00430"></a>00430   }<span class="keywordflow">else</span>{
<a name="l00431"></a>00431   }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a52302ff3af3e0cdbe8b042930619f0f7">_loss0</a> == 0.);
<a name="l00434"></a>00434   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a88a13f0461014a03e1c9b86ab97c5e05">_loss1</a> == 0.);
<a name="l00435"></a>00435 }
<a name="l00436"></a>00436 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00437"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a3c87d7fced2859f78fb74fc339ae7f8b">00437</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a3c87d7fced2859f78fb74fc339ae7f8b">SWITCH_BASE::tr_begin</a>()
<a name="l00438"></a>00438 {
<a name="l00439"></a>00439   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a3c87d7fced2859f78fb74fc339ae7f8b">ELEMENT::tr_begin</a>();
<a name="l00440"></a>00440 
<a name="l00441"></a>00441   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00442"></a>00442   assert(c);
<a name="l00443"></a>00443   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00444"></a>00444   assert(m);
<a name="l00445"></a>00445 
<a name="l00446"></a>00446   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a52302ff3af3e0cdbe8b042930619f0f7">_loss0</a> == 0.);
<a name="l00447"></a>00447   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a88a13f0461014a03e1c9b86ab97c5e05">_loss1</a> == 0.);
<a name="l00448"></a>00448   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f0 == <a class="code" href="../../dd/d17/constant_8h.html#ab1e03f8f0815028332897234e33a3bcf">LINEAR</a>);
<a name="l00449"></a>00449   <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a1a4dc104692f5d925c8b5dc4d453e8c5">_y1</a>.<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = ((c-&gt;<a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">_ic</a> == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>);  <span class="comment">/* unknown is off */</span>
<a name="l00450"></a>00450   <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a> = 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>;
<a name="l00451"></a>00451   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a98d21a8be3372b27eb5f4b67718971c7">c0</a> == 0.);
<a name="l00452"></a>00452   <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a8d4e9d758cd2fbe12228caba628ab9e8">_m1</a> = <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>;
<a name="l00453"></a>00453   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = c-&gt;<a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html#a25c5c27fe0cf5620c8e98ce10c776b33">_ic</a>;
<a name="l00454"></a>00454   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a3c542d625e3ea40c3bfcc33fa30ae399">set_converged</a>();
<a name="l00455"></a>00455 }
<a name="l00456"></a>00456 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00457"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af325de58c6e6f66d2cac61e93800cac7">00457</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af325de58c6e6f66d2cac61e93800cac7">SWITCH_BASE::dc_advance</a>()
<a name="l00458"></a>00458 {
<a name="l00459"></a>00459   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#af325de58c6e6f66d2cac61e93800cac7">ELEMENT::dc_advance</a>();
<a name="l00460"></a>00460   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0];
<a name="l00461"></a>00461 }
<a name="l00462"></a>00462 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00463"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a0169c926c7546183e21cb441bbf2bb32">00463</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a0169c926c7546183e21cb441bbf2bb32">SWITCH_BASE::tr_advance</a>()
<a name="l00464"></a>00464 {
<a name="l00465"></a>00465   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a0169c926c7546183e21cb441bbf2bb32">ELEMENT::tr_advance</a>();
<a name="l00466"></a>00466 
<a name="l00467"></a>00467   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00468"></a>00468   assert(c);
<a name="l00469"></a>00469   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00470"></a>00470   assert(m);
<a name="l00471"></a>00471   
<a name="l00472"></a>00472    <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0];
<a name="l00473"></a>00473   <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a3d137efdec2eaddccfe7ae521a07e207">x</a> = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>[1] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>[0];
<a name="l00474"></a>00474   
<a name="l00475"></a>00475   <span class="keywordflow">if</span> (<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].x &gt;= m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a>) {
<a name="l00476"></a>00476     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>;
<a name="l00477"></a>00477   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].x &lt;= m-&gt;voff) {
<a name="l00478"></a>00478     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176aa5ae03be61e64704672353d0d0e4de8a">_OFF</a>;
<a name="l00479"></a>00479   }<span class="keywordflow">else</span>{
<a name="l00480"></a>00480     <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1];
<a name="l00481"></a>00481   }
<a name="l00482"></a>00482   
<a name="l00483"></a>00483   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1] != <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0]) {
<a name="l00484"></a>00484     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>;   <span class="comment">/* unknown is off */</span>
<a name="l00485"></a>00485     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a> = 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>;
<a name="l00486"></a>00486     <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a0f00d0fde0382901f85a26aa200b037d">q_eval</a>();
<a name="l00487"></a>00487   }<span class="keywordflow">else</span>{
<a name="l00488"></a>00488   }
<a name="l00489"></a>00489   
<a name="l00490"></a>00490   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1 == ((<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>));
<a name="l00491"></a>00491   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f0 == <a class="code" href="../../dd/d17/constant_8h.html#ab1e03f8f0815028332897234e33a3bcf">LINEAR</a>);
<a name="l00492"></a>00492   <a class="code" href="../../d6/dda/io__trace_8h.html#ac33f87216db5feeb1dea8b1e4a69ada9">trace4</a>(<span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>, 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>, ((<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>) - (1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>)), ((<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>) / (1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>)));
<a name="l00493"></a>00493   assert(<a class="code" href="../../d0/db8/e__compon_8h.html#a8c7f7104f5d0721101495fa5e293ec73">conchk</a>(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>, 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>));
<a name="l00494"></a>00494   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a98d21a8be3372b27eb5f4b67718971c7">c0</a> == 0.);
<a name="l00495"></a>00495   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a3c542d625e3ea40c3bfcc33fa30ae399">set_converged</a>();
<a name="l00496"></a>00496 }
<a name="l00497"></a>00497 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00498"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a11ec1e37cc025c99030faa15cd7f1f10">00498</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a11ec1e37cc025c99030faa15cd7f1f10">SWITCH_BASE::tr_regress</a>()
<a name="l00499"></a>00499 {
<a name="l00500"></a>00500   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a11ec1e37cc025c99030faa15cd7f1f10">ELEMENT::tr_regress</a>();
<a name="l00501"></a>00501 
<a name="l00502"></a>00502   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00503"></a>00503   assert(c);
<a name="l00504"></a>00504   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00505"></a>00505   assert(m);
<a name="l00506"></a>00506 
<a name="l00507"></a>00507   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1 == ((<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>));
<a name="l00508"></a>00508   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f0 == <a class="code" href="../../dd/d17/constant_8h.html#ab1e03f8f0815028332897234e33a3bcf">LINEAR</a>);
<a name="l00509"></a>00509   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a> == 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>);
<a name="l00510"></a>00510   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a98d21a8be3372b27eb5f4b67718971c7">c0</a> == 0.);
<a name="l00511"></a>00511   <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a3c542d625e3ea40c3bfcc33fa30ae399">set_converged</a>();
<a name="l00512"></a>00512 }
<a name="l00513"></a>00513 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00514"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ad17d5201deace1ba12fa31c45a33dfd1">00514</a> <span class="keywordtype">bool</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ad17d5201deace1ba12fa31c45a33dfd1">SWITCH_BASE::do_tr</a>()
<a name="l00515"></a>00515 {
<a name="l00516"></a>00516   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00517"></a>00517   assert(c);
<a name="l00518"></a>00518   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00519"></a>00519   assert(m);
<a name="l00520"></a>00520 
<a name="l00521"></a>00521   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#aee1030ed5a99aecd285c8af3aa2b37ef">_sim</a>-&gt;<a class="code" href="../../d7/db5/struct_s_i_m___d_a_t_a.html#adf3b3b11a04dba041009c1c559a35f04">analysis_is_static</a>()) {
<a name="l00522"></a>00522     <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a3d137efdec2eaddccfe7ae521a07e207">x</a> = (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>)                  <span class="comment">/* _y[0].x is controlling value */</span>
<a name="l00523"></a>00523       ? <a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#ae4b5078972626ab7e691fcf19f4a6b1b">CARD::probe</a>(<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>,<span class="stringliteral">&quot;I&quot;</span>)         <span class="comment">/* current controlled */</span>
<a name="l00524"></a>00524       : <a class="code" href="../../dc/df7/class_c_a_r_d.html#ac72d62d7197e7aa9e9554e05d422cb56">_n</a>[<a class="code" href="../../dc/db5/e__node_8h.html#a61dadd085c1777f559549e05962b2c9eaec3dec5acc8382e7fd1f6ea791599e9b">IN1</a>].<a class="code" href="../../d7/ded/classnode__t.html#a2af0828c33aaaf60bb76aed24a8431ff">v0</a>() - <a class="code" href="../../dc/df7/class_c_a_r_d.html#ac72d62d7197e7aa9e9554e05d422cb56">_n</a>[<a class="code" href="../../dc/db5/e__node_8h.html#a61dadd085c1777f559549e05962b2c9ea74ae1050ea7349c4e9ff021d3150bfa1">IN2</a>].<a class="code" href="../../d7/ded/classnode__t.html#a2af0828c33aaaf60bb76aed24a8431ff">v0</a>();    <span class="comment">/* voltage controlled */</span>
<a name="l00525"></a>00525     
<a name="l00526"></a>00526     <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176">state_t</a> new_state;
<a name="l00527"></a>00527     <span class="keywordflow">if</span> (<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].x &gt; m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a>) {
<a name="l00528"></a>00528       new_state = <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>;
<a name="l00529"></a>00529     }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].x &lt; m-&gt;voff) {
<a name="l00530"></a>00530       new_state = <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176aa5ae03be61e64704672353d0d0e4de8a">_OFF</a>;
<a name="l00531"></a>00531     }<span class="keywordflow">else</span>{
<a name="l00532"></a>00532       new_state = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1];
<a name="l00533"></a>00533     }
<a name="l00534"></a>00534     
<a name="l00535"></a>00535     <span class="keywordflow">if</span> (new_state != <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0]) {
<a name="l00536"></a>00536       <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a> = (new_state == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>; <span class="comment">/* unknown is off */</span>
<a name="l00537"></a>00537       <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] = new_state;
<a name="l00538"></a>00538       <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a> = 1./<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].<a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html#a52909d5a5ec11f5cedb065da80786871">f1</a>;
<a name="l00539"></a>00539       <a class="code" href="../../d6/dda/io__trace_8h.html#ac33f87216db5feeb1dea8b1e4a69ada9">trace4</a>(<span class="stringliteral">&quot;change&quot;</span>, new_state, old_state, <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1, <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>);
<a name="l00540"></a>00540       <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a50801460ff065351abb1412f4fb6490f">q_load</a>();
<a name="l00541"></a>00541       <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a9f2432c2428eaa4b7096b6e030fa3208">store_values</a>();
<a name="l00542"></a>00542       <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#ab0e26487ec4ab285ad105118a9553707">set_not_converged</a>();
<a name="l00543"></a>00543     }<span class="keywordflow">else</span>{
<a name="l00544"></a>00544       <a class="code" href="../../d6/dda/io__trace_8h.html#a5e32551bf830489adee8befd40ed304d">trace3</a>(<span class="stringliteral">&quot;no change&quot;</span>, new_state, <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1, <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>);
<a name="l00545"></a>00545       <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a3c542d625e3ea40c3bfcc33fa30ae399">set_converged</a>();
<a name="l00546"></a>00546     }
<a name="l00547"></a>00547   }<span class="keywordflow">else</span>{
<a name="l00548"></a>00548     <span class="comment">// Above isn&#39;t necessary because it was done in tr_advance,</span>
<a name="l00549"></a>00549     <span class="comment">// and doesn&#39;t iterate.</span>
<a name="l00550"></a>00550     <span class="comment">// I believe it is not necessary on restart, because it is stored.</span>
<a name="l00551"></a>00551     <span class="keywordflow">if</span> (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] != <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[1]) {
<a name="l00552"></a>00552       <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a50801460ff065351abb1412f4fb6490f">q_load</a>();
<a name="l00553"></a>00553       <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a9f2432c2428eaa4b7096b6e030fa3208">store_values</a>();
<a name="l00554"></a>00554     }<span class="keywordflow">else</span>{
<a name="l00555"></a>00555       <span class="comment">// gets here only on &quot;nobypass&quot;</span>
<a name="l00556"></a>00556     }
<a name="l00557"></a>00557     assert(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#af859be575cd1949f32483d04399ab151">converged</a>());
<a name="l00558"></a>00558   }
<a name="l00559"></a>00559   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1 == ((<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] == <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>) ? m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a0836cb7b8450afbf7535230358a61ffe">ron</a> : m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a619889b822f43a3aade1ad7d8a30e3d3">roff</a>));
<a name="l00560"></a>00560   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f0 == <a class="code" href="../../dd/d17/constant_8h.html#ab1e03f8f0815028332897234e33a3bcf">LINEAR</a>);
<a name="l00561"></a>00561   <span class="comment">//assert(_m0.c1 == 1./_y[0].f1);</span>
<a name="l00562"></a>00562   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a98d21a8be3372b27eb5f4b67718971c7">c0</a> == 0.);
<a name="l00563"></a>00563   <span class="keywordflow">return</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#af859be575cd1949f32483d04399ab151">converged</a>();
<a name="l00564"></a>00564 }
<a name="l00565"></a>00565 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00566"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a85248a8e775cf0123827260c1ffd10f2">00566</a> <a class="code" href="../../d4/d78/struct_t_i_m_e___p_a_i_r.html">TIME_PAIR</a> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a85248a8e775cf0123827260c1ffd10f2">SWITCH_BASE::tr_review</a>()
<a name="l00567"></a>00567 {
<a name="l00568"></a>00568   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a85248a8e775cf0123827260c1ffd10f2">ELEMENT::tr_review</a>();
<a name="l00569"></a>00569 
<a name="l00570"></a>00570   <span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>* c = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../dd/dcd/classanonymous__namespace_02d__switch_8cc_03_1_1_c_o_m_m_o_n___s_w_i_t_c_h.html">COMMON_SWITCH</a>*&gt;(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a9a570d04b321ac4b80b6348e88a057cf">common</a>());
<a name="l00571"></a>00571   assert(c);
<a name="l00572"></a>00572   <span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>* m = <a class="code" href="../../d8/dbf/md_8h.html#af45905d09317dd0ffb3723c6cfc0937a">prechecked_cast</a>&lt;<span class="keyword">const</span> <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a>*&gt;(c-&gt;<a class="code" href="../../df/d75/class_c_o_m_m_o_n___c_o_m_p_o_n_e_n_t.html#a2b2b837ca6e8ef71b2c1e458de838b11">model</a>());
<a name="l00573"></a>00573   assert(m);
<a name="l00574"></a>00574   
<a name="l00575"></a>00575   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>[0] = (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>)
<a name="l00576"></a>00576     ? <a class="code" href="../../d3/d22/class_c_k_t___b_a_s_e.html#ae4b5078972626ab7e691fcf19f4a6b1b">CARD::probe</a>(<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>,<span class="stringliteral">&quot;I&quot;</span>)
<a name="l00577"></a>00577     : <a class="code" href="../../dc/df7/class_c_a_r_d.html#ac72d62d7197e7aa9e9554e05d422cb56">_n</a>[<a class="code" href="../../dc/db5/e__node_8h.html#a61dadd085c1777f559549e05962b2c9eaec3dec5acc8382e7fd1f6ea791599e9b">IN1</a>].<a class="code" href="../../d7/ded/classnode__t.html#a2af0828c33aaaf60bb76aed24a8431ff">v0</a>() - <a class="code" href="../../dc/df7/class_c_a_r_d.html#ac72d62d7197e7aa9e9554e05d422cb56">_n</a>[<a class="code" href="../../dc/db5/e__node_8h.html#a61dadd085c1777f559549e05962b2c9ea74ae1050ea7349c4e9ff021d3150bfa1">IN2</a>].<a class="code" href="../../d7/ded/classnode__t.html#a2af0828c33aaaf60bb76aed24a8431ff">v0</a>();
<a name="l00578"></a>00578 
<a name="l00579"></a>00579   <span class="keywordtype">double</span> old_dt = <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a0509c6ec6bf384fbbeec3e0486158367">_time</a>[0] - <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a0509c6ec6bf384fbbeec3e0486158367">_time</a>[1];
<a name="l00580"></a>00580   <span class="keywordtype">double</span> old_dv = <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>[0] - <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a8dc4ca4d482bcac4946026d493e0835b">_in</a>[1];
<a name="l00581"></a>00581 
<a name="l00582"></a>00582   <span class="keywordflow">if</span> (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] != <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176a0afd6f304e46072ac8ad87f32c41ece3">_ON</a>  &amp;&amp;  old_dv &gt; 0) {
<a name="l00583"></a>00583     <span class="keywordtype">double</span> new_dv = m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#a69c7f54140adbb9fdbe324432b5051ff">von</a> - _in[1];
<a name="l00584"></a>00584     <span class="keywordtype">double</span> new_dt = old_dt * new_dv / old_dv;
<a name="l00585"></a>00585     <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8863f3ad7f1dfe4c16963862e701e5c0">_time_by</a>.<a class="code" href="../../d4/d78/struct_t_i_m_e___p_a_i_r.html#aa5bb9e45bcac6a8f5d81f32ab06de97e">min_event</a>(_time[1] + new_dt);
<a name="l00586"></a>00586   }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a011a10c37f0767b2aad1fbe232388ba6">_state</a>[0] != <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a6f3a0a0ff05c61bf08c4529b2f7c6176aa5ae03be61e64704672353d0d0e4de8a">_OFF</a>  &amp;&amp;  old_dv &lt; 0) {
<a name="l00587"></a>00587     <span class="keywordtype">double</span> new_dv = m-&gt;<a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html#ad71dd442f006089240f2b16874653527">voff</a> - _in[1];
<a name="l00588"></a>00588     <span class="keywordtype">double</span> new_dt = old_dt * new_dv / old_dv;
<a name="l00589"></a>00589     <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8863f3ad7f1dfe4c16963862e701e5c0">_time_by</a>.<a class="code" href="../../d4/d78/struct_t_i_m_e___p_a_i_r.html#aa5bb9e45bcac6a8f5d81f32ab06de97e">min_event</a>(_time[1] + new_dt);
<a name="l00590"></a>00590   }<span class="keywordflow">else</span>{
<a name="l00591"></a>00591     assert(<a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8863f3ad7f1dfe4c16963862e701e5c0">_time_by</a>.<a class="code" href="../../d4/d78/struct_t_i_m_e___p_a_i_r.html#a74fde05a4d23f81876169b29f36497aa">_event</a> == <a class="code" href="../../dd/d17/constant_8h.html#ab4878a59db1ba93c064aae818b9e51ae">NEVER</a>);
<a name="l00592"></a>00592   }
<a name="l00593"></a>00593   <span class="comment">// _time_by_event is the predicted switch time</span>
<a name="l00594"></a>00594 
<a name="l00595"></a>00595   <span class="keywordflow">return</span> <a class="code" href="../../d5/dce/class_c_o_m_p_o_n_e_n_t.html#a8863f3ad7f1dfe4c16963862e701e5c0">_time_by</a>;
<a name="l00596"></a>00596 }
<a name="l00597"></a>00597 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00598"></a><a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ab46d46172c91dd56602270a7089e1496">00598</a> <span class="keywordtype">void</span> <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#ab46d46172c91dd56602270a7089e1496">SWITCH_BASE::do_ac</a>()
<a name="l00599"></a>00599 {
<a name="l00600"></a>00600   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#afdf5e133f186354fc505220e18ab6736">_ev</a>  == <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a16e865ecb0b2b7ebda5fc18ddaf8f039">_y</a>[0].f1);
<a name="l00601"></a>00601   assert(<a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a0d6bacd96a5c1f2cb557aafb59d1e7a8">_acg</a> == <a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html#a99fee23b26db9b6689aecd1f8a92a536">_m0</a>.<a class="code" href="../../d8/d92/struct_c_p_o_l_y1.html#a60a093433e2791239d4c7b5294b3f560">c1</a>);
<a name="l00602"></a>00602 }
<a name="l00603"></a>00603 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00604"></a>00604 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00605"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a57d8f02695f88e84e4c23408fbeda20b">00605</a> <span class="keywordtype">void</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a57d8f02695f88e84e4c23408fbeda20b">DEV_CSWITCH::expand</a>()
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607   <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a57d8f02695f88e84e4c23408fbeda20b">SWITCH_BASE::expand</a>();
<a name="l00608"></a>00608   <a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a> = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../da/da7/class_e_l_e_m_e_n_t.html">ELEMENT</a>*<span class="keyword">&gt;</span>(<a class="code" href="../../dc/df7/class_c_a_r_d.html#ae5595d5aba88baf27759a622517af069">find_in_my_scope</a>(<a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">_input_label</a>));
<a name="l00609"></a>00609   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/de8/classanonymous__namespace_02d__switch_8cc_03_1_1_s_w_i_t_c_h___b_a_s_e.html#a6cb2f4092f398d8764f8b8ea426a865f">_input</a>) {
<a name="l00610"></a>00610     <span class="keywordflow">throw</span> <a class="code" href="../../df/d70/class_exception.html">Exception</a>(<a class="code" href="../../dc/df7/class_c_a_r_d.html#a2b81b4c28056adc678b21ff34a756913">long_label</a>() + <span class="stringliteral">&quot;: &quot;</span> + <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">_input_label</a> + <span class="stringliteral">&quot; cannot be used as input&quot;</span>);
<a name="l00611"></a>00611   }<span class="keywordflow">else</span>{
<a name="l00612"></a>00612   }
<a name="l00613"></a>00613 }
<a name="l00614"></a>00614 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00615"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af966dd2dcf1dfa02a1d7e79a9bae0771">00615</a> <span class="keywordtype">void</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af966dd2dcf1dfa02a1d7e79a9bae0771">DEV_CSWITCH::set_port_by_index</a>(<span class="keywordtype">int</span> Num, std::string&amp; Value)
<a name="l00616"></a>00616 {
<a name="l00617"></a>00617   <span class="keywordflow">if</span> (Num == 2) {
<a name="l00618"></a>00618     <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">_input_label</a> = Value;
<a name="l00619"></a>00619   }<span class="keywordflow">else</span>{
<a name="l00620"></a>00620     <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af966dd2dcf1dfa02a1d7e79a9bae0771">SWITCH_BASE::set_port_by_index</a>(Num, Value);
<a name="l00621"></a>00621   }
<a name="l00622"></a>00622 }
<a name="l00623"></a>00623 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00624"></a><a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af39d25126d91ec835a10beb8243a75ff">00624</a> <span class="keywordtype">bool</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af39d25126d91ec835a10beb8243a75ff">DEV_CSWITCH::node_is_connected</a>(<span class="keywordtype">int</span> i)<span class="keyword">const</span>
<a name="l00625"></a>00625 <span class="keyword"></span>{
<a name="l00626"></a>00626   <span class="keywordflow">if</span> (i == 2) {
<a name="l00627"></a>00627     <span class="keywordflow">return</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#a62a51aa0eb1a180e4a660225969ddbcd">_input_label</a> != <span class="stringliteral">&quot;&quot;</span>;
<a name="l00628"></a>00628   }<span class="keywordflow">else</span>{
<a name="l00629"></a>00629     <span class="keywordflow">return</span> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html#af39d25126d91ec835a10beb8243a75ff">SWITCH_BASE::node_is_connected</a>(i);
<a name="l00630"></a>00630   }
<a name="l00631"></a>00631 }
<a name="l00632"></a>00632 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00633"></a>00633 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00634"></a><a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#affce075a336a9de828fd5c864c22f508">00634</a> <a class="code" href="../../d2/d8e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___v_s_w_i_t_c_h.html">DEV_VSWITCH</a> <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#affce075a336a9de828fd5c864c22f508">p2</a>;
<a name="l00635"></a><a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a5311d66289c20c1ca1f1c0a0a7b836f6">00635</a> <a class="code" href="../../d0/d2e/classanonymous__namespace_02d__switch_8cc_03_1_1_d_e_v___c_s_w_i_t_c_h.html">DEV_CSWITCH</a> <a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a5311d66289c20c1ca1f1c0a0a7b836f6">p3</a>;
<a name="l00636"></a>00636 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;CARD&gt;::INSTALL</a>
<a name="l00637"></a><a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#aafa05564b7c6c9fa1f8c1b1d69baf0c2">00637</a>   d2(&amp;<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#aafa05564b7c6c9fa1f8c1b1d69baf0c2">device_dispatcher</a>, <span class="stringliteral">&quot;S|vswitch&quot;</span>, &amp;p2),
<a name="l00638"></a>00638   d3(&amp;<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#aafa05564b7c6c9fa1f8c1b1d69baf0c2">device_dispatcher</a>, <span class="stringliteral">&quot;W|cswitch|iswitch&quot;</span>, &amp;p3);
<a name="l00639"></a>00639 
<a name="l00640"></a>00640 <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a> <a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#aaa89229fd0e89b631fbd5b3f4d8118e6">p1</a>(&amp;p2);
<a name="l00641"></a>00641 <a class="code" href="../../d1/d79/classanonymous__namespace_02d__switch_8cc_03_1_1_m_o_d_e_l___s_w_i_t_c_h.html">MODEL_SWITCH</a> <a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#acc6845d0a15690ce6430cf6291129621">p4</a>(&amp;p3);
<a name="l00642"></a>00642 <a class="code" href="../../da/dc7/class_d_i_s_p_a_t_c_h_e_r_1_1_i_n_s_t_a_l_l.html">DISPATCHER&lt;MODEL_CARD&gt;::INSTALL</a>
<a name="l00643"></a><a class="code" href="../../d5/d87/globals_8h.html#ad395285d3ae976ac64fbba3f88c41f2e">00643</a>   d1(&amp;<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a5860b2b4178022bf8e9229602d6d9079">model_dispatcher</a>, <span class="stringliteral">&quot;sw&quot;</span>, &amp;<a class="code" href="../../d6/d77/namespaceanonymous__namespace_02bm__complex_8cc_03.html#aaa89229fd0e89b631fbd5b3f4d8118e6">p1</a>),
<a name="l00644"></a>00644   d4(&amp;<a class="code" href="../../d1/d29/namespaceanonymous__namespace_02d__switch_8cc_03.html#a5860b2b4178022bf8e9229602d6d9079">model_dispatcher</a>, <span class="stringliteral">&quot;csw&quot;</span>, &amp;<a class="code" href="../../d5/d0f/namespaceanonymous__namespace_02c__comand_8cc_03.html#acc6845d0a15690ce6430cf6291129621">p4</a>);
<a name="l00645"></a>00645 }
<a name="l00646"></a>00646 <span class="comment">/*--------------------------------------------------------------------------*/</span>
<a name="l00647"></a>00647 <span class="comment">/*--------------------------------------------------------------------------*/</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Thu Jun 14 2012 20:00:29 for gnucap by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
