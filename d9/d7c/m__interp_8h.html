<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>gnucap: savant/gnucap/src/m_interp.h File Reference</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">gnucap
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">savant/gnucap/src/m_interp.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../df/d99/m__cpoly_8h_source.html">m_cpoly.h</a>&quot;</code><br/>
</div>
<p><a href="../../d9/d7c/m__interp_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class Iterator &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="../../db/d1c/struct_f_p_o_l_y1.html">FPOLY1</a>&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d9/d7c/m__interp_8h.html#a176bb1a75489a193b3b86595298bc76d">interpolate</a> (Iterator begin, Iterator end, double x, double below, double above)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a176bb1a75489a193b3b86595298bc76d"></a><!-- doxytag: member="m_interp.h::interpolate" ref="a176bb1a75489a193b3b86595298bc76d" args="(Iterator begin, Iterator end, double x, double below, double above)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class Iterator &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d1c/struct_f_p_o_l_y1.html">FPOLY1</a> <a class="el" href="../../d9/d7c/m__interp_8h.html#a176bb1a75489a193b3b86595298bc76d">interpolate</a> </td>
          <td>(</td>
          <td class="paramtype">Iterator&#160;</td>
          <td class="paramname"><em>begin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Iterator&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>below</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>above</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="../../d9/d7c/m__interp_8h_source.html#l00033">33</a> of file <a class="el" href="../../d9/d7c/m__interp_8h_source.html">m_interp.h</a>.</p>

<p>References <a class="el" href="../../dd/d17/constant_8h_source.html#l00093">BIGBIG</a>, <a class="el" href="../../dd/d17/constant_8h_source.html#l00096">NOT_INPUT</a>, <a class="el" href="../../dd/d17/constant_8h_source.html#l00097">NOT_VALID</a>, and <a class="el" href="../../d6/dda/io__trace_8h_source.html#l00072">untested</a>.</p>

<p>Referenced by <a class="el" href="../../d4/da6/bm__pwl_8cc_source.html#l00143">anonymous_namespace{bm_pwl.cc}::EVAL_BM_PWL::tr_eval()</a>, and <a class="el" href="../../d0/d03/m__wave_8h_source.html#l00089">WAVE::v_out()</a>.</p>
<div class="fragment"><pre class="fragment">{
  <span class="keywordtype">double</span> f1 = <a class="code" href="../../dd/d17/constant_8h.html#a35c964936a92f1fbb6e91ccd7da5c4ae">NOT_VALID</a>;
  <span class="keywordtype">double</span> f0 = <a class="code" href="../../dd/d17/constant_8h.html#a35c964936a92f1fbb6e91ccd7da5c4ae">NOT_VALID</a>;
  <span class="keywordflow">if</span> (begin == end) {
    <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
    <span class="keywordflow">throw</span> <a class="code" href="../../df/d70/class_exception.html">Exception</a>(<span class="stringliteral">&quot;interpolate table is empty&quot;</span>);
  }
  --end;
  <span class="keywordflow">if</span> (begin == end) { <span class="comment">// only 1 entry -- constant</span>
    <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
    f1 = (x &lt; (*begin).first)
      ? ((below != <a class="code" href="../../dd/d17/constant_8h.html#abb39563dc0a27391e9e1df95cf4da216">NOT_INPUT</a>) ? below : 0.)
      : ((above != <a class="code" href="../../dd/d17/constant_8h.html#abb39563dc0a27391e9e1df95cf4da216">NOT_INPUT</a>) ? above : 0.);
    f0 = (*begin).second + (x - (*begin).first) * f1;
  }<span class="keywordflow">else</span>{
    ++begin;

    <span class="comment">// x is the search key</span>
    <span class="comment">// xx is the search key converted to a &quot;pair&quot; as required by upper_bound</span>
    <span class="comment">// upper might point to a match for the key, exact match</span>
    <span class="comment">// if not, it points just above it, no exact match</span>
    <span class="comment">// lower points just below where a match would go</span>
    <span class="comment">// so the real match is between upper and lower</span>
    <a class="code" href="../../d8/dbf/md_8h.html#a4ce4e4bfdb0d092396d0d573930f757f">DPAIR</a>    xx(x,<a class="code" href="../../dd/d17/constant_8h.html#ace649fd3e4cb0b83b43fbde70681f4d0">BIGBIG</a>);
    Iterator upper = upper_bound(begin, end, xx);
    Iterator lower = upper-1;

    <span class="comment">// set f1 (derivative)</span>
    <span class="keywordflow">if</span> ((upper == end) &amp;&amp; (x &gt; (*upper).first) &amp;&amp; (above != <a class="code" href="../../dd/d17/constant_8h.html#abb39563dc0a27391e9e1df95cf4da216">NOT_INPUT</a>)) {
      <span class="comment">// x is out of bounds, above</span>
      lower = upper;
      <span class="keywordflow">if</span> (above != 0.) {
        <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
      }
      f1 = above;
    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> ((upper == begin) &amp;&amp; (x &lt; (*lower).first) &amp;&amp; (below!=<a class="code" href="../../dd/d17/constant_8h.html#abb39563dc0a27391e9e1df95cf4da216">NOT_INPUT</a>)) {
      <span class="comment">// x is out of bounds, below</span>
      <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
      <span class="keywordflow">if</span> (below != 0.) {
        <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
      }<span class="keywordflow">else</span>{
        <a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
      }
      f1 = below;
    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*upper).first &lt;= (*lower).first) {<a class="code" href="../../d6/dda/io__trace_8h.html#aa6032a13c5f0621c16055ada1b7f47ad">untested</a>();
      <span class="keywordflow">throw</span> <a class="code" href="../../df/d70/class_exception.html">Exception</a>(<span class="stringliteral">&quot;interpolate table is not sorted or has duplicate keys&quot;</span>);
      f1 = 0.;
    }<span class="keywordflow">else</span>{
      <span class="comment">// ordinary interpolation</span>
      assert((*upper).first != (*lower).first);
      f1 = ((*upper).second-(*lower).second) / ((*upper).first-(*lower).first);
    }

    f0 = (*lower).second + (x - (*lower).first) * f1;
  }
  assert(f1 != <a class="code" href="../../dd/d17/constant_8h.html#a35c964936a92f1fbb6e91ccd7da5c4ae">NOT_VALID</a>);
  assert(f0 != <a class="code" href="../../dd/d17/constant_8h.html#a35c964936a92f1fbb6e91ccd7da5c4ae">NOT_VALID</a>);
  <span class="keywordflow">return</span> <a class="code" href="../../db/d1c/struct_f_p_o_l_y1.html">FPOLY1</a>(x, f0, f1);
}
</pre></div>
</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 13 2012 06:55:46 for gnucap by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
